################################################################################
#                                                                              #
#                  PROMPT TARGET - NETWORK > LOAD BALANCER                     #
#                                                                              #
#                              Version 1.0                                     #
#                                                                              #
################################################################################

# 0. VISION PRODUIT
################################################################################

Load Balancer (IP Load Balancing) est le service de rÃ©partition de charge
OVHcloud permettant de :
- Distribuer le trafic sur plusieurs serveurs backends
- GÃ©rer la haute disponibilitÃ©
- Terminer SSL/TLS
- Surveiller l'Ã©tat des serveurs (health checks)
- Collecter les logs et mÃ©triques

L'interface permet de gÃ©rer :
- Frontends (points d'entrÃ©e publics)
- Fermes (groupes de serveurs backends)
- Certificats SSL
- Configuration rÃ©seau (IP, vRack)


# 1. NAVIGATION
################################################################################

NAV1: Network
NAV2: Load Balancer (sÃ©lectionnÃ©)
NAV3: Region (dropdown dans LEFT PANEL)
NAV4: [GÃ©nÃ©ral] [Subnet] [Fermes] [Frontends] [SSL] [Logs] [Graphiques] [TÃ¢ches]

## 1.1 Position dans la hiÃ©rarchie

```
Network (NAV1)
â”œâ”€â”€ Subnet
â”œâ”€â”€ vRack
â”œâ”€â”€ Load Balancer* (NAV2 actif)
â”œâ”€â”€ CDN
â”œâ”€â”€ OVHcloud Connect
â”œâ”€â”€ Anti-DDoS VAC
â””â”€â”€ Anti-DDoS Game
```

## 1.2 URLs

| Ã‰cran | URL |
|-------|-----|
| Vue d'ensemble | /network/load-balancer |
| DÃ©tail LB | /network/load-balancer/{serviceName} |
| Tab Subnet | /network/load-balancer/{serviceName}/subnet |
| Tab Fermes | /network/load-balancer/{serviceName}/farms |
| Tab Frontends | /network/load-balancer/{serviceName}/frontends |
| Tab SSL | /network/load-balancer/{serviceName}/ssl |
| Tab Logs | /network/load-balancer/{serviceName}/logs |
| Tab Graphiques | /network/load-balancer/{serviceName}/graphs |
| Tab TÃ¢ches | /network/load-balancer/{serviceName}/tasks |


# 2. LEFT PANEL (280px)
################################################################################

## 2.1 Structure

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Region          [â–¼] â”‚  â† NAV3 : Filtre par rÃ©gion
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ” Rechercher...    â”‚  â† Recherche nom/IP
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â—GÃ©nÃ©ral (ALL)      â”‚  â† Vue d'ensemble (toujours visible)
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â—‹lb-prod            â”‚  â† Liste des Load Balancers
â”‚   ğŸŸ¢ GRA,RBX        â”‚
â”‚ â—‹lb-staging         â”‚
â”‚   ğŸŸ¢ GRA            â”‚
â”‚ â—‹lb-dev             â”‚
â”‚   ğŸŸ¡ GRA            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## 2.2 NAV3 : Filtre Region

Filtre les Load Balancers par zone de dÃ©ploiement.

## 2.3 Format Ã©lÃ©ment LB

```
â—‹ lb-prod            â† Nom du LB
  ğŸŸ¢ GRA,RBX         â† Statut + Zones dÃ©ployÃ©es
```

Indicateurs de statut :
- ğŸŸ¢ OK : Tous les frontends/fermes fonctionnent
- ğŸŸ¡ Warning : Certains backends down
- ğŸ”´ Critical : Service dÃ©gradÃ©


# 3. RIGHT PANEL - TAB GÃ‰NÃ‰RAL (Vue d'ensemble)
################################################################################

Quand "GÃ©nÃ©ral (ALL)" est sÃ©lectionnÃ© dans le LEFT PANEL.

## 3.1 Header

```
Load Balancer - Vue d'ensemble               [+ Commander]
```

## 3.2 Cartes statistiques

| Carte | Contenu |
|-------|---------|
| Total | {lb_count} |
| ğŸŸ¢ Actifs | {active_count} |
| ğŸŸ¡ Warning | {warning_count} |

## 3.3 Section "Par rÃ©gion"

Barres horizontales :
- GRA : {count}
- RBX : {count}
- etc.

## 3.4 Section "Trafic global (7j)"

Graphique sparkline du trafic total.
Total : {total_bandwidth} GB


# 4. RIGHT PANEL - TAB GÃ‰NÃ‰RAL (LB sÃ©lectionnÃ©)
################################################################################

## 4.1 Header

```
LB Production                                        [â†»]
IP: 51.210.x.x â€¢ GRA,RBX â€¢ ğŸŸ¢ ok
```

## 4.2 Cartes mÃ©triques

| Carte | Contenu |
|-------|---------|
| Frontends | {frontend_count} activÃ©s |
| Fermes | {farm_count} activÃ©es |
| Serveurs | {server_active}/{server_total} actifs |

## 4.3 Cartes par zone

Pour chaque zone dÃ©ployÃ©e :
| Zone | Bande passante |
|------|---------------|
| GRA | {bandwidth}/10 GB |
| RBX | {bandwidth}/10 GB |

## 4.4 Section "Graphique trafic"

Mini-graphique du trafic 24h.


# 5. RIGHT PANEL - TAB SUBNET
################################################################################

## 5.1 Description

Configuration rÃ©seau du Load Balancer (IPs publiques et vRack).

## 5.2 Section "IP publiques"

| Type | IP | Zone | Statut |
|------|-----|------|--------|
| Anycast | 51.210.123.45 | ALL | ğŸŸ¢ |
| Failover | 51.210.123.46 | GRA | ğŸŸ¢ |
| Failover | 51.210.123.47 | RBX | ğŸŸ¢ |

## 5.3 Section "IP vRack (privÃ©es)"

| vRack | Subnet | IP LB |
|-------|--------|-------|
| pn-123456 | 10.0.1.0/24 | 10.0.1.10 |
| pn-123456 | 10.0.2.0/24 | 10.0.2.10 |

## 5.4 Actions

```
[+ Ajouter IP] [Configurer vRack]
```


# 6. RIGHT PANEL - TAB FERMES
################################################################################

## 6.1 Description

Fermes = groupes de serveurs backends recevant le trafic.

## 6.2 Header section

```
Fermes de serveurs ({count})                    [+ CrÃ©er]
```

## 6.3 Tableau des fermes

| Ferme | Port | Protocole | Serveurs | Statut | Actions |
|-------|------|-----------|----------|--------|---------|
| farm-web | 80 | HTTP | 4/4 ğŸŸ¢ | Actif | â‹® |
| farm-api | 8080 | HTTP | 3/4 ğŸŸ¡ | Actif | â‹® |
| farm-ws | 443 | TCP | 2/2 ğŸŸ¢ | Actif | â‹® |

## 6.4 DÃ©tail ferme (expansion)

| Serveur | IP | Port | Poids | Statut |
|---------|-----|------|-------|--------|
| server-1 | 10.0.1.11 | 80 | 100 | ğŸŸ¢ UP |
| server-2 | 10.0.1.12 | 80 | 100 | ğŸŸ¢ UP |
| server-3 | 10.0.1.13 | 80 | 100 | ğŸ”´ DOWN |

## 6.5 Algorithmes de rÃ©partition

| Algorithme | Description |
|------------|-------------|
| roundrobin | Distribution cyclique |
| leastconn | Moins de connexions |
| source | Hash IP source |
| uri | Hash URI |


# 7. RIGHT PANEL - TAB FRONTENDS
################################################################################

## 7.1 Description

Frontends = points d'entrÃ©e du trafic (IPs et ports publics).

## 7.2 Header section

```
Frontends ({count})                             [+ CrÃ©er]
```

## 7.3 Tableau des frontends

| Frontend | Port | Protocole | Ferme | SSL | Statut | Actions |
|----------|------|-----------|-------|-----|--------|---------|
| front-https | 443 | HTTPS | farm-web | âœ… | ğŸŸ¢ | â‹® |
| front-http | 80 | HTTP | farm-web | âŒ | ğŸŸ¢ | â‹® |
| front-api | 8443 | HTTPS | farm-api | âœ… | ğŸŸ¢ | â‹® |

## 7.4 Configuration frontend

| Option | Description |
|--------|-------------|
| Port | Port d'Ã©coute (1-65535) |
| Protocole | HTTP, HTTPS, TCP |
| Ferme dÃ©faut | Ferme par dÃ©faut |
| SSL | Certificat associÃ© |
| Redirect HTTPâ†’HTTPS | Redirection automatique |


# 8. RIGHT PANEL - TAB SSL
################################################################################

## 8.1 Description

Gestion des certificats SSL/TLS pour le Load Balancer.

## 8.2 Header section

```
Certificats SSL ({count})                    [+ Ajouter]
```

## 8.3 Tableau des certificats

| Domaine | Type | Expiration | Statut | Actions |
|---------|------|------------|--------|---------|
| *.example.com | Let's Encrypt | 15/03/2026 | ğŸŸ¢ | â‹® |
| api.example.com | Custom | 01/06/2026 | ğŸŸ¢ | â‹® |
| legacy.example.com | Custom | 15/01/2026 | ğŸŸ¡ | â‹® |

## 8.4 Types de certificats

| Type | Description |
|------|-------------|
| Let's Encrypt | Gratuit, renouvellement auto |
| Custom | Certificat importÃ© |
| OVHcloud SSL | Certificat OVHcloud |

## 8.5 Actions

```
[+ Importer certificat] [+ GÃ©nÃ©rer Let's Encrypt]
```


# 9. RIGHT PANEL - TAB LOGS
################################################################################

## 9.1 Description

Logs d'accÃ¨s et de trafic du Load Balancer.

## 9.2 Sous-tabs (NAV5)

```
[Logs] [Livetail] [Datastreams]
```

## 9.3 Section Logs

Tableau des logs rÃ©cents avec filtres :
- PÃ©riode
- Code HTTP
- Frontend
- Ferme

## 9.4 Section Livetail

Flux de logs en temps rÃ©el.

## 9.5 Section Datastreams

Configuration export vers Logs Data Platform.


# 10. RIGHT PANEL - TAB GRAPHIQUES
################################################################################

## 10.1 Description

MÃ©triques et graphiques de performance.

## 10.2 MÃ©triques disponibles

| MÃ©trique | Description |
|----------|-------------|
| RequÃªtes/s | Nombre de requÃªtes par seconde |
| Bande passante | Trafic entrant/sortant |
| Latence | Temps de rÃ©ponse |
| Connexions | Connexions actives |
| Codes HTTP | RÃ©partition 2xx/3xx/4xx/5xx |

## 10.3 SÃ©lection pÃ©riode

```
[1h] [6h] [24h] [7j] [30j] [PersonnalisÃ©]
```


# 11. RIGHT PANEL - TAB TÃ‚CHES
################################################################################

## 11.1 Tableau des tÃ¢ches

| Date | OpÃ©ration | Cible | Statut | DurÃ©e |
|------|-----------|-------|--------|-------|
| {date} | Ajout serveur | farm-web | âœ… | 2s |
| {date} | CrÃ©ation frontend | front-api | âœ… | 1s |
| {date} | Appliquer config | - | ğŸ”„ | - |


# 12. APIS & ENDPOINTS
################################################################################

## 12.1 Load Balancer

```
GET /ipLoadbalancing
GET /ipLoadbalancing/{serviceName}
GET /ipLoadbalancing/{serviceName}/serviceInfos
```

## 12.2 Fermes

```
GET /ipLoadbalancing/{serviceName}/http/farm
POST /ipLoadbalancing/{serviceName}/http/farm
GET /ipLoadbalancing/{serviceName}/http/farm/{farmId}
PUT /ipLoadbalancing/{serviceName}/http/farm/{farmId}
DELETE /ipLoadbalancing/{serviceName}/http/farm/{farmId}

GET /ipLoadbalancing/{serviceName}/http/farm/{farmId}/server
POST /ipLoadbalancing/{serviceName}/http/farm/{farmId}/server
```

## 12.3 Frontends

```
GET /ipLoadbalancing/{serviceName}/http/frontend
POST /ipLoadbalancing/{serviceName}/http/frontend
GET /ipLoadbalancing/{serviceName}/http/frontend/{frontendId}
PUT /ipLoadbalancing/{serviceName}/http/frontend/{frontendId}
DELETE /ipLoadbalancing/{serviceName}/http/frontend/{frontendId}
```

## 12.4 SSL

```
GET /ipLoadbalancing/{serviceName}/ssl
POST /ipLoadbalancing/{serviceName}/ssl
DELETE /ipLoadbalancing/{serviceName}/ssl/{id}
```

## 12.5 Refresh

```
POST /ipLoadbalancing/{serviceName}/refresh
```


# 13. VARIABLES DYNAMIQUES
################################################################################

| Variable | Source | Exemple |
|----------|--------|---------|
| {serviceName} | API | loadbalancer-xxx |
| {displayName} | API | LB Production |
| {ip} | API | 51.210.123.45 |
| {zones} | API | GRA,RBX |
| {state} | API | ok / warning / critical |
| {frontend_count} | Comptage | 3 |
| {farm_count} | Comptage | 2 |
| {server_active} | Comptage | 7 |
| {server_total} | Comptage | 8 |


# 14. MODALES
################################################################################

## 14.1 modal-create-farm

| Champ | Type | Validation |
|-------|------|------------|
| Nom | Input | Requis |
| Port | Input | 1-65535 |
| Protocole | Select | HTTP/TCP |
| Balance | Select | roundrobin/leastconn/source |
| Zone | Select | Liste zones |

## 14.2 modal-add-server

| Champ | Type | Validation |
|-------|------|------------|
| Adresse | Input | IP valide |
| Port | Input | 1-65535 |
| Poids | Input | 1-256 |
| Backup | Toggle | Serveur backup |

## 14.3 modal-create-frontend

| Champ | Type | Validation |
|-------|------|------------|
| Nom | Input | Requis |
| Port | Input | 1-65535 |
| Protocole | Select | HTTP/HTTPS/TCP |
| Ferme | Select | Fermes existantes |
| Certificat SSL | Select | Si HTTPS |

## 14.4 modal-add-ssl

| Champ | Type |
|-------|------|
| Type | Radio (Let's Encrypt / Import) |
| Domaine | Input (Let's Encrypt) |
| Certificat | Textarea (Import) |
| ClÃ© privÃ©e | Textarea (Import) |
| ChaÃ®ne | Textarea (Import, optionnel) |


# 15. RÃˆGLES MÃ‰TIER
################################################################################

## 15.1 Zones

- Un LB peut Ãªtre dÃ©ployÃ© sur plusieurs zones
- Chaque zone a sa propre IP failover
- IP Anycast pour toutes les zones

## 15.2 Fermes

- Une ferme = un backend
- Protocole HTTP ou TCP
- Serveurs avec poids et backup

## 15.3 Frontends

- Frontend â†’ Ferme (1:1)
- SSL optionnel
- Redirection HTTPâ†’HTTPS

## 15.4 Refresh

- Toute modification nÃ©cessite un "refresh"
- Le refresh applique la configuration


# 16. COMPOSANTS ODS UTILISÃ‰S
################################################################################

- OdsTabs : NAV4 tabs
- OdsInput : Formulaires
- OdsSelect : Protocoles, zones
- OdsDatagrid : Tableaux
- OdsCard : MÃ©triques
- OdsBadge : Statuts
- OdsButton : Actions
- OdsModal : Modales
- OdsToggle : Options
- OdsCharts : Graphiques


# 17. FICHIERS ASSOCIÃ‰S
################################################################################

Documentation : prompt_target.network.load-balancer.txt (ce fichier)
Screenshots : prompt_target.network.load-balancer.*.ss (dans target_manager_svg)

################################################################################
#                            FIN DU DOCUMENT                                   #
################################################################################
