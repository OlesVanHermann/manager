# PROMPT SVG - Generation de Maquettes SVG depuis Old Manager

## Emplacement des fichiers

| Element | Valeur |
|---------|--------|
| **Fichier** | prompt_svg.txt |
| **Chemin complet** | /home/ubuntu/prompt_svg.txt |
| **Destination SVG** | /home/ubuntu/old_manager_svg/ |

---

## Objectif

Analyser un tar extrait de l'old_manager OVHcloud et produire une **maquette SVG haute fidelite** representant l'interface utilisateur telle qu'elle apparait dans le navigateur, permettant de visualiser la page **sans executer le code source**.

---

## REGLES ABSOLUES (LIRE EN PREMIER)

### Regle 0 : ZERO HALLUCINATION
**INTERDIT ABSOLU** d'inventer, deviner ou halluciner des elements qui n'existent pas dans le code analyse.
- Si un element n'est pas dans le code source -> NE PAS L'AJOUTER
- Si un label n'est pas dans les traductions -> NE PAS L'INVENTER
- Si une colonne n'est pas dans useDatagridColumn -> NE PAS LA CREER
- Si un bouton n'est pas dans le JSX -> NE PAS LE DESSINER
- En cas de doute -> grep le code pour verifier AVANT d'ajouter quoi que ce soit
- **Chaque pixel du SVG doit etre justifiable par une ligne de code source**

### Regle 1 : Fidelite au Design System OVH
Utiliser STRICTEMENT les tokens CSS du design system.
**JAMAIS hardcoder les couleurs** - toujours referencer les variables CSS.

### Regle 2 : Dimensions standardisees
- Largeur totale : 1440px (desktop standard)
- Hauteur : variable selon contenu (minimum 900px)
- Sidebar : 240px
- Header : 60px
- Padding content : 40px

### Regle 3 : EXPOSER LES ACTIONS CACHEES (Menu ⋮)
**OBLIGATOIRE** : Identifier et afficher TOUTES les actions cachees derriere les menus "⋮" (kebab menu / ActionMenu).
- Chercher dans le code : `ActionMenu`, `items={[...]}`, `actions={[...]}`
- Extraire chaque action avec son label traduit
- Dans le SVG : afficher le menu **OUVERT** avec toutes les actions visibles
- Mettre en evidence avec un fond leger et une fleche pointant vers le bouton ⋮

**Exemple de detection dans le code :**
```typescript
<ActionMenu
  items={[
    { label: t('action_edit'), onClick: handleEdit },
    { label: t('action_delete'), onClick: handleDelete },
    { label: t('action_duplicate'), onClick: handleDuplicate },
  ]}
/>
```

**Rendu SVG attendu :**
```xml
<!-- Bouton kebab -->
<text x="..." y="...">⋮</text>
<!-- Menu ouvert (dropdown) -->
<g id="action-menu-open">
  <rect rx="4" fill="#FFFFFF" stroke="var(--color-neutral-200)" filter="drop-shadow(...)"/>
  <text>Modifier</text>
  <text>Supprimer</text>
  <text>Dupliquer</text>
</g>
```

---

## STRATEGIE D'ANALYSE (METHODOLOGIE)

### Phase 1 : Extraction et preparation
1. Extraire le tar dans `/home/claude`
2. Lister l'arborescence pour identifier les fichiers cles
3. Identifier le type de page (liste, detail, formulaire, dashboard)

### Phase 2 : Analyse du code
1. **layout.tsx** - Structure globale (breadcrumb, tabs, header)
2. ***.page.tsx / index.tsx** - Contenu principal de la page
3. **components/*.tsx** - Composants UI (topbar, datagrid, cards)
4. **hooks/useDatagridColumn.tsx** - Colonnes des tableaux
5. **Messages_fr_FR.json** - Traductions francaises
6. **ActionMenu / items** - **Actions cachees a exposer**

### Phase 3 : Generation SVG
1. SVG principal (etat par defaut) - **OBLIGATOIRE**
2. SVG modals (si presentes dans le code) - **RECOMMANDE**
3. SVG etats alternatifs (empty, error) - **OPTIONNEL**

### Phase 4 : Validation
1. Verifier que chaque element SVG correspond a du code source
2. Verifier les traductions FR appliquees
3. Verifier les couleurs via tokens CSS
4. **Verifier que les ActionMenu sont affiches OUVERTS**

---

## Design System Tokens (OBLIGATOIRE)

### Source des tokens
```
/home/ubuntu/aiapp/frontend/src/design-system/tokens.css
/home/ubuntu/aiapp/frontend/src/design-system/globals.css
```

### Couleurs principales

| Token CSS | Usage |
|-----------|-------|
| `--color-primary-500` | Bleu OVH principal |
| `--color-primary-100` | Bleu tres clair (selection) |
| `--color-text` | Texte principal |
| `--color-text-muted` | Texte secondaire |
| `--color-bg-muted` | Background page |
| `--color-neutral-100` | Header tableau |
| `--color-neutral-200` | Bordures |
| `--color-header` | Header OVH (#000E9C) |
| `--color-success-100/700` | Badge succes |
| `--color-warning-100/700` | Badge warning |
| `--color-error-100/700` | Badge erreur |

### Structure SVG avec tokens
```xml
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 {HEIGHT}" width="1440" height="{HEIGHT}">
  <defs>
    <style>
      :root {
        --color-primary-500: #0050D7;
        --color-primary-100: #E8F0FE;
        --color-text: #1F2937;
        --color-text-muted: #6B7280;
        --color-bg-muted: #F9FAFB;
        --color-neutral-100: #F3F4F6;
        --color-neutral-200: #E5E7EB;
        --color-header: #000E9C;
        --color-success-100: #DEF7EC;
        --color-success-700: #03543F;
        --color-warning-100: #FEF3C7;
        --color-warning-700: #92400E;
        --color-error-100: #FEE2E2;
        --color-error-700: #991B1B;
        --font-family: 'Source Sans Pro', sans-serif;
      }
      .bg-primary { fill: var(--color-primary-500); }
      .bg-muted { fill: var(--color-bg-muted); }
      .bg-white { fill: #FFFFFF; }
      .bg-header { fill: var(--color-header); }
      .text-body { font-family: var(--font-family); font-size: 14px; fill: var(--color-text); }
      .text-muted { font-family: var(--font-family); font-size: 14px; fill: var(--color-text-muted); }
      .text-link { font-family: var(--font-family); font-size: 14px; fill: var(--color-primary-500); }
      .text-white { font-family: var(--font-family); fill: #FFFFFF; }
      .border { stroke: var(--color-neutral-200); stroke-width: 1; }
      /* Style pour les menus d'action ouverts */
      .action-menu-dropdown { fill: #FFFFFF; stroke: var(--color-neutral-200); filter: drop-shadow(0 4px 6px rgba(0,0,0,0.1)); }
      .action-menu-item:hover { fill: var(--color-neutral-100); }
    </style>
  </defs>
  
  <!-- Background -->
  <rect width="1440" height="{HEIGHT}" class="bg-muted"/>
  
  <!-- Header OVH (60px) -->
  <g id="header">
    <rect width="1440" height="60" class="bg-header"/>
  </g>
  
  <!-- Sidebar (240px) -->
  <g id="sidebar" transform="translate(0, 60)">
    <rect width="240" height="{HEIGHT-60}" class="bg-white"/>
  </g>
  
  <!-- Main Content -->
  <g id="content" transform="translate(240, 60)">
    <!-- Contenu extrait du code -->
  </g>
</svg>
```

---

## Fichiers a analyser (par ordre de priorite)

| Priorite | Fichier | Information extraite |
|----------|---------|---------------------|
| 1 | layout.tsx | Structure, breadcrumb, tabs |
| 2 | *.page.tsx | Contenu principal |
| 3 | components/*.tsx | Elements UI |
| 4 | useDatagridColumn.tsx | Colonnes tableaux + **ActionMenu** |
| 5 | Messages_fr_FR.json | Traductions |
| 6 | styles.css | Styles specifiques |

---

## Convention de nommage des SVG
```
old_manager.{NAV1}.{NAV2}.svg                    # Page principale
old_manager.{NAV1}.{NAV2}.tab-{nom}.svg          # Onglet specifique
old_manager.{NAV1}.{NAV2}.modal-{action}.svg     # Modal
old_manager.{NAV1}.{NAV2}.state-{etat}.svg       # Etat (empty, error)
```

### Exemples
```
old_manager.web-cloud.hosting.tab-general.svg
old_manager.web-cloud.hosting.tab-ssl.svg
old_manager.web-cloud.hosting.modal-order.svg
old_manager.web-cloud.domain.svg
old_manager.web-cloud.domain.modal-delete.svg
```

---

## Detection des elements dans le code

### Boutons
```typescript
// Chercher dans le JSX
<OdsButton variant="primary" label={t('action_label')} />
<OdsButton variant="outline" onClick={...} />
// -> Extraire le label depuis les traductions
```

### Datagrid / Tableaux
```typescript
// Chercher useDatagridColumn ou columns definition
const columns = [
  { id: 'name', label: t('column_name') },
  { id: 'status', label: t('column_status'), cell: StatusBadge },
];
// -> Extraire chaque colonne avec son label traduit
```

### Tabs
```typescript
// Chercher dans layout.tsx
const tabs = [
  { name: 'general', label: t('tab_general') },
  { name: 'settings', label: t('tab_settings') },
];
// -> Lister tous les tabs, identifier l'actif
```

### Modals
```typescript
// Chercher OdsModal, Dialog, ou useState pour modal
const [showModal, setShowModal] = useState(false);
<OdsModal open={showModal}>...</OdsModal>
// -> Generer un SVG separe pour chaque modal
```

### Badges / Status
```typescript
// Chercher OdsBadge ou StatusBadge
<OdsBadge color="success" label={t('status_active')} />
// -> Utiliser les tokens de couleur correspondants
```

### ActionMenu / Menu ⋮ (IMPORTANT)
```typescript
// Chercher ActionMenu, DropdownMenu, items={[...]}
<ActionMenu
  items={[
    { id: 'edit', label: t('action_edit'), onClick: ... },
    { id: 'delete', label: t('action_delete'), onClick: ... },
    { id: 'regenerate', label: t('action_regenerate'), onClick: ... },
  ]}
/>
// -> OBLIGATOIRE : Afficher le menu OUVERT dans le SVG
// -> Lister TOUTES les actions avec leurs labels traduits
```

**Rendu SVG pour ActionMenu ouvert :**
```xml
<!-- Ligne du tableau avec ActionMenu -->
<g id="row-actions">
  <!-- Bouton ⋮ -->
  <text x="1150" y="250" class="text-muted" style="font-size: 18px;">⋮</text>
  
  <!-- Dropdown ouvert - TOUJOURS VISIBLE -->
  <g id="dropdown-menu" transform="translate(1050, 260)">
    <!-- Fond avec ombre -->
    <rect width="150" height="120" rx="4" class="action-menu-dropdown"/>
    <!-- Actions -->
    <text x="12" y="30" class="text-body">Modifier</text>
    <line x1="0" y1="40" x2="150" y2="40" class="border"/>
    <text x="12" y="60" class="text-body">Regenerer</text>
    <line x1="0" y1="70" x2="150" y2="70" class="border"/>
    <text x="12" y="90" style="fill: var(--color-error-700);">Supprimer</text>
  </g>
</g>
```

---

## Rapport de generation (OBLIGATOIRE)

Apres analyse, produire un rapport :
```
=== ANALYSE DU TAR ===
Source : old_manager.{nav1}.{nav2}.tar
Fichiers analyses : X

=== ELEMENTS DETECTES ===
- Layout : [breadcrumb, tabs, header]
- Composants : [liste des composants trouves]
- Colonnes Datagrid : [liste si applicable]
- Boutons : [liste avec labels]
- Modals : [liste si applicable]
- **ActionMenu (⋮)** : [LISTE DE TOUTES LES ACTIONS CACHEES]

=== SVG A GENERER ===
1. [OBLIGATOIRE] old_manager.{nav1}.{nav2}.svg - Page principale (avec ActionMenu ouvert)
2. [RECOMMANDE] old_manager.{nav1}.{nav2}.modal-xxx.svg - Modal XXX
3. [OPTIONNEL] old_manager.{nav1}.{nav2}.state-empty.svg - Etat vide

=== GENERATION ===
[Generer les SVG dans l'ordre de priorite]
```

---

## Checklist finale

Avant de livrer un SVG :

- [ ] Chaque element correspond a du code source (ZERO HALLUCINATION)
- [ ] Dimensions 1440px largeur
- [ ] Header OVH present (60px)
- [ ] Sidebar presente (240px)
- [ ] Couleurs via tokens CSS (pas de hex hardcode)
- [ ] Textes en francais (traductions appliquees)
- [ ] **ActionMenu (⋮) affiches OUVERTS avec toutes les actions visibles**
- [ ] Fichier SVG valide et ouvrable
