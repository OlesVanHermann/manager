# PROMPT STATIC v2 - Site Navigable depuis SVG Target (AlignÃ© Terminologie Officielle)

Version: v2.0 (2026-01-02)
Remplace: prompt_static.txt v1
AlignÃ© sur: prompt_target.txt v5, prompt_split.txt v3

Changelog v1â†’v2:
- Terminologie officielle NAV1-NAV4 avec positions fixes
- NAV3 = Groupement (LEFT PANEL, au-dessus recherche)
- NAV4 = Fonction (RIGHT PANEL, tabs principaux)
- SUBTABS = sous-onglets (optionnel, sous NAV4)
- Nouvelle convention de nommage fichiers avec NAV3
- Structure JSON alignÃ©e

---

## 0. TERMINOLOGIE OFFICIELLE

### 0.1 DÃ©finitions et positions

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Niveau  â”‚ Nom          â”‚ Position     â”‚ Description                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ NAV1    â”‚ Univers      â”‚ Header bleu  â”‚ Web Cloud, Public Cloud, Network...    â”‚
â”‚         â”‚              â”‚ (y=0-50)     â”‚                                         â”‚
â”‚ NAV2    â”‚ Produit      â”‚ Sous-header  â”‚ Domaines, HÃ©bergement, Emails, VoIP... â”‚
â”‚         â”‚              â”‚ (y=50-90)    â”‚                                         â”‚
â”‚ NAV3    â”‚ Groupement   â”‚ LEFT PANEL   â”‚ [GÃ©nÃ©ral] [Sites] [Expert]              â”‚
â”‚         â”‚              â”‚ (au-dessus   â”‚ Filtre les NAV4 affichÃ©s                â”‚
â”‚         â”‚              â”‚ recherche)   â”‚                                         â”‚
â”‚ NAV4    â”‚ Fonction     â”‚ RIGHT PANEL  â”‚ FTP, SSL, BDD, CDN, Cron...            â”‚
â”‚         â”‚              â”‚ (tabs)       â”‚ Onglets principaux                      â”‚
â”‚ SUBTABS â”‚ Sous-tabs    â”‚ RIGHT PANEL  â”‚ Statut, Diagnostic, ThÃ¨mes, Plugins    â”‚
â”‚         â”‚              â”‚ (sous NAV4)  â”‚ Optionnel                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

### 0.2 Structure visuelle

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ NAV1 - Univers (Header bleu OVH, y=0-50)                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ NAV2 - Produit (Sous-header blanc, y=50-90)                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ LEFT PANEL (280px)    â”‚ RIGHT PANEL (flex: 1)                               â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ NAV3 - Groupement â”‚ â”‚ â”‚ Titre service                                   â”‚ â”‚
â”‚ â”‚ [GÃ©nÃ©ral][Sites]  â”‚ â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ â”‚ NAV4 - Fonction                                 â”‚ â”‚
â”‚ â”‚ ğŸ” Rechercher...  â”‚ â”‚ â”‚ [FTP] [SSL] [BDD] [CDN] [Cron]                  â”‚ â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚ â”‚ Liste services    â”‚ â”‚ â”‚ SUBTABS (optionnel)                             â”‚ â”‚
â”‚ â”‚                   â”‚ â”‚ â”‚ [Statut] [Diagnostic]                           â”‚ â”‚
â”‚ â”‚                   â”‚ â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚ â”‚                   â”‚ â”‚ â”‚ Contenu de l'onglet sÃ©lectionnÃ©                 â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 0.3 RÃ¨gles de position CRITIQUES

- **NAV3** (Groupement) est **TOUJOURS** dans le LEFT PANEL, **AU-DESSUS** de la recherche
- **NAV4** (Fonction) est **TOUJOURS** dans le RIGHT PANEL (tabs principaux)
- **SUBTABS** sont **TOUJOURS** sous les NAV4 tabs, dans le RIGHT PANEL

---

## 1. Contexte et objectif

GÃ©nÃ©rer un **site HTML statique navigable** Ã  partir des SVG target_ du New Manager OVHcloud.

**Input :** Archives `target_*.tar` contenant :
- Fichiers `.svg` : mockups visuels complets (1440x900px)
- Fichiers `.txt` : spÃ©cifications (design tokens, actions, APIs)

**Output :** Site HTML statique dans `/home/ubuntu/aiapp/static/`

**DÃ©ploiement :** `https://manager.di2amp.com/static/`

---

## 2. WORKFLOW EN 2 PHASES

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   SVG Source    â”‚â”€â”€â”€â”€â–¶â”‚   JSON Config   â”‚â”€â”€â”€â”€â–¶â”‚   HTML Final    â”‚
â”‚  (target_.svg)  â”‚ P1  â”‚  (zones, liens) â”‚ P2  â”‚  (cliquable)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     VISUEL              CONFIGURATION           NAVIGABLE
   (inchangÃ©)          (vÃ©rifiable/Ã©ditable)   (site final)
```

### PHASE 1 : DISCOVER (SVG â†’ JSON)

**But :** Analyser le SVG et crÃ©er un fichier JSON de configuration des liens.

**Actions :**
1. Lire le SVG source
2. Identifier TOUTES les zones cliquables :
   - NAV1 (header bleu, yâ‰ˆ32)
   - NAV2 (sous-header, yâ‰ˆ75)
   - NAV3 (groupement dans LEFT PANEL, yâ‰ˆ10-44)
   - NAV4 (tabs dans RIGHT PANEL)
   - SUBTABS (sous NAV4, optionnel)
   - **ACTIONS** (boutons, liens texte dans le contenu)
3. Extraire les coordonnÃ©es X/Y de chaque Ã©lÃ©ment
4. CrÃ©er le fichier JSON avec URLs cibles

**Le JSON est vÃ©rifiable et Ã©ditable manuellement avant gÃ©nÃ©ration.**

### PHASE 2 : GENERATE (SVG + JSON â†’ HTML)

**But :** Combiner le SVG et le JSON pour crÃ©er le HTML avec liens cliquables.

**Actions :**
1. Lire le SVG source
2. Lire le JSON de configuration
3. Pour chaque zone du JSON, envelopper le `<text>` avec `<a href>`
4. Utiliser les coordonnÃ©es X/Y pour un matching prÃ©cis
5. GÃ©nÃ©rer le fichier HTML final

---

## 3. Triplet de fichiers

**Chaque page a 3 fichiers dans le mÃªme rÃ©pertoire :**

```
target_.web-cloud.hosting.expert.ftp.svg   # Visuel (source)
target_.web-cloud.hosting.expert.ftp.txt   # Description textuelle
target_.web-cloud.hosting.expert.ftp.json  # Configuration des liens (crÃ©Ã© par DISCOVER)
```

| Fichier | RÃ´le | CrÃ©Ã© par |
|---------|------|----------|
| `.svg` | Visuel de la page | Designer/Outil |
| `.txt` | Description textuelle | Designer/Outil |
| `.json` | Configuration des liens | **PHASE DISCOVER** |

---

## 4. FORMAT JSON - Configuration des liens (alignÃ© terminologie)

### 4.1 Structure complÃ¨te

```json
{
  "meta": {
    "svg_source": "target_.web-cloud.hosting.expert.ftp.svg",
    "html_target": "/static/web-cloud/hosting/expert/ftp.html",
    "nav1": "web-cloud",
    "nav2": "hosting",
    "nav3": "expert",
    "nav4": "ftp",
    "title": "FTP-SSH",
    "last_updated": "2026-01-02T14:00:00"
  },
  "nav1": {
    "active": "Web Cloud",
    "items": [
      {"label": "Accueil", "url": "/static/index.html", "x": 40, "y": 32},
      {"label": "Public Cloud", "url": "/static/public-cloud/index.html", "x": 110, "y": 32},
      {"label": "Web Cloud", "url": "/static/web-cloud/index.html", "x": 510, "y": 32}
    ]
  },
  "nav2": {
    "active": "HÃ©bergement",
    "items": [
      {"label": "Accueil", "url": "/static/web-cloud/index.html", "x": 40, "y": 75},
      {"label": "Domaines et DNS", "url": "/static/web-cloud/domain/index.html", "x": 110, "y": 75},
      {"label": "HÃ©bergement", "url": "/static/web-cloud/hosting/index.html", "x": 240, "y": 75}
    ]
  },
  "nav3": {
    "active": "Expert",
    "position": "left_panel",
    "description": "Groupement - filtre les NAV4 affichÃ©s",
    "items": [
      {"label": "GÃ©nÃ©ral", "id": "general", "url": "/static/web-cloud/hosting/general/general.html"},
      {"label": "Sites", "id": "sites", "url": "/static/web-cloud/hosting/sites/multisite.html"},
      {"label": "Expert", "id": "expert", "url": "/static/web-cloud/hosting/expert/ftp.html"}
    ]
  },
  "nav4": {
    "active": "FTP",
    "position": "right_panel",
    "group": "expert",
    "description": "Fonction - tabs principaux filtrÃ©s par NAV3",
    "items": [
      {"label": "FTP", "url": "/static/web-cloud/hosting/expert/ftp.html"},
      {"label": "BDD", "url": "/static/web-cloud/hosting/expert/database.html"},
      {"label": "BDD Cloud", "url": "/static/web-cloud/hosting/expert/clouddb.html"},
      {"label": "CDN", "url": "/static/web-cloud/hosting/expert/cdn.html"},
      {"label": "Boost", "url": "/static/web-cloud/hosting/expert/boost.html"},
      {"label": "Emails", "url": "/static/web-cloud/hosting/expert/emails.html"},
      {"label": "Variables", "url": "/static/web-cloud/hosting/expert/envvars.html"},
      {"label": "Runtimes", "url": "/static/web-cloud/hosting/expert/runtimes.html"},
      {"label": "Cron", "url": "/static/web-cloud/hosting/expert/cron.html"},
      {"label": "TÃ¢ches", "url": "/static/web-cloud/hosting/expert/tasks.html"}
    ]
  },
  "subtabs": {
    "active": "Statut",
    "parent": "ftp",
    "description": "Sous-tabs optionnels sous NAV4",
    "items": [
      {"label": "Statut", "url": "/static/web-cloud/hosting/expert/ftp.html"},
      {"label": "Diagnostic", "url": "/static/web-cloud/hosting/expert/ftp-diagnostic.html"}
    ]
  },
  "actions": [
    {"label": "Modifier â†’", "type": "link", "x": 180, "y": 185, "url": "/static/web-cloud/hosting/expert/ftp-edit.html"},
    {"label": "â†» RafraÃ®chir", "type": "refresh", "x": 795, "y": 170, "url": "/static/web-cloud/hosting/expert/tasks.html"},
    {"label": "+ Ajouter utilisateur", "type": "add", "x": 805, "y": 339, "url": "/static/web-cloud/hosting/expert/ftp-modal-create.html"}
  ],
  "sidebar": {
    "type": "service-list",
    "clickable": false
  }
}
```

### 4.2 CoordonnÃ©es X/Y obligatoires

**IMPORTANT :** Les coordonnÃ©es X/Y sont **obligatoires** pour NAV1, NAV2 et ACTIONS.

Elles permettent un matching prÃ©cis et Ã©vitent les erreurs de liens dupliquÃ©s.

```json
{"label": "Web Cloud", "url": "/static/web-cloud/index.html", "x": 510, "y": 32}
```

### 4.3 Types d'actions

| Type | Pattern texte | Exemple |
|------|---------------|---------|
| `link` | `... â†’` | `Modifier â†’`, `Zone DNS â†’`, `Commander â†’` |
| `add` | `+ ...` | `+ Ajouter une entrÃ©e`, `+ Commander hÃ©bergement` |
| `refresh` | `â†» ...` | `â†» RafraÃ®chir` |
| `edit` | `Modifier ...` | `Modifier TTL` |
| `delete` | `Supprimer ...` | `Supprimer l'enregistrement` |
| `activate` | `Activer ...` | `Activer DNSSEC` |
| `deactivate` | `DÃ©sactiver ...` | `DÃ©sactiver` |
| `export` | `Exporter ...` | `Exporter en CSV` |
| `import` | `Importer ...` | `Importer zone` |
| `button` | Autre | `GÃ©rer les contacts` |

---

## 5. DÃ‰TECTION DES Ã‰LÃ‰MENTS (Phase DISCOVER)

### 5.1 Patterns de dÃ©tection par niveau

**NAV1 - Header bleu (y â‰ˆ 32) :**
```python
# Textes avec y proche de 32, dans le header bleu
nav1_pattern = r'<text[^>]*y="3[0-4]"[^>]*>([^<]+)</text>'
```

**NAV2 - Sous-header (y â‰ˆ 75) :**
```python
# Textes avec y proche de 75, dans le sous-header blanc
nav2_pattern = r'<text[^>]*y="7[3-7]"[^>]*>([^<]+)</text>'
```

**NAV3 - Groupement LEFT PANEL (y â‰ˆ 10-44 dans le groupe translate) :**
```python
# Dans le LEFT PANEL, au-dessus de la recherche
# GÃ©nÃ©ralement dans <g transform="translate(24, 105)">
# Boutons toggle: [GÃ©nÃ©ral] [Sites] [Expert]
nav3_pattern = r'<text[^>]*y="(1[0-9]|2[0-9]|3[0-9]|4[0-4])"[^>]*text-anchor="middle"[^>]*>([^<]+)</text>'
```

**NAV4 - Fonction RIGHT PANEL (y â‰ˆ 17 dans le groupe tabs) :**
```python
# Dans le RIGHT PANEL, ligne de tabs
# GÃ©nÃ©ralement dans <g transform="translate(0, 38)">
nav4_pattern = r'<text[^>]*y="17"[^>]*text-anchor="middle"[^>]*>([^<]+)</text>'
```

**SUBTABS (y â‰ˆ 14 dans le groupe sous-tabs) :**
```python
# Sous les NAV4, gÃ©nÃ©ralement y=14
# Pas de text-anchor="middle" (alignÃ© Ã  gauche)
subtabs_pattern = r'<text[^>]*y="14"[^>]*class="text-(primary|muted)"[^>]*>([^<]+)</text>'
```

### 5.2 Patterns de dÃ©tection des ACTIONS

```python
action_patterns = [
    (r'.*â†’$', 'link'),           # Modifier â†’, Zone DNS â†’, Commander â†’
    (r'^\+\s+.*', 'add'),        # + Ajouter une entrÃ©e
    (r'^â†»\s+.*', 'refresh'),     # â†» RafraÃ®chir
    (r'^Modifier\b', 'edit'),    # Modifier, Modifier TTL
    (r'^Supprimer\b', 'delete'),
    (r'^Activer\b', 'activate'),
    (r'^DÃ©sactiver\b', 'deactivate'),
    (r'^Desactiver\b', 'deactivate'),  # Sans accent
    (r'^Commander\b', 'order'),
    (r'^Exporter\b', 'export'),
    (r'^Importer\b', 'import'),
    (r'^Configurer\b', 'config'),
    (r'^GÃ©rer\b', 'button'),
    (r'^Gerer\b', 'button'),      # Sans accent
    (r'^Voir\b', 'view'),
]
```

### 5.3 Extraction des coordonnÃ©es

Pour chaque `<text>` dÃ©tectÃ©, extraire X et Y :

```xml
<text x="180" y="185" class="text-primary" font-size="11">Modifier â†’</text>
```

â†’ RÃ©sultat JSON :
```json
{"label": "Modifier â†’", "type": "link", "x": 180, "y": 185, "url": "..."}
```

---

## 6. GÃ‰NÃ‰RATION HTML (Phase GENERATE)

### 6.1 Matching par coordonnÃ©es

Utiliser les coordonnÃ©es X/Y du JSON pour trouver le bon `<text>` :

```python
def find_and_wrap_text(svg_content, label, url, x, y, tolerance=5):
    """
    Trouve le <text> avec le label aux coordonnÃ©es X,Y (Â±tolÃ©rance)
    et l'enveloppe avec <a href>
    """
    # Pattern avec coordonnÃ©es exactes
    pattern = rf'(<text[^>]*x="{x}"[^>]*y="{y}"[^>]*>){re.escape(label)}(</text>)'

    # Si pas trouvÃ©, essayer avec tolÃ©rance Â±5 pixels
    for dx in range(-tolerance, tolerance+1):
        for dy in range(-tolerance, tolerance+1):
            pattern = rf'(<text[^>]*x="{x+dx}"[^>]*y="{y+dy}"[^>]*>){re.escape(label)}(</text>)'
            if re.search(pattern, svg_content):
                replacement = rf'<a href="{url}" style="cursor:pointer">\1{label}\2</a>'
                return re.sub(pattern, replacement, svg_content, count=1)
    return svg_content
```

### 6.2 Ordre de traitement

1. NAV1 (avec coordonnÃ©es)
2. NAV2 (avec coordonnÃ©es)
3. NAV3 (dans LEFT PANEL, avec text-anchor="middle")
4. NAV4 (dans RIGHT PANEL, avec text-anchor="middle")
5. SUBTABS (sous NAV4)
6. ACTIONS (avec coordonnÃ©es)

### 6.3 Template HTML final

```html
<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{TITLE} - OVHcloud Manager</title>
  <link rel="stylesheet" href="/static/style.css">
</head>
<body>
  <div class="svg-container">
    <!-- SVG avec liens <a href> injectÃ©s -->
  </div>
</body>
</html>
```

---

## 7. Convention de nommage (alignÃ©e NAV3/NAV4)

### 7.1 Mapping SVG â†’ HTML (avec NAV3)

| Pattern SVG | Chemin HTML |
|-------------|-------------|
| `target_.{nav1}.{nav2}.{nav3}.{nav4}.svg` | `/{nav1}/{nav2}/{nav3}/{nav4}.html` |
| `target_.{nav1}.{nav2}.{nav3}.{nav4}.modal-{action}.svg` | `/{nav1}/{nav2}/{nav3}/{nav4}/modal-{action}.html` |
| `target_.{nav1}.{nav2}.index.svg` | `/{nav1}/{nav2}/index.html` |
| `target_.{nav1}.index.svg` | `/{nav1}/index.html` |

### 7.2 Exemples concrets (Hosting)

| Fichier SVG | Fichier HTML | NAV3 | NAV4 |
|-------------|--------------|------|------|
| `target_.web-cloud.hosting.general.general.svg` | `/web-cloud/hosting/general/general.html` | general | general |
| `target_.web-cloud.hosting.general.offer.svg` | `/web-cloud/hosting/general/offer.html` | general | offer |
| `target_.web-cloud.hosting.general.statistics.svg` | `/web-cloud/hosting/general/statistics.html` | general | statistics |
| `target_.web-cloud.hosting.sites.multisite.svg` | `/web-cloud/hosting/sites/multisite.html` | sites | multisite |
| `target_.web-cloud.hosting.sites.ssl.svg` | `/web-cloud/hosting/sites/ssl.html` | sites | ssl |
| `target_.web-cloud.hosting.expert.ftp.svg` | `/web-cloud/hosting/expert/ftp.html` | expert | ftp |
| `target_.web-cloud.hosting.expert.database.svg` | `/web-cloud/hosting/expert/database.html` | expert | database |
| `target_.web-cloud.hosting.expert.cdn.svg` | `/web-cloud/hosting/expert/cdn.html` | expert | cdn |

### 7.3 Exemples concrets (Domain)

| Fichier SVG | Fichier HTML | NAV3 | NAV4 |
|-------------|--------------|------|------|
| `target_.web-cloud.domain.general.general.svg` | `/web-cloud/domain/general/general.html` | general | general |
| `target_.web-cloud.domain.general.contacts.svg` | `/web-cloud/domain/general/contacts.html` | general | contacts |
| `target_.web-cloud.domain.dns.zone.svg` | `/web-cloud/domain/dns/zone.html` | dns | zone |
| `target_.web-cloud.domain.dns.dnssec.svg` | `/web-cloud/domain/dns/dnssec.html` | dns | dnssec |
| `target_.web-cloud.domain.expert.glue.svg` | `/web-cloud/domain/expert/glue.html` | expert | glue |
| `target_.web-cloud.domain.expert.tasks.svg` | `/web-cloud/domain/expert/tasks.html` | expert | tasks |

### 7.4 Modales

| Fichier SVG | Fichier HTML |
|-------------|--------------|
| `target_.web-cloud.hosting.expert.ftp.modal-create.svg` | `/web-cloud/hosting/expert/ftp/modal-create.html` |
| `target_.web-cloud.hosting.expert.ftp.modal-delete.svg` | `/web-cloud/hosting/expert/ftp/modal-delete.html` |
| `target_.web-cloud.domain.dns.zone.modal-add.svg` | `/web-cloud/domain/dns/zone/modal-add.html` |

---

## 8. Navigation complÃ¨te (NAV1, NAV2, NAV3, NAV4, SUBTABS)

### 8.1 NAV1 - Header bleu (y â‰ˆ 32)

Position: y=0-50, background=#000E9C

| Label | URL | X |
|-------|-----|---|
| Accueil | `/static/index.html` | 40 |
| Public Cloud | `/static/public-cloud/index.html` | 110 |
| Hosted Private Cloud | `/static/private-cloud/index.html` | 210 |
| Bare Metal Cloud | `/static/bare-metal/index.html` | 370 |
| Web Cloud | `/static/web-cloud/index.html` | 510 |
| Network | `/static/network/index.html` | 620 |
| IAM / Securite | `/static/iam/index.html` | 700 |
| Licences | `/static/license/index.html` | 810 |

### 8.2 NAV2 - Sous-header (y â‰ˆ 75)

Position: y=50-90, background=#FFFFFF

**Web Cloud :**

| Label | URL | X |
|-------|-----|---|
| Accueil | `/static/web-cloud/index.html` | 40 |
| Domaines et DNS | `/static/web-cloud/domain/index.html` | 110 |
| HÃ©bergement | `/static/web-cloud/hosting/index.html` | 240 |
| Wordpress | `/static/web-cloud/wordpress/index.html` | 345 |
| Emails | `/static/web-cloud/emails/index.html` | 430 |
| VoIP | `/static/web-cloud/voip/index.html` | 500 |
| AccÃ¨s | `/static/web-cloud/access/index.html` | 550 |

### 8.3 NAV3 - Groupement (LEFT PANEL)

**Position :** Dans le LEFT PANEL (280px), **AU-DESSUS** de la barre de recherche.
**RÃ´le :** Filtre les NAV4 (tabs) affichÃ©s dans le RIGHT PANEL.
**Style :** Boutons toggle avec `text-anchor="middle"`.

| Section (NAV2) | NAV3 disponibles | Description |
|----------------|------------------|-------------|
| Hosting | [GÃ©nÃ©ral] [Sites] [Expert] | 3 groupements |
| Domain | [GÃ©nÃ©ral] [DNS] [Expert] | 3 groupements |
| Emails | [Comptes] [SÃ©curitÃ©] [AvancÃ©] | 3 groupements |
| VoIP Lines | [GÃ©nÃ©ral] [Appels] [Options] | 3 groupements |
| VoIP Groups | [Dashboard] [Services] [Admin] | 3 groupements |
| Wordpress | [GÃ©nÃ©ral] [Extensions] | 2 groupements |

**Comportement :**
- Clic sur NAV3 â†’ filtre les NAV4 affichÃ©s dans RIGHT PANEL
- La liste des services (sidebar) reste identique
- [GÃ©nÃ©ral] est le groupement par dÃ©faut au chargement
- Le premier NAV4 du groupement est auto-sÃ©lectionnÃ©

**JSON :**
```json
"nav3": {
  "active": "Expert",
  "position": "left_panel",
  "items": [
    {"label": "GÃ©nÃ©ral", "id": "general", "url": "/static/web-cloud/hosting/general/general.html"},
    {"label": "Sites", "id": "sites", "url": "/static/web-cloud/hosting/sites/multisite.html"},
    {"label": "Expert", "id": "expert", "url": "/static/web-cloud/hosting/expert/ftp.html"}
  ]
}
```

### 8.4 NAV4 - Fonction (RIGHT PANEL tabs)

**Position :** Dans le RIGHT PANEL, sous le titre du service.
**RÃ´le :** Tabs principaux de navigation par fonction.
**Style :** Boutons pill avec `text-anchor="middle"`.

**Hosting - NAV4 par groupement NAV3 :**

| NAV3 (Groupement) | NAV4 (Fonction) disponibles |
|-------------------|----------------------------|
| **GÃ©nÃ©ral** | general, offer, statistics, modules, logs, seo, indy |
| **Sites** | multisite, ssl |
| **Expert** | ftp, database, clouddb, cdn, boost, emails, envvars, runtimes, cron, tasks |

**Domain - NAV4 par groupement NAV3 :**

| NAV3 (Groupement) | NAV4 (Fonction) disponibles |
|-------------------|----------------------------|
| **GÃ©nÃ©ral** | general, contacts, alldom |
| **DNS** | zone, dnssec, dnsservers, dynhost, spf, dkim, dmarc, arc, caa, bimi |
| **Expert** | glue, tasks |

**Emails - NAV4 par groupement NAV3 :**

| NAV3 (Groupement) | NAV4 (Fonction) disponibles |
|-------------------|----------------------------|
| **Comptes** | accounts, redirections, responders, lists |
| **SÃ©curitÃ©** | dns-config, antispam, signature |
| **AvancÃ©** | resources, contacts, audit, devices, tasks |

**JSON :**
```json
"nav4": {
  "active": "FTP",
  "position": "right_panel",
  "group": "expert",
  "items": [
    {"label": "FTP", "url": "/static/web-cloud/hosting/expert/ftp.html"},
    {"label": "BDD", "url": "/static/web-cloud/hosting/expert/database.html"},
    {"label": "CDN", "url": "/static/web-cloud/hosting/expert/cdn.html"}
  ]
}
```

### 8.5 SUBTABS (sous NAV4, optionnel)

**Position :** Sous les tabs NAV4, dans le RIGHT PANEL.
**RÃ´le :** Sous-navigation au sein d'une fonction NAV4.
**Style :** Texte soulignÃ©, actif=primary+underline, inactif=muted.

**Exemples de SUBTABS :**

| NAV4 (Fonction) | SUBTABS disponibles |
|-----------------|---------------------|
| Database | [Statut] [Statistiques] [Dumps] |
| Logs | [Logs Web] [Logs Erreurs] |
| Extensions (WordPress) | [ThÃ¨mes] [Plugins] |
| Consommation (VoIP) | [Appels entrants] [Appels sortants] |

**JSON :**
```json
"subtabs": {
  "active": "Statut",
  "parent": "database",
  "items": [
    {"label": "Statut", "url": "/static/web-cloud/hosting/expert/database.html"},
    {"label": "Statistiques", "url": "/static/web-cloud/hosting/expert/database-stats.html"},
    {"label": "Dumps", "url": "/static/web-cloud/hosting/expert/database-dumps.html"}
  ]
}
```

---

## 9. Scripts Python

### 9.1 discover_json_v2.py

Phase 1 : Analyse SVG â†’ CrÃ©e JSON (alignÃ© nouvelle terminologie)

```bash
python3 /home/ubuntu/action-static/discover_json_v2.py web-cloud/hosting
python3 /home/ubuntu/action-static/discover_json_v2.py web-cloud/hosting/expert/ftp
```

### 9.2 generate_batch_html_v2.py

Phase 2 : SVG + JSON â†’ HTML

```bash
python3 /home/ubuntu/action-static/generate_batch_html_v2.py web-cloud/hosting
python3 /home/ubuntu/action-static/generate_batch_html_v2.py web-cloud/hosting/expert/ftp
```

---

## 10. Workflow complet

```
1. DISCOVER   â†’ python3 discover_json_v2.py <nav1>/<nav2>
               Analyse SVG, crÃ©e les fichiers JSON

2. VÃ‰RIFIER   â†’ Inspecter les JSON gÃ©nÃ©rÃ©s
               VÃ©rifier nav3, nav4, subtabs, actions
               Corriger manuellement si nÃ©cessaire

3. GENERATE   â†’ python3 generate_batch_html_v2.py <nav1>/<nav2>
               Combine SVG + JSON â†’ HTML avec liens

4. DÃ‰PLOYER   â†’ /home/ubuntu/aiapp/scripts/D3-deploy_static.sh
               Synchronise vers /var/www/aiapp/static/

5. TESTER     â†’ https://manager.di2amp.com/static/
```

---

## 11. Chemins importants

| Ã‰lÃ©ment | Chemin |
|---------|--------|
| SVG Source | `/home/ubuntu/target_manager_svg/` |
| JSON Config | `/home/ubuntu/target_manager_svg/` (Ã  cÃ´tÃ© du SVG) |
| HTML Dest | `/home/ubuntu/aiapp/static/` |
| Scripts | `/home/ubuntu/action-static/` |
| DÃ©ploiement | `/home/ubuntu/aiapp/scripts/D3-deploy_static.sh` |
| URL Prod | `https://manager.di2amp.com/static/` |

---

## 12. RÃ¨gles critiques

### 12.1 Toujours utiliser le workflow en 2 phases

```
SVG â†’ JSON (DISCOVER) â†’ HTML (GENERATE)
```

**Ne jamais sauter la phase JSON.** Le JSON permet :
- VÃ©rification manuelle avant gÃ©nÃ©ration
- Debugging plus facile
- RÃ©utilisation si le SVG change lÃ©gÃ¨rement

### 12.2 CoordonnÃ©es X/Y obligatoires

Toujours extraire les coordonnÃ©es pour :
- NAV1 (x, y=32)
- NAV2 (x, y=75)
- ACTIONS (x, y variables)

### 12.3 Respecter la hiÃ©rarchie NAV3/NAV4

- NAV3 = Groupement (LEFT PANEL) â†’ filtre les NAV4
- NAV4 = Fonction (RIGHT PANEL) â†’ tabs principaux
- Ne pas confondre avec l'ancienne terminologie

### 12.4 GÃ©rer les accents

Supporter les variantes avec/sans accents :
- `entrÃ©e` / `entree`
- `DÃ©sactiver` / `Desactiver`
- `GÃ©rer` / `Gerer`

---

## 13. Debugging

### 13.1 VÃ©rifier le JSON gÃ©nÃ©rÃ©

```bash
# VÃ©rifier structure NAV3/NAV4
cat /home/ubuntu/target_manager_svg/web-cloud/hosting/expert/target_.web-cloud.hosting.expert.ftp.json | jq '.nav3, .nav4'

# VÃ©rifier les actions
cat fichier.json | jq '.actions'
```

### 13.2 Compter les liens dans le HTML

```bash
grep -c '<a href=' /home/ubuntu/aiapp/static/web-cloud/hosting/expert/ftp.html
```

### 13.3 VÃ©rifier une action spÃ©cifique

```bash
grep -E 'Modifier|RafraÃ®chir|Ajouter' /home/ubuntu/aiapp/static/web-cloud/hosting/expert/ftp.html
```

---

## 14. RÃ©sumÃ© des commandes

| Commande | Phase | Description |
|----------|-------|-------------|
| `discover <nav1>/<nav2>` | 1 | Analyse SVG â†’ crÃ©e JSON |
| `discover <nav1>/<nav2>/<nav3>/<nav4>` | 1 | Analyse un SVG spÃ©cifique |
| `generate <nav1>/<nav2>` | 2 | SVG + JSON â†’ HTML |
| `generate <nav1>/<nav2>/<nav3>/<nav4>` | 2 | GÃ©nÃ¨re un HTML spÃ©cifique |
| `deploy` | - | DÃ©ploie vers prod |
| `status` | - | Ã‰tat actuel (SVG/JSON/HTML) |
| `diff` | - | Liste les fichiers obsolÃ¨tes |

---

## 15. VALIDATION POST-DISCOVER

### 15.1 Checklist de validation

AprÃ¨s chaque DISCOVER, vÃ©rifier :

```bash
# 1. VÃ©rifier que nav3 et nav4 sont prÃ©sents
for json in /home/ubuntu/target_manager_svg/web-cloud/<section>/**/*.json; do
  nav3=$(jq -r '.nav3.active // "MISSING"' "$json")
  nav4=$(jq -r '.nav4.active // "MISSING"' "$json")
  echo "$json: nav3=$nav3, nav4=$nav4"
done

# 2. VÃ©rifier que toutes les URLs pointent vers des pages existantes
for json in /home/ubuntu/target_manager_svg/web-cloud/<section>/**/*.json; do
  jq -r '.. | .url? // empty' "$json" | while read url; do
    target="${url#/static/}"
    if [ ! -f "/home/ubuntu/aiapp/static/$target" ] && [ "$url" != "#" ]; then
      echo "âŒ MANQUANT: $target (rÃ©fÃ©rencÃ© dans $json)"
    fi
  done
done
```

### 15.2 Erreurs courantes

| Erreur | Cause | Solution |
|--------|-------|----------|
| `nav3` manquant | Ancien format JSON | RÃ©gÃ©nÃ©rer avec nouveau discover |
| `nav4` au lieu de tabs | Ancien naming | Migrer JSON |
| URL vers `#` | Action sans page | OK si action API, sinon corriger |
| URL vers page inexistante | SVG manquant | CrÃ©er le SVG ou corriger l'URL |

---

## 16. PAGES REDONDANTES

### 16.1 Cas identifiÃ© : index.svg vs general.svg

Certaines sections ont deux pages avec le mÃªme contenu :
- `index.svg` : point d'entrÃ©e (landing page)
- `general.svg` : onglet "GÃ©nÃ©ral" (premiÃ¨re fonction NAV4)

### 16.2 RÃ¨gle de gestion

| Situation | Action |
|-----------|--------|
| `index.svg` = landing page vide | Rediriger vers `general/general.html` |
| `index.svg` = contenu diffÃ©rent | Garder les deux |
| `index.svg` = doublon exact | Supprimer `index.svg` |

---

## 17. MAPPINGS SPÃ‰CIFIQUES PAR SECTION

### 17.1 Pourquoi des mappings spÃ©cifiques ?

Chaque section a ses propres conventions d'actions et URLs cibles.
Le script `discover_json_v2.py` utilise un dictionnaire `section_mapping`.

### 17.2 Mapping Hosting (avec NAV3)

```python
"hosting": {
    # Actions groupement Expert
    "modifier utilisateur ftp": "/static/web-cloud/hosting/expert/ftp/modal-edit.html",
    "ajouter utilisateur ftp": "/static/web-cloud/hosting/expert/ftp/modal-create.html",
    "crÃ©er base de donnÃ©es": "/static/web-cloud/hosting/expert/database/modal-create.html",

    # Actions groupement Sites
    "ajouter un domaine": "/static/web-cloud/hosting/sites/multisite/modal-add.html",
    "commander ssl": "/static/web-cloud/hosting/sites/ssl/modal-order.html",

    # Actions groupement GÃ©nÃ©ral
    "modifier l'offre": "/static/web-cloud/hosting/general/offer/modal-change.html",
}
```

### 17.3 Mapping Domain (avec NAV3)

```python
"domain": {
    # Actions groupement GÃ©nÃ©ral
    "modifier â†’": "/static/web-cloud/domain/general/contacts.html",
    "â†» renouveler": "/static/web-cloud/domain/general/general/modal-renew.html",

    # Actions groupement DNS
    "+ ajouter une entrÃ©e": "/static/web-cloud/domain/dns/zone/modal-add.html",
    "modifier ttl": "/static/web-cloud/domain/dns/zone/modal-ttl.html",
    "activer dnssec": "/static/web-cloud/domain/dns/dnssec/modal-enable.html",
}
```

---

## 18. RÃ‰PERTOIRES DE SUIVI

### 18.1 Structure

```
/home/ubuntu/action-static/
â”œâ”€â”€ todo/                    # SVG Ã  crÃ©er (pages manquantes)
â”‚   â”œâ”€â”€ web-cloud.hosting.txt
â”‚   â”œâ”€â”€ web-cloud.domain.txt
â”‚   â””â”€â”€ web-cloud.voip.txt
â”œâ”€â”€ toremove/                # SVG Ã  supprimer (doublons)
â”‚   â””â”€â”€ duplicates.txt
â””â”€â”€ tmp/                     # Backups temporaires
```

### 18.2 Format fichiers todo (avec NAV3/NAV4)

```
=== SVG manquants pour web-cloud.hosting ===
Date: 2026-01-02

NAV3: expert
âŒ target_.web-cloud.hosting.expert.ftp.modal-create.svg
âŒ target_.web-cloud.hosting.expert.database.modal-create.svg

NAV3: sites
âŒ target_.web-cloud.hosting.sites.ssl.modal-order.svg

NAV3: general
âœ… Tous les SVG prÃ©sents
```

---

## 19. SUBTABS (anciennement NAV4 dans v1)

### 19.1 DÃ©finition

SUBTABS = sous-onglets Ã  l'intÃ©rieur d'un NAV4 (Fonction).
Ce ne sont **PAS** des NAV4, mais un niveau optionnel de sous-navigation.

### 19.2 DÃ©tection

- Position : sous les tabs NAV4 (y variable selon page)
- PAS de `text-anchor="middle"` (alignÃ© Ã  gauche gÃ©nÃ©ralement)
- Classe `text-primary` (actif) ou `text-muted` (inactif)

```xml
<g transform="translate(0, 70)">
  <text x="16" y="14" class="text-primary" font-size="12" font-weight="600">ThÃ¨mes</text>
  <text x="80" y="14" class="text-muted" font-size="12">Plugins</text>
</g>
```

### 19.3 JSON

```json
"subtabs": {
  "active": "ThÃ¨mes",
  "parent": "extensions",
  "items": [
    {"label": "ThÃ¨mes", "url": "/static/web-cloud/wordpress/extensions/themes.html"},
    {"label": "Plugins", "url": "/static/web-cloud/wordpress/extensions/plugins.html"}
  ]
}
```

### 19.4 Sections avec SUBTABS

| Section | NAV4 parent | SUBTABS |
|---------|-------------|---------|
| WordPress | Extensions | ThÃ¨mes, Plugins |
| Hosting | Database | Statut, Statistiques, Dumps |
| Hosting | Logs | Logs Web, Logs Erreurs |
| VoIP | Consommation | Appels entrants, Appels sortants |

---

## 20. LIENS EXTERNES

### 20.1 DÃ©finition

Liens qui pointent vers des ressources externes (pas de page HTML interne).

**RÃˆGLE :** Tous les liens externes pointent vers `/static/lien_externe.html`

### 20.2 Types de liens externes

| Label | Type | Destination |
|-------|------|-------------|
| `ğŸ“ Admin WP` | Externe | `/static/lien_externe.html` |
| `ğŸŒ Visiter` | Externe | `/static/lien_externe.html` |
| `Guides` | Externe | `/static/lien_externe.html` |
| `https://...` | URL affichÃ©e | `/static/lien_externe.html` |

### 20.3 JSON

```json
{
  "label": "ğŸ“ Admin WP",
  "type": "external",
  "x": 50,
  "y": 19,
  "url": "/static/lien_externe.html"
}
```

---

## 21. BOUTONS MODAUX

### 21.1 DÃ©finition

Boutons dans les modales (Annuler, CrÃ©er, Supprimer, etc.).

### 21.2 Types de boutons

| Label | Type | URL cible |
|-------|------|-----------|
| `Annuler` | cancel | Page parent |
| `Fermer` | close | Page parent |
| `CrÃ©er` | submit | `tasks.html` |
| `Enregistrer` | submit | Page parent |
| `Supprimer` | danger | `tasks.html` puis `index.html` |

### 21.3 DÃ©termination de l'URL parent (avec NAV3/NAV4)

```python
def get_parent_page(modal_filepath):
    """
    /web-cloud/hosting/expert/ftp/modal-create.html
    â†’ /web-cloud/hosting/expert/ftp.html

    /web-cloud/domain/dns/zone/modal-add.html
    â†’ /web-cloud/domain/dns/zone.html
    """
    # Remonter d'un niveau depuis le dossier modal
    parent_dir = os.path.dirname(modal_filepath)
    nav4 = os.path.basename(parent_dir)
    parent_parent = os.path.dirname(parent_dir)
    return f"{parent_parent}/{nav4}.html"
```

---

## 22. EMOJIS DANS LES LABELS

### 22.1 Emojis courants

| Emoji | Signification | Type d'action |
|-------|---------------|---------------|
| ğŸ“ | Admin/Ã‰dition | Lien externe |
| ğŸŒ | Web/Visiter | Lien externe |
| ğŸ—‘ | Supprimer/Vider | Action dangereuse |
| â†© | Restaurer | Action de backup |
| ğŸ”’ | SSL/SÃ©curitÃ© | Action modale |
| ğŸ”‘ | Mot de passe | Action modale |
| â¬† | Mise Ã  jour | Action API |
| ğŸ’¡ | Conseil | Informatif (non cliquable) |
| âš ï¸ | Avertissement | Informatif (non cliquable) |

---

## 23. CATÃ‰GORIES D'Ã‰LÃ‰MENTS NON CLIQUABLES

### 23.1 Classification

| CatÃ©gorie | Exemples | Action |
|-----------|----------|--------|
| **Externe** | Admin WP, Visiter, Guides | `href="/static/lien_externe.html"` |
| **API** | Vider cache, MAJ, RafraÃ®chir | `href="tasks.html"` |
| **Modal** | Restaurer, SSL, Supprimer | `href="modal-xxx.html"` |
| **Informatif** | URLs affichÃ©es, badges | Ne pas wrapper |

### 23.2 RÃ©solution

| Si catÃ©gorie | Alors |
|--------------|-------|
| Externe | `<a href="/static/lien_externe.html">` |
| API | `<a href="tasks.html">` |
| Modal | `<a href="modal-xxx.html">` |
| Informatif | Laisser tel quel |

---

## 24. FORMAT FICHIERS TODO (avec NAV3/NAV4)

### 24.1 Nouveau format de nommage

**Format :** `{nav1}.{nav2}.txt`

Exemples :
- `web-cloud.hosting.txt`
- `web-cloud.domain.txt`
- `web-cloud.voip.txt`

### 24.2 Contenu du fichier

```
=== SVG manquants pour web-cloud.hosting ===
Date: 2026-01-02

NAV3: general (Groupement GÃ©nÃ©ral)
â”œâ”€â”€ NAV4: general âœ…
â”œâ”€â”€ NAV4: offer âœ…
â”œâ”€â”€ NAV4: statistics âœ…
â”œâ”€â”€ NAV4: modules âœ…
â”‚   â””â”€â”€ modal-install âŒ MANQUANT
â”œâ”€â”€ NAV4: logs âœ…
â”œâ”€â”€ NAV4: seo âœ…
â””â”€â”€ NAV4: indy âœ…

NAV3: sites (Groupement Sites)
â”œâ”€â”€ NAV4: multisite âœ…
â”‚   â”œâ”€â”€ modal-add âŒ MANQUANT
â”‚   â””â”€â”€ modal-edit âœ…
â””â”€â”€ NAV4: ssl âœ…
    â””â”€â”€ modal-order âŒ MANQUANT

NAV3: expert (Groupement Expert)
â”œâ”€â”€ NAV4: ftp âœ…
â”‚   â”œâ”€â”€ modal-create âŒ MANQUANT
â”‚   â””â”€â”€ modal-delete âœ…
â”œâ”€â”€ NAV4: database âœ…
...

Total: 4 SVG manquants
```

---

## 25. MODES D'EXÃ‰CUTION

### 25.1 Deux environnements

| Mode | Interface | Actions disponibles |
|------|-----------|---------------------|
| **Web** | claude.ai/chat | Toutes |
| **Shell** | `claude` CLI | Toutes + filesystem direct |

### 25.2 Format homogÃ¨ne des commandes

```
<action> [<chemin>] [--options]
```

**Chemins (alignÃ©s NAV1/NAV2/NAV3/NAV4) :**
- `web-cloud` â†’ Tout l'univers
- `web-cloud/hosting` â†’ Toute la section
- `web-cloud/hosting/expert` â†’ Tout le groupement NAV3
- `web-cloud/hosting/expert/ftp` â†’ Une fonction NAV4 spÃ©cifique

**Exemples :**
- `discover web-cloud/hosting` â†’ Analyse tous les SVG hosting
- `generate web-cloud/hosting/expert/ftp` â†’ GÃ©nÃ¨re ftp.html uniquement
- `check web-cloud/domain/dns` â†’ VÃ©rifie le groupement DNS

---

## 26. ACTIONS STANDARD

### 26.1 Action `menu`

Affiche toutes les actions disponibles avec leur description.

**Output attendu :**
```
----------------*--------------------------*--------------------------------------------------------------------------------
                              STATIC SITE GENERATOR - SVG â†’ JSON â†’ HTML
                              (AlignÃ© terminologie NAV1/NAV2/NAV3/NAV4)
----------------*--------------------------*--------------------------------------------------------------------------------
action          | parametres               | explication
----------------*--------------------------*--------------------------------------------------------------------------------
                |                          |
    NAVIGATION  |                          |
----------------*--------------------------*--------------------------------------------------------------------------------
init            |                          | reload les prompts
menu            |                          | afficher ce menu
context         | <chemin>                 | changer le contexte (ex: context web-cloud/hosting)
----------------*--------------------------*--------------------------------------------------------------------------------
                |                          |
    ANALYSE     |                          |
----------------*--------------------------*--------------------------------------------------------------------------------
status          |                          | Ã©tat global: compter SVG/JSON/HTML
status          | NAV1/NAV2                | Ã©tat d'une section
status          | NAV1/NAV2/NAV3           | Ã©tat d'un groupement
diff            |                          | comparer dates SVG/JSON/HTML
check           | <chemin>                 | vÃ©rifier liens 404, nav3/nav4 manquants
analyze         | NAV1/NAV2/NAV3/NAV4      | analyse dÃ©taillÃ©e d'une page
todo            |                          | afficher tous les SVG manquants
----------------*--------------------------*--------------------------------------------------------------------------------
                |                          |
    GÃ‰NÃ‰RATION  |                          |
----------------*--------------------------*--------------------------------------------------------------------------------
discover        | <chemin>                 | Phase 1: SVG â†’ JSON
generate        | <chemin>                 | Phase 2: JSON â†’ HTML
fix             | <chemin>                 | corriger automatiquement
----------------*--------------------------*--------------------------------------------------------------------------------
                |                          |
    DÃ‰PLOIEMENT |                          |
----------------*--------------------------*--------------------------------------------------------------------------------
deploy          |                          | dÃ©ployer tout vers prod
----------------*--------------------------*--------------------------------------------------------------------------------

ğŸ“ Contexte actuel: {CONTEXT}

Exemples:
  discover web-cloud/hosting              â†’ analyse tous les SVG, crÃ©e les JSON
  generate web-cloud/hosting/expert/ftp   â†’ gÃ©nÃ¨re ftp.html uniquement
  check web-cloud/domain/dns              â†’ vÃ©rifie le groupement DNS
```

### 26.2 Actions par niveau

| Action | NAV1 | NAV2 | NAV3 | NAV4 | Description |
|--------|:----:|:----:|:----:|:----:|-------------|
| `status` | âœ… | âœ… | âœ… | âŒ | Ã‰tat global ou section |
| `diff` | âœ… | âœ… | âœ… | âŒ | Compare au niveau section |
| `discover` | âœ… | âœ… | âœ… | âœ… | Analyse SVG |
| `generate` | âœ… | âœ… | âœ… | âœ… | GÃ©nÃ¨re HTML |
| `check` | âœ… | âœ… | âœ… | âœ… | VÃ©rifie liens |
| `analyze` | âŒ | âŒ | âŒ | âœ… | Analyse une page |
| `fix` | âŒ | âœ… | âœ… | âœ… | Corrige problÃ¨mes |
| `todo` | âœ… | âœ… | âœ… | âŒ | SVG manquants |
| `deploy` | âœ… | âŒ | âŒ | âŒ | DÃ©ploie tout |

---

## 27. CONTEXTE DE NAVIGATION (alignÃ© NAV1/NAV2/NAV3/NAV4)

### 27.1 HiÃ©rarchie des chemins

```
<NAV1>/<NAV2>/<NAV3>/<NAV4>
```

| Niveau | Exemple | Description |
|--------|---------|-------------|
| NAV1 | `web-cloud` | Univers principal |
| NAV2 | `web-cloud/hosting` | Section (Produit) |
| NAV3 | `web-cloud/hosting/expert` | Groupement (LEFT PANEL) |
| NAV4 | `web-cloud/hosting/expert/ftp` | Fonction (RIGHT PANEL) |

### 27.2 Arborescence NAV complÃ¨te

```
NAV1: web-cloud/
â”‚
â”œâ”€â”€ NAV2: hosting/
â”‚   â”œâ”€â”€ NAV3: general/                    # Groupement [GÃ©nÃ©ral]
â”‚   â”‚   â”œâ”€â”€ NAV4: general                 # Tab Home
â”‚   â”‚   â”œâ”€â”€ NAV4: offer                   # Tab Offre
â”‚   â”‚   â”œâ”€â”€ NAV4: statistics              # Tab Statistiques
â”‚   â”‚   â”œâ”€â”€ NAV4: modules                 # Tab Modules
â”‚   â”‚   â”œâ”€â”€ NAV4: logs                    # Tab Logs
â”‚   â”‚   â”‚   â””â”€â”€ subtabs: web, errors
â”‚   â”‚   â”œâ”€â”€ NAV4: seo                     # Tab SEO
â”‚   â”‚   â””â”€â”€ NAV4: indy                    # Tab Indy
â”‚   â”‚
â”‚   â”œâ”€â”€ NAV3: sites/                      # Groupement [Sites]
â”‚   â”‚   â”œâ”€â”€ NAV4: multisite               # Tab Multisite
â”‚   â”‚   â””â”€â”€ NAV4: ssl                     # Tab SSL
â”‚   â”‚
â”‚   â””â”€â”€ NAV3: expert/                     # Groupement [Expert]
â”‚       â”œâ”€â”€ NAV4: ftp                     # Tab FTP-SSH
â”‚       â”œâ”€â”€ NAV4: database                # Tab BDD
â”‚       â”‚   â””â”€â”€ subtabs: status, stats, dumps
â”‚       â”œâ”€â”€ NAV4: clouddb                 # Tab BDD Cloud
â”‚       â”œâ”€â”€ NAV4: cdn                     # Tab CDN
â”‚       â”œâ”€â”€ NAV4: boost                   # Tab Boost
â”‚       â”œâ”€â”€ NAV4: emails                  # Tab Emails
â”‚       â”œâ”€â”€ NAV4: envvars                 # Tab Variables
â”‚       â”œâ”€â”€ NAV4: runtimes                # Tab Runtimes
â”‚       â”œâ”€â”€ NAV4: cron                    # Tab Cron
â”‚       â””â”€â”€ NAV4: tasks                   # Tab TÃ¢ches
â”‚
â”œâ”€â”€ NAV2: domain/
â”‚   â”œâ”€â”€ NAV3: general/
â”‚   â”‚   â””â”€â”€ NAV4: general, contacts, alldom
â”‚   â”œâ”€â”€ NAV3: dns/
â”‚   â”‚   â””â”€â”€ NAV4: zone, dnssec, dnsservers, dynhost, spf, dkim, dmarc, arc, caa, bimi
â”‚   â””â”€â”€ NAV3: expert/
â”‚       â””â”€â”€ NAV4: glue, tasks
â”‚
â”œâ”€â”€ NAV2: wordpress/
â”‚   â”œâ”€â”€ NAV3: general/
â”‚   â”‚   â””â”€â”€ NAV4: general, domains, performance, backups, tasks
â”‚   â””â”€â”€ NAV3: extensions/
â”‚       â””â”€â”€ NAV4: extensions
â”‚           â””â”€â”€ subtabs: themes, plugins
â”‚
â”œâ”€â”€ NAV2: emails/
â”‚   â”œâ”€â”€ NAV3: general/
â”‚   â”‚   â””â”€â”€ NAV4: accounts, redirections, responders, lists
â”‚   â”œâ”€â”€ NAV3: security/
â”‚   â”‚   â””â”€â”€ NAV4: dns-config, antispam, signature
â”‚   â””â”€â”€ NAV3: advanced/
â”‚       â””â”€â”€ NAV4: resources, contacts, audit, devices, tasks
â”‚
â””â”€â”€ NAV2: voip/
    â”œâ”€â”€ lines/
    â”‚   â”œâ”€â”€ NAV3: general/
    â”‚   â”‚   â””â”€â”€ NAV4: general, phone, consumption, options
    â”‚   â””â”€â”€ NAV3: calls/
    â”‚       â””â”€â”€ NAV4: calls, forward, voicemail
    â”œâ”€â”€ groups/
    â”‚   â””â”€â”€ NAV3: ...
    â”œâ”€â”€ numbers/
    â”‚   â””â”€â”€ NAV3: ...
    â””â”€â”€ fax/
        â””â”€â”€ NAV3: ...

NAV1: public-cloud/
â”œâ”€â”€ NAV2: instances, block-storage, object-storage, databases...

NAV1: bare-metal/
â”œâ”€â”€ NAV2: dedicated, vps, ip, vrack, nasha...

NAV1: private-cloud/
â”œâ”€â”€ NAV2: vmware, nutanix...

NAV1: network/
â”œâ”€â”€ NAV2: cdn, iplb, vrack...
```

---

## 28. RÃˆGLES DE LIENS OBLIGATOIRES

### 28.1 Principe fondamental

**TOUT Ã©lÃ©ment visuellement cliquable DOIT avoir un `<a href>`.**

### 28.2 Mapping des destinations par type

| Bouton | Destination |
|--------|-------------|
| **Ã— (close)** | Page parent NAV4 |
| **Annuler** | Page parent NAV4 |
| **Enregistrer** | Page parent NAV4 |
| **Supprimer** (danger) | `tasks.html` |
| **CrÃ©er** | `tasks.html` |
| **Actions API** | `tasks.html` |
| **Liens externes** | `/static/lien_externe.html` |

### 28.3 INTERDICTION DE `href="#"`

**RÃˆGLE ABSOLUE:** Le lien `href="#"` est **INTERDIT** car il ne navigue nulle part.

**Remplacement obligatoire :**

| Type d'Ã©lÃ©ment | Destination correcte |
|----------------|----------------------|
| IcÃ´ne ğŸŒ | `/static/lien_externe.html` |
| Liens domaine | `/static/lien_externe.html` |
| Actions API | `tasks.html` |
| Boutons modaux | Page parent ou `tasks.html` |

---

## 29. MIGRATION DEPUIS v1

### 29.1 Correspondance ancienne/nouvelle terminologie

| Ancien (v1) | Nouveau (v2) | Position |
|-------------|--------------|----------|
| `nav3` (tabs) | `nav4` | RIGHT PANEL |
| `nav4` (sub-tabs) | `subtabs` | RIGHT PANEL (sous nav4) |
| - | `nav3` (nouveau) | LEFT PANEL |

### 29.2 Script de migration JSON

```python
# migrate_json_v1_to_v2.py

def migrate(json_data):
    # 1. Renommer nav3 â†’ nav4
    if 'nav3' in json_data:
        json_data['nav4'] = json_data.pop('nav3')
        json_data['nav4']['position'] = 'right_panel'

    # 2. Renommer nav4 â†’ subtabs
    if 'nav4' in json_data and is_subtabs(json_data['nav4']):
        json_data['subtabs'] = json_data.pop('nav4')

    # 3. Ajouter nav3 groupement
    nav3_id = infer_nav3_from_filename(json_data['meta']['svg_source'])
    json_data['nav3'] = {
        'active': nav3_id.capitalize(),
        'position': 'left_panel',
        'items': get_nav3_items_for_section(json_data['meta']['nav2'])
    }

    # 4. Mettre Ã  jour meta
    json_data['meta']['nav3'] = nav3_id
    json_data['meta']['nav4'] = infer_nav4_from_filename(json_data['meta']['svg_source'])

    return json_data
```

### 29.3 Script de renommage fichiers SVG

```bash
# rename_svg_v1_to_v2.sh

# Exemple: target_.web-cloud.hosting.ftp.svg
# Devient: target_.web-cloud.hosting.expert.ftp.svg

# Mapping par dÃ©faut
declare -A NAV3_MAP=(
  ["ftp"]="expert" ["database"]="expert" ["cdn"]="expert" ["cron"]="expert"
  ["ssl"]="sites" ["multisite"]="sites"
  ["general"]="general" ["offer"]="general" ["statistics"]="general"
)
```

---

## 30. CHECKLIST FINALE

### Avant DISCOVER
- [ ] SVG source existe avec convention `target_.{nav1}.{nav2}.{nav3}.{nav4}.svg`
- [ ] TXT documentation existe

### AprÃ¨s DISCOVER
- [ ] JSON contient `nav3` (groupement, LEFT PANEL)
- [ ] JSON contient `nav4` (fonction, RIGHT PANEL)
- [ ] JSON contient `subtabs` si applicable
- [ ] JSON contient `actions` avec coordonnÃ©es X/Y
- [ ] Toutes les URLs pointent vers des pages existantes ou `tasks.html`
- [ ] Pas de `href="#"`

### AprÃ¨s GENERATE
- [ ] HTML gÃ©nÃ©rÃ© avec tous les liens
- [ ] NAV1, NAV2, NAV3, NAV4 cliquables
- [ ] Actions cliquables
- [ ] Test navigation fonctionnel

### Avant DEPLOY
- [ ] `check <section>` sans erreur
- [ ] Test local OK

---

================================================================================
FIN PROMPT STATIC v2 (AlignÃ© terminologie officielle NAV1-NAV4)
================================================================================
