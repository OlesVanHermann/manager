import{u as p,r as l,j as e}from"./index-svQWOpff.js";import{t as h}from"./telecom.service-Bd-lZ7D1.js";import"./api.service-CIh7kdHI.js";function C({serviceName:a}){const{t}=p("telecom/sms/index"),[i,o]=l.useState([]),[c,d]=l.useState(!0);return l.useEffect(()=>{(async()=>{try{d(!0);const x=await h.listSmsSenders(a),m=await Promise.all(x.map(r=>h.getSmsSender(a,r)));o(m)}finally{d(!1)}})()},[a]),c?e.jsx("div",{className:"tab-loading",children:e.jsx("div",{className:"skeleton-block"})}):e.jsxs("div",{className:"senders-tab",children:[e.jsxs("div",{className:"tab-header",children:[e.jsx("h3",{children:t("senders.title")}),e.jsx("span",{className:"records-count",children:i.length})]}),i.length===0?e.jsx("div",{className:"empty-state",children:e.jsx("p",{children:t("senders.empty")})}):e.jsxs("table",{className:"data-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:t("senders.sender")}),e.jsx("th",{children:t("senders.type")}),e.jsx("th",{children:t("senders.status")}),e.jsx("th",{children:t("senders.comment")})]})}),e.jsx("tbody",{children:i.map(s=>e.jsxs("tr",{children:[e.jsx("td",{className:"font-mono",children:s.sender}),e.jsx("td",{children:e.jsx("span",{className:"badge info",children:s.type})}),e.jsx("td",{children:e.jsx("span",{className:`badge ${s.status==="enable"?"success":s.status==="waitingValidation"?"warning":"inactive"}`,children:s.status})}),e.jsx("td",{children:s.comment||"-"})]},s.sender))})]})]})}function D({serviceName:a}){const{t}=p("telecom/sms/index"),[i,o]=l.useState([]),[c,d]=l.useState(!0);return l.useEffect(()=>{(async()=>{try{d(!0);const x=await h.listSmsOutgoing(a),m=await Promise.all(x.slice(0,50).map(r=>h.getSmsOutgoing(a,r)));m.sort((r,g)=>new Date(g.creationDatetime).getTime()-new Date(r.creationDatetime).getTime()),o(m)}finally{d(!1)}})()},[a]),c?e.jsx("div",{className:"tab-loading",children:e.jsx("div",{className:"skeleton-block"})}):e.jsxs("div",{className:"outgoing-tab",children:[e.jsxs("div",{className:"tab-header",children:[e.jsx("h3",{children:t("outgoing.title")}),e.jsx("span",{className:"records-count",children:i.length})]}),i.length===0?e.jsx("div",{className:"empty-state",children:e.jsx("p",{children:t("outgoing.empty")})}):e.jsxs("table",{className:"data-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:t("outgoing.date")}),e.jsx("th",{children:t("outgoing.sender")}),e.jsx("th",{children:t("outgoing.receiver")}),e.jsx("th",{children:t("outgoing.message")}),e.jsx("th",{children:t("outgoing.credits")})]})}),e.jsx("tbody",{children:i.map(s=>e.jsxs("tr",{children:[e.jsx("td",{children:new Date(s.creationDatetime).toLocaleString()}),e.jsx("td",{className:"font-mono",children:s.sender}),e.jsx("td",{className:"font-mono",children:s.receiver}),e.jsxs("td",{className:"message-cell",children:[s.message.slice(0,50),s.message.length>50?"...":""]}),e.jsx("td",{children:s.credits})]},s.id))})]})]})}function T({serviceName:a}){const{t}=p("telecom/sms/index"),[i,o]=l.useState([]),[c,d]=l.useState(!0);return l.useEffect(()=>{(async()=>{try{d(!0);const x=await h.listSmsIncoming(a),m=await Promise.all(x.slice(0,50).map(r=>h.getSmsIncoming(a,r)));m.sort((r,g)=>new Date(g.creationDatetime).getTime()-new Date(r.creationDatetime).getTime()),o(m)}finally{d(!1)}})()},[a]),c?e.jsx("div",{className:"tab-loading",children:e.jsx("div",{className:"skeleton-block"})}):e.jsxs("div",{className:"incoming-tab",children:[e.jsxs("div",{className:"tab-header",children:[e.jsx("h3",{children:t("incoming.title")}),e.jsx("span",{className:"records-count",children:i.length})]}),i.length===0?e.jsx("div",{className:"empty-state",children:e.jsx("p",{children:t("incoming.empty")})}):e.jsxs("table",{className:"data-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:t("incoming.date")}),e.jsx("th",{children:t("incoming.sender")}),e.jsx("th",{children:t("incoming.message")}),e.jsx("th",{children:t("incoming.credits")})]})}),e.jsx("tbody",{children:i.map(s=>e.jsxs("tr",{children:[e.jsx("td",{children:new Date(s.creationDatetime).toLocaleString()}),e.jsx("td",{className:"font-mono",children:s.sender}),e.jsxs("td",{className:"message-cell",children:[s.message.slice(0,80),s.message.length>80?"...":""]}),e.jsx("td",{children:s.credits})]},s.id))})]})]})}function E(){const{t:a}=p("telecom/sms/index"),{t}=p("common"),[i,o]=l.useState([]),[c,d]=l.useState(null),[s,x]=l.useState("outgoing"),[m,r]=l.useState(!0),[g,y]=l.useState(""),S=[{id:"outgoing",labelKey:"tabs.outgoing"},{id:"incoming",labelKey:"tabs.incoming"},{id:"senders",labelKey:"tabs.senders"}],v=l.useCallback(async()=>{try{r(!0);const n=await h.listSmsAccounts(),L=n.map(j=>({name:j,loading:!0}));o(L),n.length>0&&!c&&d(n[0]);for(const j of n)try{const N=await h.getSmsAccount(j);o(u=>u.map(f=>f.name===j?{...f,details:N,loading:!1}:f))}catch{o(N=>N.map(u=>u.name===j?{...u,loading:!1}:u))}}finally{r(!1)}},[c]);l.useEffect(()=>{v()},[]);const w=i.filter(n=>n.name.toLowerCase().includes(g.toLowerCase())),b=i.find(n=>n.name===c),k=()=>{if(!c)return null;switch(s){case"outgoing":return e.jsx(D,{serviceName:c});case"incoming":return e.jsx(T,{serviceName:c});case"senders":return e.jsx(C,{serviceName:c});default:return null}};return e.jsxs("div",{className:"sms-page",children:[e.jsxs("aside",{className:"sms-sidebar",children:[e.jsxs("div",{className:"sidebar-header",children:[e.jsx("h2",{children:a("title")}),e.jsx("span",{className:"count-badge",children:i.length})]}),e.jsx("div",{className:"sidebar-search",children:e.jsx("input",{type:"text",placeholder:a("searchPlaceholder"),value:g,onChange:n=>y(n.target.value)})}),e.jsx("div",{className:"sms-list",children:m&&i.length===0?e.jsx("div",{className:"loading-state",children:e.jsx("div",{className:"skeleton-item"})}):w.length===0?e.jsx("div",{className:"empty-state",children:t("empty.title")}):w.map(n=>e.jsxs("button",{className:`sms-item ${c===n.name?"active":""}`,onClick:()=>d(n.name),children:[e.jsx("div",{className:"sms-icon",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.625 12a.375.375 0 11-.75 0 .375.375 0 01.75 0zm0 0H8.25m4.125 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zm0 0H12m4.125 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zm0 0h-.375M21 12c0 4.556-4.03 8.25-9 8.25a9.764 9.764 0 01-2.555-.337A5.972 5.972 0 015.41 20.97a5.969 5.969 0 01-.474-.065 4.48 4.48 0 00.978-2.025c.09-.457-.133-.901-.467-1.226C3.93 16.178 3 14.189 3 12c0-4.556 4.03-8.25 9-8.25s9 3.694 9 8.25z"})})}),e.jsxs("div",{className:"sms-info",children:[e.jsx("span",{className:"sms-name",children:n.name}),n.details&&e.jsxs("span",{className:"sms-credits",children:[n.details.creditsLeft," credits"]})]})]},n.name))})]}),e.jsx("main",{className:"sms-main",children:c&&b?e.jsxs(e.Fragment,{children:[e.jsxs("header",{className:"page-header",children:[e.jsxs("div",{children:[e.jsx("h1",{children:c}),b.details&&e.jsxs("p",{className:"page-description",children:[b.details.description," | ",e.jsxs("span",{className:"credits-badge",children:[b.details.creditsLeft," credits"]})]})]}),e.jsxs("button",{className:"btn-refresh",onClick:v,children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99"})}),t("actions.refresh")]})]}),e.jsx("div",{className:"tabs-container",children:e.jsx("div",{className:"tabs-list",children:S.map(n=>e.jsx("button",{className:`tab-btn ${s===n.id?"active":""}`,onClick:()=>x(n.id),children:a(n.labelKey)},n.id))})}),e.jsx("div",{className:"tab-content",children:k()})]}):e.jsxs("div",{className:"no-selection",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.625 12a.375.375 0 11-.75 0 .375.375 0 01.75 0zm0 0H8.25m4.125 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zm0 0H12m4.125 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zm0 0h-.375M21 12c0 4.556-4.03 8.25-9 8.25a9.764 9.764 0 01-2.555-.337A5.972 5.972 0 015.41 20.97a5.969 5.969 0 01-.474-.065 4.48 4.48 0 00.978-2.025c.09-.457-.133-.901-.467-1.226C3.93 16.178 3 14.189 3 12c0-4.556 4.03-8.25 9-8.25s9 3.694 9 8.25z"})}),e.jsx("p",{children:a("selectAccount")})]})})]})}export{E as default};
//# sourceMappingURL=index-DQ1D8_Ws.js.map
