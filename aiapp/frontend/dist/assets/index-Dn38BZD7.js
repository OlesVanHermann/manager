import{u as b,j as s,r}from"./index-svQWOpff.js";import{v as m}from"./vps.service-B8AimrfM.js";import"./api.service-CIh7kdHI.js";function W({serviceName:n,details:e,serviceInfos:c,loading:x}){var i,l,d,o,p,g,v;const{t:a}=b("bare-metal/vps/index");if(x)return s.jsxs("div",{className:"tab-loading",children:[s.jsx("div",{className:"skeleton-block"}),s.jsx("div",{className:"skeleton-block"})]});const j=N=>({running:"success",stopped:"error",rebooting:"warning",installing:"warning",upgrading:"warning",maintenance:"warning",rescued:"info"})[N]||"inactive";return s.jsxs("div",{className:"general-tab",children:[s.jsxs("section",{className:"info-section",children:[s.jsx("h3",{children:a("general.title")}),s.jsxs("div",{className:"info-grid",children:[s.jsxs("div",{className:"info-item",children:[s.jsx("label",{children:a("general.name")}),s.jsx("span",{className:"font-mono",children:n})]}),e&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"info-item",children:[s.jsx("label",{children:a("general.displayName")}),s.jsx("span",{children:e.displayName||n})]}),s.jsxs("div",{className:"info-item",children:[s.jsx("label",{children:a("general.state")}),s.jsx("span",{className:`badge ${j(e.state)}`,children:e.state})]}),s.jsxs("div",{className:"info-item",children:[s.jsx("label",{children:a("general.model")}),s.jsxs("span",{children:[(i=e.model)==null?void 0:i.name," (",(l=e.model)==null?void 0:l.offer,")"]})]}),s.jsxs("div",{className:"info-item",children:[s.jsx("label",{children:a("general.vcore")}),s.jsxs("span",{children:[e.vcore||((d=e.model)==null?void 0:d.vcore)," vCPU"]})]}),s.jsxs("div",{className:"info-item",children:[s.jsx("label",{children:a("general.memory")}),s.jsxs("span",{children:[e.memoryLimit||((o=e.model)==null?void 0:o.memory)," MB"]})]}),s.jsxs("div",{className:"info-item",children:[s.jsx("label",{children:a("general.disk")}),s.jsxs("span",{children:[(p=e.model)==null?void 0:p.disk," GB"]})]}),s.jsxs("div",{className:"info-item",children:[s.jsx("label",{children:a("general.zone")}),s.jsx("span",{children:e.zone})]}),s.jsxs("div",{className:"info-item",children:[s.jsx("label",{children:a("general.cluster")}),s.jsx("span",{children:e.cluster})]}),s.jsxs("div",{className:"info-item",children:[s.jsx("label",{children:a("general.netboot")}),s.jsx("span",{className:`badge ${e.netbootMode==="rescue"?"warning":"success"}`,children:e.netbootMode})]}),s.jsxs("div",{className:"info-item",children:[s.jsx("label",{children:a("general.monitoring")}),s.jsx("span",{className:`badge ${e.slaMonitoring?"success":"inactive"}`,children:e.slaMonitoring?"âœ“":"âœ—"})]})]})]})]}),c&&s.jsxs("section",{className:"info-section",children:[s.jsx("h3",{children:a("service.title")}),s.jsxs("div",{className:"info-grid",children:[s.jsxs("div",{className:"info-item",children:[s.jsx("label",{children:a("service.creation")}),s.jsx("span",{children:new Date(c.creation).toLocaleDateString()})]}),s.jsxs("div",{className:"info-item",children:[s.jsx("label",{children:a("service.expiration")}),s.jsx("span",{className:G(c.expiration)?"expiring":"",children:new Date(c.expiration).toLocaleDateString()})]}),s.jsxs("div",{className:"info-item",children:[s.jsx("label",{children:a("service.autoRenew")}),s.jsx("span",{className:`badge ${(g=c.renew)!=null&&g.automatic?"success":"warning"}`,children:(v=c.renew)!=null&&v.automatic?"âœ“":"âœ—"})]}),s.jsxs("div",{className:"info-item",children:[s.jsx("label",{children:a("service.contacts")}),s.jsx("span",{children:c.contactAdmin})]})]})]})]})}function G(n){return(new Date(n).getTime()-Date.now())/(1e3*60*60*24)<30}function F({serviceName:n}){const{t:e}=b("bare-metal/vps/index"),[c,x]=r.useState([]),[a,j]=r.useState(!0);return r.useEffect(()=>{(async()=>{try{j(!0);const l=await m.listIps(n),d=await Promise.all(l.map(o=>m.getIp(n,o)));x(d)}finally{j(!1)}})()},[n]),a?s.jsx("div",{className:"tab-loading",children:s.jsx("div",{className:"skeleton-block"})}):s.jsxs("div",{className:"ips-tab",children:[s.jsxs("div",{className:"tab-header",children:[s.jsx("h3",{children:e("ips.title")}),s.jsx("span",{className:"records-count",children:c.length})]}),c.length===0?s.jsx("div",{className:"empty-state",children:s.jsx("p",{children:e("ips.empty")})}):s.jsxs("table",{className:"data-table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:e("ips.address")}),s.jsx("th",{children:e("ips.version")}),s.jsx("th",{children:e("ips.type")}),s.jsx("th",{children:e("ips.reverse")}),s.jsx("th",{children:e("ips.gateway")})]})}),s.jsx("tbody",{children:c.map(i=>s.jsxs("tr",{children:[s.jsx("td",{className:"font-mono",children:i.ipAddress}),s.jsx("td",{children:s.jsx("span",{className:`badge ${i.version==="v4"?"info":"success"}`,children:i.version})}),s.jsx("td",{children:s.jsx("span",{className:`badge ${i.type==="primary"?"success":"warning"}`,children:i.type})}),s.jsx("td",{className:"font-mono",children:i.reverse||"-"}),s.jsx("td",{className:"font-mono",children:i.gateway||"-"})]},i.ipAddress))})]})]})}function I({serviceName:n}){const{t:e}=b("bare-metal/vps/index"),[c,x]=r.useState([]),[a,j]=r.useState(!0);return r.useEffect(()=>{(async()=>{try{j(!0);const l=await m.listDisks(n),d=await Promise.all(l.map(o=>m.getDisk(n,o)));x(d)}finally{j(!1)}})()},[n]),a?s.jsx("div",{className:"tab-loading",children:s.jsx("div",{className:"skeleton-block"})}):s.jsxs("div",{className:"disks-tab",children:[s.jsx("div",{className:"tab-header",children:s.jsx("h3",{children:e("disks.title")})}),c.length===0?s.jsx("div",{className:"empty-state",children:s.jsx("p",{children:e("disks.empty")})}):s.jsx("div",{className:"disk-cards",children:c.map(i=>s.jsxs("div",{className:`disk-card ${i.type==="primary"?"primary":""}`,children:[s.jsxs("div",{className:"disk-header",children:[s.jsx("span",{className:`badge ${i.type==="primary"?"success":"info"}`,children:i.type}),s.jsx("span",{className:`badge ${i.state==="connected"?"success":"warning"}`,children:i.state})]}),s.jsxs("div",{className:"disk-size",children:[i.size," GB"]}),s.jsxs("div",{className:"disk-info",children:[s.jsxs("div",{children:[s.jsx("label",{children:e("disks.name")}),s.jsx("span",{children:i.name||"-"})]}),s.jsxs("div",{children:[s.jsx("label",{children:e("disks.filesystem")}),s.jsx("span",{children:i.fileSystem||"-"})]}),s.jsxs("div",{children:[s.jsx("label",{children:e("disks.readonly")}),s.jsx("span",{children:i.isReadOnly?"âœ“":"âœ—"})]})]})]},i.id))})]})}function Q({serviceName:n}){const{t:e}=b("bare-metal/vps/index"),{t:c}=b("common"),[x,a]=r.useState(null),[j,i]=r.useState(!0),[l,d]=r.useState(!1),o=async()=>{try{i(!0);const N=await m.getSnapshot(n);a(N)}finally{i(!1)}};r.useEffect(()=>{o()},[n]);const p=async()=>{if(confirm(e("snapshot.confirmCreate")))try{d(!0),await m.createSnapshot(n),await o()}finally{d(!1)}},g=async()=>{if(confirm(e("snapshot.confirmRestore")))try{d(!0),await m.restoreSnapshot(n)}finally{d(!1)}},v=async()=>{if(confirm(e("snapshot.confirmDelete")))try{d(!0),await m.deleteSnapshot(n),a(null)}finally{d(!1)}};return j?s.jsx("div",{className:"tab-loading",children:s.jsx("div",{className:"skeleton-block"})}):s.jsxs("div",{className:"snapshot-tab",children:[s.jsxs("div",{className:"tab-header",children:[s.jsx("h3",{children:e("snapshot.title")}),s.jsx("p",{className:"tab-description",children:e("snapshot.description")})]}),x?s.jsxs("div",{className:"snapshot-card",children:[s.jsxs("div",{className:"snapshot-status",children:[s.jsx("div",{className:"status-icon enabled",children:s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.827 6.175A2.31 2.31 0 015.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 00-1.134-.175 2.31 2.31 0 01-1.64-1.055l-.822-1.316a2.192 2.192 0 00-1.736-1.039 48.774 48.774 0 00-5.232 0 2.192 2.192 0 00-1.736 1.039l-.821 1.316z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 12.75a4.5 4.5 0 11-9 0 4.5 4.5 0 019 0zM18.75 10.5h.008v.008h-.008V10.5z"})]})}),s.jsxs("div",{className:"status-text",children:[s.jsx("span",{className:"status-label",children:e("snapshot.exists")}),s.jsx("span",{className:"status-date",children:new Date(x.creationDate).toLocaleString()})]})]}),x.description&&s.jsx("p",{className:"snapshot-desc",children:x.description}),s.jsxs("div",{className:"snapshot-actions",children:[s.jsx("button",{className:"btn-secondary",onClick:g,disabled:l,children:l?c("loading"):e("snapshot.restore")}),s.jsx("button",{className:"btn-danger",onClick:v,disabled:l,children:l?c("loading"):e("snapshot.delete")})]})]}):s.jsxs("div",{className:"snapshot-card empty",children:[s.jsxs("div",{className:"snapshot-status",children:[s.jsx("div",{className:"status-icon disabled",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.827 6.175A2.31 2.31 0 015.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 00-1.134-.175 2.31 2.31 0 01-1.64-1.055l-.822-1.316a2.192 2.192 0 00-1.736-1.039 48.774 48.774 0 00-5.232 0 2.192 2.192 0 00-1.736 1.039l-.821 1.316z"})})}),s.jsx("div",{className:"status-text",children:s.jsx("span",{className:"status-label",children:e("snapshot.noSnapshot")})})]}),s.jsx("button",{className:"btn-primary",onClick:p,disabled:l,children:l?c("loading"):e("snapshot.create")})]}),s.jsxs("div",{className:"info-box",children:[s.jsx("h4",{children:e("snapshot.info")}),s.jsx("p",{children:e("snapshot.infoDesc")})]})]})}function O({serviceName:n}){const{t:e}=b("bare-metal/vps/index"),[c,x]=r.useState([]),[a,j]=r.useState(!0);r.useEffect(()=>{(async()=>{try{j(!0);const d=await m.listTasks(n),o=await Promise.all(d.slice(0,50).map(p=>m.getTask(n,p)));o.sort((p,g)=>(g.startDate?new Date(g.startDate).getTime():0)-(p.startDate?new Date(p.startDate).getTime():0)),x(o)}finally{j(!1)}})()},[n]);const i=l=>{const o={todo:{class:"warning",icon:"â³"},doing:{class:"info",icon:"ðŸ”„"},done:{class:"success",icon:"âœ“"},error:{class:"error",icon:"âœ—"},cancelled:{class:"inactive",icon:"âŠ˜"},paused:{class:"warning",icon:"â¸"}}[l]||{class:"inactive",icon:"?"};return s.jsxs("span",{className:`badge ${o.class}`,children:[o.icon," ",l]})};return a?s.jsx("div",{className:"tab-loading",children:s.jsx("div",{className:"skeleton-block"})}):s.jsxs("div",{className:"tasks-tab",children:[s.jsx("div",{className:"tab-header",children:s.jsx("h3",{children:e("tasks.title")})}),c.length===0?s.jsx("div",{className:"empty-state",children:s.jsx("p",{children:e("tasks.empty")})}):s.jsxs("table",{className:"data-table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:e("tasks.type")}),s.jsx("th",{children:e("tasks.status")}),s.jsx("th",{children:e("tasks.progress")}),s.jsx("th",{children:e("tasks.started")}),s.jsx("th",{children:e("tasks.done")})]})}),s.jsx("tbody",{children:c.map(l=>s.jsxs("tr",{children:[s.jsx("td",{className:"font-mono",children:l.type}),s.jsx("td",{children:i(l.state)}),s.jsxs("td",{children:[l.progress,"%"]}),s.jsx("td",{children:l.startDate?new Date(l.startDate).toLocaleString():"-"}),s.jsx("td",{children:l.doneDate?new Date(l.doneDate).toLocaleString():"-"})]},l.id))})]})]})}function J(){var R,z,B,V,A,E;const{t:n}=b("bare-metal/vps/index"),{t:e}=b("common"),[c,x]=r.useState([]),[a,j]=r.useState(null),[i,l]=r.useState("general"),[d,o]=r.useState(!0),[p,g]=r.useState(""),[v,N]=r.useState(!1),M=[{id:"general",labelKey:"tabs.general"},{id:"ips",labelKey:"tabs.ips"},{id:"disks",labelKey:"tabs.disks"},{id:"snapshot",labelKey:"tabs.snapshot"},{id:"tasks",labelKey:"tabs.tasks"}],L=r.useCallback(async()=>{try{o(!0);const t=await m.listVps(),f=t.map(u=>({name:u,loading:!0}));x(f),t.length>0&&!a&&j(t[0]);for(let u=0;u<t.length;u+=5){const k=t.slice(u,u+5);await Promise.all(k.map(async S=>{try{const[C,w]=await Promise.all([m.getVps(S),m.getServiceInfos(S)]);x(K=>K.map(D=>D.name===S?{...D,details:C,serviceInfos:w,loading:!1}:D))}catch{x(C=>C.map(w=>w.name===S?{...w,loading:!1}:w))}}))}}finally{o(!1)}},[a]);r.useEffect(()=>{L()},[]);const T=c.filter(t=>t.name.toLowerCase().includes(p.toLowerCase())),h=c.find(t=>t.name===a),y=async t=>{var u;if(!a||!h)return;const f={reboot:n("actions.confirmReboot"),start:n("actions.confirmStart"),stop:n("actions.confirmStop"),rescue:n("actions.confirmRescue")};if(confirm(f[t]))try{N(!0),t==="reboot"?await m.reboot(a):t==="start"?await m.start(a):t==="stop"?await m.stop(a):t==="rescue"&&await m.setRescueMode(a,((u=h.details)==null?void 0:u.netbootMode)!=="rescue"),setTimeout(L,2e3)}finally{N(!1)}},P=()=>{if(!a||!h)return null;switch(i){case"general":return s.jsx(W,{serviceName:a,details:h.details,serviceInfos:h.serviceInfos,loading:h.loading});case"ips":return s.jsx(F,{serviceName:a});case"disks":return s.jsx(I,{serviceName:a});case"snapshot":return s.jsx(Q,{serviceName:a});case"tasks":return s.jsx(O,{serviceName:a});default:return null}},$=t=>({running:"running",stopped:"stopped",rebooting:"warning",rescued:"rescue"})[t||""]||"";return s.jsxs("div",{className:"vps-page",children:[s.jsxs("aside",{className:"vps-sidebar",children:[s.jsxs("div",{className:"sidebar-header",children:[s.jsx("h2",{children:n("title")}),s.jsx("span",{className:"count-badge",children:c.length})]}),s.jsx("div",{className:"sidebar-search",children:s.jsx("input",{type:"text",placeholder:n("searchPlaceholder"),value:p,onChange:t=>g(t.target.value)})}),s.jsx("div",{className:"vps-list",children:d&&c.length===0?s.jsx("div",{className:"loading-state",children:s.jsx("div",{className:"skeleton-item"})}):T.length===0?s.jsx("div",{className:"empty-state",children:e("empty.title")}):T.map(t=>{var f,u,k;return s.jsxs("button",{className:`vps-item ${a===t.name?"active":""}`,onClick:()=>j(t.name),children:[s.jsx("div",{className:`vps-status-dot ${$((f=t.details)==null?void 0:f.state)}`}),s.jsxs("div",{className:"vps-info",children:[s.jsx("span",{className:"vps-name",children:((u=t.details)==null?void 0:u.displayName)||t.name}),t.details&&s.jsxs("span",{className:"vps-meta",children:[(k=t.details.model)==null?void 0:k.name," | ",t.details.zone]})]})]},t.name)})})]}),s.jsx("main",{className:"vps-main",children:a&&h?s.jsxs(s.Fragment,{children:[s.jsxs("header",{className:"page-header",children:[s.jsxs("div",{children:[s.jsx("h1",{children:((R=h.details)==null?void 0:R.displayName)||a}),h.details&&s.jsxs("p",{className:"page-description",children:[(z=h.details.model)==null?void 0:z.name," | ",h.details.zone," | ",s.jsx("span",{className:`state-text ${$(h.details.state)}`,children:h.details.state})]})]}),s.jsxs("div",{className:"header-actions",children:[s.jsxs("button",{className:"btn-action",onClick:()=>y("reboot"),disabled:v||((B=h.details)==null?void 0:B.state)==="stopped",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99"})}),n("actions.reboot")]}),((V=h.details)==null?void 0:V.state)==="stopped"?s.jsxs("button",{className:"btn-action success",onClick:()=>y("start"),disabled:v,children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M4.5 5.653c0-1.426 1.529-2.33 2.779-1.643l11.54 6.348c1.295.712 1.295 2.573 0 3.285L7.28 19.991c-1.25.687-2.779-.217-2.779-1.643V5.653z",clipRule:"evenodd"})}),n("actions.start")]}):s.jsxs("button",{className:"btn-action danger",onClick:()=>y("stop"),disabled:v,children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M4.5 7.5a3 3 0 013-3h9a3 3 0 013 3v9a3 3 0 01-3 3h-9a3 3 0 01-3-3v-9z",clipRule:"evenodd"})}),n("actions.stop")]}),s.jsxs("button",{className:`btn-action ${((A=h.details)==null?void 0:A.netbootMode)==="rescue"?"warning":""}`,onClick:()=>y("rescue"),disabled:v,children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.712 4.33a9.027 9.027 0 011.652 1.306c.51.51.944 1.064 1.306 1.652M16.712 4.33l-3.448 4.138m3.448-4.138a9.014 9.014 0 00-9.424 0M19.67 7.288l-4.138 3.448m4.138-3.448a9.014 9.014 0 010 9.424m-4.138-5.976a3.736 3.736 0 00-.88-1.388 3.737 3.737 0 00-1.388-.88m2.268 2.268a3.765 3.765 0 010 2.528m-2.268-4.796a3.765 3.765 0 00-2.528 0m4.796 4.796c-.181.506-.475.982-.88 1.388a3.736 3.736 0 01-1.388.88m2.268-2.268l4.138 3.448m0 0a9.027 9.027 0 01-1.306 1.652c-.51.51-1.064.944-1.652 1.306m0 0l-3.448-4.138m3.448 4.138a9.014 9.014 0 01-9.424 0m5.976-4.138a3.765 3.765 0 01-2.528 0m0 0a3.736 3.736 0 01-1.388-.88 3.737 3.737 0 01-.88-1.388m2.268 2.268L7.288 19.67m0 0a9.024 9.024 0 01-1.652-1.306 9.027 9.027 0 01-1.306-1.652m0 0l4.138-3.448M4.33 16.712a9.014 9.014 0 010-9.424m4.138 5.976a3.765 3.765 0 010-2.528m0 0c.181-.506.475-.982.88-1.388a3.736 3.736 0 011.388-.88M7.288 4.33l3.448 4.138m0 0a3.765 3.765 0 012.528 0m-2.528 0L7.288 4.33"})}),((E=h.details)==null?void 0:E.netbootMode)==="rescue"?n("actions.exitRescue"):n("actions.rescue")]}),s.jsx("button",{className:"btn-refresh",onClick:L,children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99"})})})]})]}),s.jsx("div",{className:"tabs-container",children:s.jsx("div",{className:"tabs-list",children:M.map(t=>s.jsx("button",{className:`tab-btn ${i===t.id?"active":""}`,onClick:()=>l(t.id),children:n(t.labelKey)},t.id))})}),s.jsx("div",{className:"tab-content",children:P()})]}):s.jsxs("div",{className:"no-selection",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 14.25h13.5m-13.5 0a3 3 0 01-3-3m3 3a3 3 0 100 6h13.5a3 3 0 100-6m-16.5-3a3 3 0 013-3h13.5a3 3 0 013 3m-19.5 0a4.5 4.5 0 01.9-2.7L5.737 5.1a3.375 3.375 0 012.7-1.35h7.126c1.062 0 2.062.5 2.7 1.35l2.587 3.45a4.5 4.5 0 01.9 2.7"})}),s.jsx("p",{children:n("selectVps")})]})})]})}export{J as default};
//# sourceMappingURL=index-Dn38BZD7.js.map
