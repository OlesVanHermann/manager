{"version":3,"file":"telecom.service-Bd-lZ7D1.js","sources":["../../src/services/telecom.service.ts"],"sourcesContent":["// ============================================================\n// SERVICE TELECOM - VoIP, SMS, Fax OVHcloud\n// ============================================================\n\nimport { ovhApi } from './api.service';\n\n// ============================================================\n// TYPES - TELEPHONY (VoIP)\n// ============================================================\n\nexport interface TelephonyBillingAccount {\n  billingAccount: string;\n  description: string;\n  status: 'enabled' | 'expired';\n  trusted: boolean;\n  version: number;\n  securityDeposit: number;\n  currentOutplan: number;\n  allowedOutplan: number;\n}\n\nexport interface TelephonyLine {\n  serviceName: string;\n  serviceType: 'line' | 'trunk';\n  description: string;\n  simultaneousLines: number;\n  offers: string[];\n  getPublicOffer: { name: string; description: string };\n}\n\nexport interface TelephonyNumber {\n  serviceName: string;\n  serviceType: 'alias' | 'ddi';\n  description: string;\n  featureType: 'conference' | 'contactCenterSolution' | 'ddi' | 'easyHunting' | 'easyPabx' | 'empty' | 'fax' | 'miniPabx' | 'redirect' | 'svi' | 'voicemail';\n  country: string;\n}\n\nexport interface TelephonyVoicemail {\n  serviceName: string;\n  offers: string[];\n  description: string;\n}\n\nexport interface TelephonyFax {\n  serviceName: string;\n  description: string;\n  offers: string[];\n  notifications: { email: string; type: string }[];\n}\n\nexport interface TelephonyServiceInfos {\n  serviceId: number;\n  creation: string;\n  expiration: string;\n  contactAdmin: string;\n  contactTech: string;\n  contactBilling: string;\n  status: string;\n  renew: { automatic: boolean; deleteAtExpiration: boolean; period: number | null };\n}\n\n// ============================================================\n// TYPES - SMS\n// ============================================================\n\nexport interface SmsAccount {\n  name: string;\n  description: string;\n  creditsLeft: number;\n  status: 'disable' | 'enable';\n  smsResponse: { cgiUrl: string | null; responseType: string; text: string | null; trackingDefaultSmsSender: string | null };\n  creditThresholdForAutomaticRecredit: number;\n  automaticRecreditAmount: { quantity: number; amount: number } | null;\n  callBack: string | null;\n  templates: { customizedEmailMode: boolean; customizedSmsMode: boolean };\n}\n\nexport interface SmsServiceInfos {\n  serviceId: number;\n  creation: string;\n  expiration: string;\n  contactAdmin: string;\n  contactTech: string;\n  contactBilling: string;\n  status: string;\n  renew: { automatic: boolean; deleteAtExpiration: boolean; period: number | null };\n}\n\nexport interface SmsSender {\n  sender: string;\n  status: 'disable' | 'enable' | 'waitingValidation';\n  type: 'alpha' | 'numeric' | 'shortcode' | 'virtual';\n  comment: string | null;\n  validationMedia: string | null;\n}\n\nexport interface SmsOutgoing {\n  id: number;\n  creationDatetime: string;\n  credits: number;\n  deliveryReceipt: number;\n  differedDelivery: number;\n  message: string;\n  numberOfSms: number;\n  ptt: number;\n  receiver: string;\n  sender: string;\n  tag: string | null;\n  tariffCode: string;\n}\n\nexport interface SmsIncoming {\n  id: number;\n  creationDatetime: string;\n  credits: number;\n  message: string;\n  sender: string;\n  tag: string | null;\n}\n\nexport interface SmsJob {\n  id: number;\n  creationDatetime: string;\n  credits: number;\n  deliveryReceipt: number;\n  differedDelivery: number;\n  message: string;\n  messageLength: number;\n  name: string;\n  numberOfSms: number;\n  ptt: number;\n  receiver: string;\n  sender: string;\n}\n\n// ============================================================\n// TYPES - FAX\n// ============================================================\n\nexport interface FreefaxAccount {\n  number: string;\n  fromName: string;\n  fromEmail: string;\n  redirectionEmail: string[];\n  faxQuality: 'best' | 'high' | 'normal';\n  faxMaxCall: number;\n  faxTagLine: string;\n}\n\n// ============================================================\n// SERVICE\n// ============================================================\n\nclass TelecomService {\n  // ==================== TELEPHONY ====================\n  async listBillingAccounts(): Promise<string[]> {\n    return ovhApi.get<string[]>('/telephony');\n  }\n\n  async getBillingAccount(billingAccount: string): Promise<TelephonyBillingAccount> {\n    return ovhApi.get<TelephonyBillingAccount>(`/telephony/${billingAccount}`);\n  }\n\n  async getBillingAccountServiceInfos(billingAccount: string): Promise<TelephonyServiceInfos> {\n    return ovhApi.get<TelephonyServiceInfos>(`/telephony/${billingAccount}/serviceInfos`);\n  }\n\n  // Lines\n  async listLines(billingAccount: string): Promise<string[]> {\n    return ovhApi.get<string[]>(`/telephony/${billingAccount}/line`);\n  }\n\n  async getLine(billingAccount: string, serviceName: string): Promise<TelephonyLine> {\n    return ovhApi.get<TelephonyLine>(`/telephony/${billingAccount}/line/${serviceName}`);\n  }\n\n  // Numbers\n  async listNumbers(billingAccount: string): Promise<string[]> {\n    return ovhApi.get<string[]>(`/telephony/${billingAccount}/number`);\n  }\n\n  async getNumber(billingAccount: string, serviceName: string): Promise<TelephonyNumber> {\n    return ovhApi.get<TelephonyNumber>(`/telephony/${billingAccount}/number/${serviceName}`);\n  }\n\n  // Voicemail\n  async listVoicemails(billingAccount: string): Promise<string[]> {\n    return ovhApi.get<string[]>(`/telephony/${billingAccount}/voicemail`);\n  }\n\n  async getVoicemail(billingAccount: string, serviceName: string): Promise<TelephonyVoicemail> {\n    return ovhApi.get<TelephonyVoicemail>(`/telephony/${billingAccount}/voicemail/${serviceName}`);\n  }\n\n  // Fax (in telephony)\n  async listTelephonyFax(billingAccount: string): Promise<string[]> {\n    return ovhApi.get<string[]>(`/telephony/${billingAccount}/fax`);\n  }\n\n  async getTelephonyFax(billingAccount: string, serviceName: string): Promise<TelephonyFax> {\n    return ovhApi.get<TelephonyFax>(`/telephony/${billingAccount}/fax/${serviceName}`);\n  }\n\n  // ==================== SMS ====================\n  async listSmsAccounts(): Promise<string[]> {\n    return ovhApi.get<string[]>('/sms');\n  }\n\n  async getSmsAccount(serviceName: string): Promise<SmsAccount> {\n    return ovhApi.get<SmsAccount>(`/sms/${serviceName}`);\n  }\n\n  async getSmsServiceInfos(serviceName: string): Promise<SmsServiceInfos> {\n    return ovhApi.get<SmsServiceInfos>(`/sms/${serviceName}/serviceInfos`);\n  }\n\n  // Senders\n  async listSmsSenders(serviceName: string): Promise<string[]> {\n    return ovhApi.get<string[]>(`/sms/${serviceName}/senders`);\n  }\n\n  async getSmsSender(serviceName: string, sender: string): Promise<SmsSender> {\n    return ovhApi.get<SmsSender>(`/sms/${serviceName}/senders/${sender}`);\n  }\n\n  // Outgoing\n  async listSmsOutgoing(serviceName: string): Promise<number[]> {\n    return ovhApi.get<number[]>(`/sms/${serviceName}/outgoing`);\n  }\n\n  async getSmsOutgoing(serviceName: string, id: number): Promise<SmsOutgoing> {\n    return ovhApi.get<SmsOutgoing>(`/sms/${serviceName}/outgoing/${id}`);\n  }\n\n  // Incoming\n  async listSmsIncoming(serviceName: string): Promise<number[]> {\n    return ovhApi.get<number[]>(`/sms/${serviceName}/incoming`);\n  }\n\n  async getSmsIncoming(serviceName: string, id: number): Promise<SmsIncoming> {\n    return ovhApi.get<SmsIncoming>(`/sms/${serviceName}/incoming/${id}`);\n  }\n\n  // Jobs\n  async listSmsJobs(serviceName: string): Promise<number[]> {\n    return ovhApi.get<number[]>(`/sms/${serviceName}/jobs`);\n  }\n\n  async getSmsJob(serviceName: string, id: number): Promise<SmsJob> {\n    return ovhApi.get<SmsJob>(`/sms/${serviceName}/jobs/${id}`);\n  }\n\n  // Send SMS\n  async sendSms(serviceName: string, message: string, receivers: string[], sender: string): Promise<{ ids: number[] }> {\n    return ovhApi.post(`/sms/${serviceName}/jobs`, { message, receivers, sender, noStopClause: false });\n  }\n\n  // ==================== FREEFAX ====================\n  async listFreefax(): Promise<string[]> {\n    return ovhApi.get<string[]>('/freefax');\n  }\n\n  async getFreefax(serviceName: string): Promise<FreefaxAccount> {\n    return ovhApi.get<FreefaxAccount>(`/freefax/${serviceName}`);\n  }\n}\n\nexport const telecomService = new TelecomService();\n"],"names":["TelecomService","ovhApi","billingAccount","serviceName","sender","id","message","receivers","telecomService"],"mappings":"8CA0JA,MAAMA,CAAe,CAEnB,MAAM,qBAAyC,CAC7C,OAAOC,EAAO,IAAc,YAAY,CAC1C,CAEA,MAAM,kBAAkBC,EAA0D,CAChF,OAAOD,EAAO,IAA6B,cAAcC,CAAc,EAAE,CAC3E,CAEA,MAAM,8BAA8BA,EAAwD,CAC1F,OAAOD,EAAO,IAA2B,cAAcC,CAAc,eAAe,CACtF,CAGA,MAAM,UAAUA,EAA2C,CACzD,OAAOD,EAAO,IAAc,cAAcC,CAAc,OAAO,CACjE,CAEA,MAAM,QAAQA,EAAwBC,EAA6C,CACjF,OAAOF,EAAO,IAAmB,cAAcC,CAAc,SAASC,CAAW,EAAE,CACrF,CAGA,MAAM,YAAYD,EAA2C,CAC3D,OAAOD,EAAO,IAAc,cAAcC,CAAc,SAAS,CACnE,CAEA,MAAM,UAAUA,EAAwBC,EAA+C,CACrF,OAAOF,EAAO,IAAqB,cAAcC,CAAc,WAAWC,CAAW,EAAE,CACzF,CAGA,MAAM,eAAeD,EAA2C,CAC9D,OAAOD,EAAO,IAAc,cAAcC,CAAc,YAAY,CACtE,CAEA,MAAM,aAAaA,EAAwBC,EAAkD,CAC3F,OAAOF,EAAO,IAAwB,cAAcC,CAAc,cAAcC,CAAW,EAAE,CAC/F,CAGA,MAAM,iBAAiBD,EAA2C,CAChE,OAAOD,EAAO,IAAc,cAAcC,CAAc,MAAM,CAChE,CAEA,MAAM,gBAAgBA,EAAwBC,EAA4C,CACxF,OAAOF,EAAO,IAAkB,cAAcC,CAAc,QAAQC,CAAW,EAAE,CACnF,CAGA,MAAM,iBAAqC,CACzC,OAAOF,EAAO,IAAc,MAAM,CACpC,CAEA,MAAM,cAAcE,EAA0C,CAC5D,OAAOF,EAAO,IAAgB,QAAQE,CAAW,EAAE,CACrD,CAEA,MAAM,mBAAmBA,EAA+C,CACtE,OAAOF,EAAO,IAAqB,QAAQE,CAAW,eAAe,CACvE,CAGA,MAAM,eAAeA,EAAwC,CAC3D,OAAOF,EAAO,IAAc,QAAQE,CAAW,UAAU,CAC3D,CAEA,MAAM,aAAaA,EAAqBC,EAAoC,CAC1E,OAAOH,EAAO,IAAe,QAAQE,CAAW,YAAYC,CAAM,EAAE,CACtE,CAGA,MAAM,gBAAgBD,EAAwC,CAC5D,OAAOF,EAAO,IAAc,QAAQE,CAAW,WAAW,CAC5D,CAEA,MAAM,eAAeA,EAAqBE,EAAkC,CAC1E,OAAOJ,EAAO,IAAiB,QAAQE,CAAW,aAAaE,CAAE,EAAE,CACrE,CAGA,MAAM,gBAAgBF,EAAwC,CAC5D,OAAOF,EAAO,IAAc,QAAQE,CAAW,WAAW,CAC5D,CAEA,MAAM,eAAeA,EAAqBE,EAAkC,CAC1E,OAAOJ,EAAO,IAAiB,QAAQE,CAAW,aAAaE,CAAE,EAAE,CACrE,CAGA,MAAM,YAAYF,EAAwC,CACxD,OAAOF,EAAO,IAAc,QAAQE,CAAW,OAAO,CACxD,CAEA,MAAM,UAAUA,EAAqBE,EAA6B,CAChE,OAAOJ,EAAO,IAAY,QAAQE,CAAW,SAASE,CAAE,EAAE,CAC5D,CAGA,MAAM,QAAQF,EAAqBG,EAAiBC,EAAqBH,EAA4C,CACnH,OAAOH,EAAO,KAAK,QAAQE,CAAW,QAAS,CAAE,QAAAG,EAAS,UAAAC,EAAW,OAAAH,EAAQ,aAAc,EAAA,CAAO,CACpG,CAGA,MAAM,aAAiC,CACrC,OAAOH,EAAO,IAAc,UAAU,CACxC,CAEA,MAAM,WAAWE,EAA8C,CAC7D,OAAOF,EAAO,IAAoB,YAAYE,CAAW,EAAE,CAC7D,CACF,CAEO,MAAMK,EAAiB,IAAIR"}