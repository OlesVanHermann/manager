import{u as v,j as e,r as d}from"./index-svQWOpff.js";import{d as p}from"./dedicated.service-B72KBYll.js";import"./api.service-CIh7kdHI.js";function R({serviceName:c,details:s,serviceInfos:o,hardware:n,loading:r}){var l,m;const{t:a}=v("bare-metal/dedicated/index");if(r)return e.jsxs("div",{className:"tab-loading",children:[e.jsx("div",{className:"skeleton-block"}),e.jsx("div",{className:"skeleton-block"})]});const h=i=>i?`${i.value} ${i.unit}`:"-";return e.jsxs("div",{className:"general-tab",children:[e.jsxs("section",{className:"info-section",children:[e.jsx("h3",{children:a("general.title")}),e.jsxs("div",{className:"info-grid",children:[e.jsxs("div",{className:"info-item",children:[e.jsx("label",{children:a("general.name")}),e.jsx("span",{className:"font-mono",children:c})]}),s&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"info-item",children:[e.jsx("label",{children:a("general.ip")}),e.jsx("span",{className:"font-mono",children:s.ip})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("label",{children:a("general.reverse")}),e.jsx("span",{className:"font-mono",children:s.reverse})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("label",{children:a("general.datacenter")}),e.jsx("span",{children:s.datacenter})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("label",{children:a("general.rack")}),e.jsx("span",{children:s.rack})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("label",{children:a("general.commercialRange")}),e.jsx("span",{children:s.commercialRange})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("label",{children:a("general.os")}),e.jsx("span",{children:s.os})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("label",{children:a("general.state")}),e.jsx("span",{className:`badge ${s.state==="ok"?"success":"error"}`,children:s.state})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("label",{children:a("general.power")}),e.jsx("span",{className:`badge ${s.powerState==="poweron"?"success":"error"}`,children:s.powerState})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("label",{children:a("general.support")}),e.jsx("span",{className:"badge info",children:s.supportLevel})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("label",{children:a("general.monitoring")}),e.jsx("span",{className:`badge ${s.monitoring?"success":"inactive"}`,children:s.monitoring?"âœ“":"âœ—"})]})]})]})]}),n&&e.jsxs("section",{className:"info-section",children:[e.jsx("h3",{children:a("hardware.title")}),e.jsxs("div",{className:"info-grid",children:[e.jsxs("div",{className:"info-item",children:[e.jsx("label",{children:a("hardware.cpu")}),e.jsx("span",{children:n.processorName})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("label",{children:a("hardware.cores")}),e.jsxs("span",{children:[n.numberOfProcessors," x ",n.coresPerProcessor," cores (",n.threadsPerProcessor," threads)"]})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("label",{children:a("hardware.arch")}),e.jsx("span",{children:n.processorArchitecture})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("label",{children:a("hardware.memory")}),e.jsx("span",{children:h(n.memorySize)})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("label",{children:a("hardware.motherboard")}),e.jsx("span",{children:n.motherboard})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("label",{children:a("hardware.formFactor")}),e.jsx("span",{children:n.formFactor})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("label",{children:a("hardware.bootMode")}),e.jsx("span",{children:n.bootMode})]})]}),n.diskGroups&&n.diskGroups.length>0&&e.jsxs("div",{className:"disk-groups",children:[e.jsx("h4",{children:a("hardware.disks")}),n.diskGroups.map((i,x)=>e.jsxs("div",{className:"disk-group",children:[e.jsxs("span",{className:"disk-count",children:[i.numberOfDisks,"x"]}),e.jsxs("span",{className:"disk-detail",children:[i.diskSize.value," ",i.diskSize.unit," ",i.diskType]}),i.raidController&&e.jsxs("span",{className:"disk-raid",children:["RAID: ",i.raidController]})]},x))]})]}),o&&e.jsxs("section",{className:"info-section",children:[e.jsx("h3",{children:a("service.title")}),e.jsxs("div",{className:"info-grid",children:[e.jsxs("div",{className:"info-item",children:[e.jsx("label",{children:a("service.creation")}),e.jsx("span",{children:new Date(o.creation).toLocaleDateString()})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("label",{children:a("service.expiration")}),e.jsx("span",{children:new Date(o.expiration).toLocaleDateString()})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("label",{children:a("service.autoRenew")}),e.jsx("span",{className:`badge ${(l=o.renew)!=null&&l.automatic?"success":"warning"}`,children:(m=o.renew)!=null&&m.automatic?"âœ“":"âœ—"})]})]})]})]})}function E({serviceName:c}){const{t:s}=v("bare-metal/dedicated/index"),[o,n]=d.useState([]),[r,a]=d.useState([]),[h,l]=d.useState(!0);return d.useEffect(()=>{(async()=>{try{l(!0);const[i,x]=await Promise.all([p.listIps(c),p.listVracks(c)]);if(n(i),x.length>0){const u=await Promise.all(x.map(b=>p.getVrack(c,b)));a(u)}}finally{l(!1)}})()},[c]),h?e.jsx("div",{className:"tab-loading",children:e.jsx("div",{className:"skeleton-block"})}):e.jsxs("div",{className:"network-tab",children:[e.jsxs("section",{className:"info-section",children:[e.jsx("h3",{children:s("network.ips")}),o.length===0?e.jsx("p",{children:s("network.noIps")}):e.jsx("div",{className:"ip-list",children:o.map(m=>e.jsx("span",{className:"ip-badge font-mono",children:m},m))})]}),e.jsxs("section",{className:"info-section",children:[e.jsx("h3",{children:s("network.vrack")}),r.length===0?e.jsx("p",{children:s("network.noVrack")}):e.jsxs("table",{className:"data-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:s("network.vrackName")}),e.jsx("th",{children:s("network.vrackState")})]})}),e.jsx("tbody",{children:r.map(m=>e.jsxs("tr",{children:[e.jsx("td",{className:"font-mono",children:m.vrack}),e.jsx("td",{children:e.jsx("span",{className:`badge ${m.state==="ok"?"success":"warning"}`,children:m.state})})]},m.vrack))})]})]})]})}function K({serviceName:c}){var b,f,L,g,k,j;const{t:s}=v("bare-metal/dedicated/index"),{t:o}=v("common"),[n,r]=d.useState(null),[a,h]=d.useState(!0),[l,m]=d.useState(!1),[i,x]=d.useState(null);d.useEffect(()=>{(async()=>{try{h(!0);const w=await p.getIpmi(c);r(w)}catch{r(null)}finally{h(!1)}})()},[c]);const u=async D=>{try{m(!0);const w=await p.startIpmiSession(c,D);x(w.value)}finally{m(!1)}};return a?e.jsx("div",{className:"tab-loading",children:e.jsx("div",{className:"skeleton-block"})}):e.jsxs("div",{className:"ipmi-tab",children:[e.jsxs("div",{className:"tab-header",children:[e.jsx("h3",{children:s("ipmi.title")}),e.jsx("p",{className:"tab-description",children:s("ipmi.description")})]}),!n||!n.activated?e.jsx("div",{className:"empty-state",children:e.jsx("p",{children:s("ipmi.notAvailable")})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"ipmi-features",children:[e.jsxs("div",{className:"feature-item",children:[e.jsx("label",{children:"KVM over IP"}),e.jsx("span",{className:`badge ${(b=n.supportedFeatures)!=null&&b.kvmoverip?"success":"inactive"}`,children:(f=n.supportedFeatures)!=null&&f.kvmoverip?s("ipmi.supported"):s("ipmi.notSupported")})]}),e.jsxs("div",{className:"feature-item",children:[e.jsx("label",{children:"Serial over LAN"}),e.jsx("span",{className:`badge ${(L=n.supportedFeatures)!=null&&L.serialOverLanUrl?"success":"inactive"}`,children:(g=n.supportedFeatures)!=null&&g.serialOverLanUrl?s("ipmi.supported"):s("ipmi.notSupported")})]})]}),e.jsxs("div",{className:"ipmi-actions",children:[((k=n.supportedFeatures)==null?void 0:k.kvmoverip)&&e.jsx("button",{className:"btn-primary",onClick:()=>u("kvmipHtml5URL"),disabled:l,children:l?o("loading"):s("ipmi.launchKvm")}),((j=n.supportedFeatures)==null?void 0:j.serialOverLanUrl)&&e.jsx("button",{className:"btn-secondary",onClick:()=>u("serialOverLanURL"),disabled:l,children:l?o("loading"):s("ipmi.launchSol")})]}),i&&e.jsxs("div",{className:"session-url",children:[e.jsx("label",{children:s("ipmi.sessionUrl")}),e.jsx("a",{href:i,target:"_blank",rel:"noopener noreferrer",children:s("ipmi.openSession")})]})]}),e.jsxs("div",{className:"info-box",children:[e.jsx("h4",{children:s("ipmi.whatIs")}),e.jsx("p",{children:s("ipmi.explanation")})]})]})}function U({serviceName:c}){const{t:s}=v("bare-metal/dedicated/index"),[o,n]=d.useState([]),[r,a]=d.useState(!0);return d.useEffect(()=>{(async()=>{try{a(!0);const l=await p.listInterventions(c),m=await Promise.all(l.slice(0,50).map(i=>p.getIntervention(c,i)));m.sort((i,x)=>new Date(x.date).getTime()-new Date(i.date).getTime()),n(m)}finally{a(!1)}})()},[c]),r?e.jsx("div",{className:"tab-loading",children:e.jsx("div",{className:"skeleton-block"})}):e.jsxs("div",{className:"interventions-tab",children:[e.jsxs("div",{className:"tab-header",children:[e.jsx("h3",{children:s("interventions.title")}),e.jsx("p",{className:"tab-description",children:s("interventions.description")})]}),o.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("p",{children:s("interventions.empty")})]}):e.jsxs("table",{className:"data-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:s("interventions.date")}),e.jsx("th",{children:s("interventions.type")})]})}),e.jsx("tbody",{children:o.map(h=>e.jsxs("tr",{children:[e.jsx("td",{children:new Date(h.date).toLocaleString()}),e.jsx("td",{children:h.type})]},h.interventionId))})]})]})}function A({serviceName:c}){const{t:s}=v("bare-metal/dedicated/index"),[o,n]=d.useState([]),[r,a]=d.useState(!0);d.useEffect(()=>{(async()=>{try{a(!0);const m=await p.listTasks(c),i=await Promise.all(m.slice(0,50).map(x=>p.getTask(c,x)));i.sort((x,u)=>new Date(u.startDate).getTime()-new Date(x.startDate).getTime()),n(i)}finally{a(!1)}})()},[c]);const h=l=>{const i={todo:{class:"warning",icon:"â³"},init:{class:"info",icon:"ðŸ”„"},doing:{class:"info",icon:"ðŸ”„"},done:{class:"success",icon:"âœ“"},customerError:{class:"error",icon:"âœ—"},ovhError:{class:"error",icon:"âœ—"},cancelled:{class:"inactive",icon:"âŠ˜"}}[l]||{class:"inactive",icon:"?"};return e.jsxs("span",{className:`badge ${i.class}`,children:[i.icon," ",l]})};return r?e.jsx("div",{className:"tab-loading",children:e.jsx("div",{className:"skeleton-block"})}):e.jsxs("div",{className:"tasks-tab",children:[e.jsx("div",{className:"tab-header",children:e.jsx("h3",{children:s("tasks.title")})}),o.length===0?e.jsx("div",{className:"empty-state",children:e.jsx("p",{children:s("tasks.empty")})}):e.jsxs("table",{className:"data-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:s("tasks.function")}),e.jsx("th",{children:s("tasks.status")}),e.jsx("th",{children:s("tasks.started")}),e.jsx("th",{children:s("tasks.done")}),e.jsx("th",{children:s("tasks.comment")})]})}),e.jsx("tbody",{children:o.map(l=>e.jsxs("tr",{children:[e.jsx("td",{className:"font-mono",children:l.function}),e.jsx("td",{children:h(l.status)}),e.jsx("td",{children:new Date(l.startDate).toLocaleString()}),e.jsx("td",{children:l.doneDate?new Date(l.doneDate).toLocaleString():"-"}),e.jsx("td",{children:l.comment||"-"})]},l.taskId))})]})]})}function V(){const{t:c}=v("bare-metal/dedicated/index"),{t:s}=v("common"),[o,n]=d.useState([]),[r,a]=d.useState(null),[h,l]=d.useState("general"),[m,i]=d.useState(!0),[x,u]=d.useState(""),[b,f]=d.useState(!1),L=[{id:"general",labelKey:"tabs.general"},{id:"network",labelKey:"tabs.network"},{id:"ipmi",labelKey:"tabs.ipmi"},{id:"interventions",labelKey:"tabs.interventions"},{id:"tasks",labelKey:"tabs.tasks"}],g=d.useCallback(async()=>{try{i(!0);const t=await p.listServers(),C=t.map(N=>({name:N,loading:!0}));n(C),t.length>0&&!r&&a(t[0]);for(let N=0;N<t.length;N+=3){const $=t.slice(N,N+3);await Promise.all($.map(async S=>{try{const[T,y,M]=await Promise.all([p.getServer(S),p.getServiceInfos(S),p.getHardware(S).catch(()=>{})]);n(F=>F.map(I=>I.name===S?{...I,details:T,serviceInfos:y,hardware:M,loading:!1}:I))}catch{n(T=>T.map(y=>y.name===S?{...y,loading:!1}:y))}}))}}finally{i(!1)}},[r]);d.useEffect(()=>{g()},[]);const k=o.filter(t=>t.name.toLowerCase().includes(x.toLowerCase())),j=o.find(t=>t.name===r),D=async()=>{if(!(!r||!confirm(c("actions.confirmReboot"))))try{f(!0),await p.reboot(r),setTimeout(g,2e3)}finally{f(!1)}},w=()=>{if(!r||!j)return null;switch(h){case"general":return e.jsx(R,{serviceName:r,details:j.details,serviceInfos:j.serviceInfos,hardware:j.hardware,loading:j.loading});case"network":return e.jsx(E,{serviceName:r});case"ipmi":return e.jsx(K,{serviceName:r});case"interventions":return e.jsx(U,{serviceName:r});case"tasks":return e.jsx(A,{serviceName:r});default:return null}},P=t=>t==="poweron"?"running":"stopped";return e.jsxs("div",{className:"dedicated-page",children:[e.jsxs("aside",{className:"dedicated-sidebar",children:[e.jsxs("div",{className:"sidebar-header",children:[e.jsx("h2",{children:c("title")}),e.jsx("span",{className:"count-badge",children:o.length})]}),e.jsx("div",{className:"sidebar-search",children:e.jsx("input",{type:"text",placeholder:c("searchPlaceholder"),value:x,onChange:t=>u(t.target.value)})}),e.jsx("div",{className:"server-list",children:m&&o.length===0?e.jsx("div",{className:"loading-state",children:e.jsx("div",{className:"skeleton-item"})}):k.length===0?e.jsx("div",{className:"empty-state",children:s("empty.title")}):k.map(t=>{var C;return e.jsxs("button",{className:`server-item ${r===t.name?"active":""}`,onClick:()=>a(t.name),children:[e.jsx("div",{className:`server-status-dot ${P((C=t.details)==null?void 0:C.powerState)}`}),e.jsxs("div",{className:"server-info",children:[e.jsx("span",{className:"server-name",children:t.name}),t.details&&e.jsxs("span",{className:"server-meta",children:[t.details.commercialRange," | ",t.details.datacenter]})]})]},t.name)})})]}),e.jsx("main",{className:"dedicated-main",children:r&&j?e.jsxs(e.Fragment,{children:[e.jsxs("header",{className:"page-header",children:[e.jsxs("div",{children:[e.jsx("h1",{children:r}),j.details&&e.jsxs("p",{className:"page-description",children:[j.details.commercialRange," | ",j.details.datacenter," | ",e.jsx("span",{className:`state-text ${P(j.details.powerState)}`,children:j.details.powerState})]})]}),e.jsxs("div",{className:"header-actions",children:[e.jsxs("button",{className:"btn-action",onClick:D,disabled:b,children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99"})}),c("actions.reboot")]}),e.jsx("button",{className:"btn-refresh",onClick:g,children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99"})})})]})]}),e.jsx("div",{className:"tabs-container",children:e.jsx("div",{className:"tabs-list",children:L.map(t=>e.jsx("button",{className:`tab-btn ${h===t.id?"active":""}`,onClick:()=>l(t.id),children:c(t.labelKey)},t.id))})}),e.jsx("div",{className:"tab-content",children:w()})]}):e.jsxs("div",{className:"no-selection",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.5,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.75 17.25v-.228a4.5 4.5 0 00-.12-1.03l-2.268-9.64a3.375 3.375 0 00-3.285-2.602H7.923a3.375 3.375 0 00-3.285 2.602l-2.268 9.64a4.5 4.5 0 00-.12 1.03v.228m19.5 0a3 3 0 01-3 3H5.25a3 3 0 01-3-3m19.5 0a3 3 0 00-3-3H5.25a3 3 0 00-3 3"})}),e.jsx("p",{children:c("selectServer")})]})})]})}export{V as default};
//# sourceMappingURL=index-BfWmST3X.js.map
