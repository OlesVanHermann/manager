import{u as v,r,j as e}from"./index-svQWOpff.js";import{o as h}from"./api.service-CIh7kdHI.js";/* empty css               */class T{async listServices(){return h.get("/email/pro")}async getService(s){return h.get(`/email/pro/${s}`)}async getServiceInfos(s){return h.get(`/email/pro/${s}/serviceInfos`)}async listAccounts(s){return h.get(`/email/pro/${s}/account`)}async getAccount(s,n){return h.get(`/email/pro/${s}/account/${n}`)}async listDomains(s){return h.get(`/email/pro/${s}/domain`)}async getDomain(s,n){return h.get(`/email/pro/${s}/domain/${n}`)}async listTasks(s){return h.get(`/email/pro/${s}/task`)}async getTask(s,n){return h.get(`/email/pro/${s}/task/${n}`)}}const u=new T;function D({service:c}){const{t:s}=v("web-cloud/email-pro/index"),[n,d]=r.useState([]),[l,o]=r.useState(!0);r.useEffect(()=>{(async()=>{try{o(!0);const m=await u.listAccounts(c),x=await Promise.all(m.map(j=>u.getAccount(c,j)));d(x)}finally{o(!1)}})()},[c]);const i=a=>a?`${(a/(1024*1024*1024)).toFixed(2)} GB`:"-";return l?e.jsx("div",{className:"tab-loading",children:e.jsx("div",{className:"skeleton-block"})}):e.jsxs("div",{className:"accounts-tab",children:[e.jsxs("div",{className:"tab-header",children:[e.jsx("h3",{children:s("accounts.title")}),e.jsx("span",{className:"records-count",children:n.length})]}),n.length===0?e.jsx("div",{className:"empty-state",children:e.jsx("p",{children:s("accounts.empty")})}):e.jsxs("table",{className:"data-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:s("accounts.email")}),e.jsx("th",{children:s("accounts.name")}),e.jsx("th",{children:s("accounts.usage")}),e.jsx("th",{children:s("accounts.lastLogin")}),e.jsx("th",{children:s("accounts.status")})]})}),e.jsx("tbody",{children:n.map(a=>e.jsxs("tr",{children:[e.jsx("td",{className:"font-mono",children:a.primaryEmailAddress}),e.jsx("td",{children:a.displayName}),e.jsxs("td",{children:[i(a.currentUsage)," / ",i(a.quota)]}),e.jsx("td",{children:a.lastLogonDate?new Date(a.lastLogonDate).toLocaleDateString():"-"}),e.jsx("td",{children:e.jsx("span",{className:`badge ${a.state==="ok"?"success":"warning"}`,children:a.state})})]},a.primaryEmailAddress))})]})]})}function A({service:c}){const{t:s}=v("web-cloud/email-pro/index"),[n,d]=r.useState([]),[l,o]=r.useState(!0);return r.useEffect(()=>{(async()=>{try{o(!0);const a=await u.listDomains(c),m=await Promise.all(a.map(x=>u.getDomain(c,x)));d(m)}finally{o(!1)}})()},[c]),l?e.jsx("div",{className:"tab-loading",children:e.jsx("div",{className:"skeleton-block"})}):e.jsxs("div",{className:"domains-tab",children:[e.jsx("div",{className:"tab-header",children:e.jsx("h3",{children:s("domains.title")})}),n.length===0?e.jsx("div",{className:"empty-state",children:e.jsx("p",{children:s("domains.empty")})}):e.jsxs("table",{className:"data-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:s("domains.name")}),e.jsx("th",{children:s("domains.type")}),e.jsx("th",{children:"MX"}),e.jsx("th",{children:"SRV"}),e.jsx("th",{children:s("domains.status")})]})}),e.jsx("tbody",{children:n.map(i=>e.jsxs("tr",{children:[e.jsx("td",{className:"font-mono",children:i.name}),e.jsx("td",{children:i.type}),e.jsx("td",{children:e.jsx("span",{className:`badge ${i.mxIsValid?"success":"error"}`,children:i.mxIsValid?"✓":"✗"})}),e.jsx("td",{children:e.jsx("span",{className:`badge ${i.srvIsValid?"success":"error"}`,children:i.srvIsValid?"✓":"✗"})}),e.jsx("td",{children:e.jsx("span",{className:`badge ${i.state==="ok"?"success":"warning"}`,children:i.state})})]},i.name))})]})]})}function C({service:c}){const{t:s}=v("web-cloud/email-pro/index"),[n,d]=r.useState([]),[l,o]=r.useState(!0);r.useEffect(()=>{(async()=>{try{o(!0);const m=await u.listTasks(c),x=await Promise.all(m.slice(0,50).map(j=>u.getTask(c,j)));d(x)}finally{o(!1)}})()},[c]);const i=a=>{const m={todo:"warning",doing:"info",done:"success",error:"error",cancelled:"inactive"};return e.jsx("span",{className:`badge ${m[a]||"inactive"}`,children:a})};return l?e.jsx("div",{className:"tab-loading",children:e.jsx("div",{className:"skeleton-block"})}):e.jsxs("div",{className:"tasks-tab",children:[e.jsx("div",{className:"tab-header",children:e.jsx("h3",{children:s("tasks.title")})}),n.length===0?e.jsx("div",{className:"empty-state",children:e.jsx("p",{children:s("tasks.empty")})}):e.jsxs("table",{className:"data-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:s("tasks.function")}),e.jsx("th",{children:s("tasks.status")}),e.jsx("th",{children:s("tasks.date")})]})}),e.jsx("tbody",{children:n.map(a=>e.jsxs("tr",{children:[e.jsx("td",{className:"font-mono",children:a.function}),e.jsx("td",{children:i(a.status)}),e.jsx("td",{children:new Date(a.todoDate).toLocaleString()})]},a.id))})]})]})}function I(){const{t:c}=v("web-cloud/email-pro/index"),{t:s}=v("common"),[n,d]=r.useState([]),[l,o]=r.useState(null),[i,a]=r.useState("accounts"),[m,x]=r.useState(!0),[j,w]=r.useState(""),S=[{id:"accounts",labelKey:"tabs.accounts"},{id:"domains",labelKey:"tabs.domains"},{id:"tasks",labelKey:"tabs.tasks"}],y=r.useCallback(async()=>{try{x(!0);const t=await u.listServices(),L=t.map(g=>({service:g,loading:!0}));d(L),t.length>0&&!l&&o(t[0]);for(const g of t)try{const b=await u.getService(g);d(p=>p.map(N=>N.service===g?{...N,details:b,loading:!1}:N))}catch{d(b=>b.map(p=>p.service===g?{...p,loading:!1}:p))}}finally{x(!1)}},[l]);r.useEffect(()=>{y()},[]);const k=n.filter(t=>t.service.toLowerCase().includes(j.toLowerCase())),f=n.find(t=>t.service===l),$=()=>{if(!l)return null;switch(i){case"accounts":return e.jsx(D,{service:l});case"domains":return e.jsx(A,{service:l});case"tasks":return e.jsx(C,{service:l});default:return null}};return e.jsxs("div",{className:"email-page",children:[e.jsxs("aside",{className:"email-sidebar",children:[e.jsxs("div",{className:"sidebar-header",children:[e.jsx("h2",{children:c("title")}),e.jsx("span",{className:"count-badge",children:n.length})]}),e.jsx("div",{className:"sidebar-search",children:e.jsx("input",{type:"text",placeholder:c("searchPlaceholder"),value:j,onChange:t=>w(t.target.value)})}),e.jsx("div",{className:"email-list",children:m&&n.length===0?e.jsx("div",{className:"loading-state",children:e.jsx("div",{className:"skeleton-item"})}):k.length===0?e.jsx("div",{className:"empty-state",children:s("empty.title")}):k.map(t=>e.jsxs("button",{className:`email-item ${l===t.service?"active":""}`,onClick:()=>o(t.service),children:[e.jsx("div",{className:"email-icon pro",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.5,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.75 6.75v10.5a2.25 2.25 0 01-2.25 2.25h-15a2.25 2.25 0 01-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0019.5 4.5h-15a2.25 2.25 0 00-2.25 2.25m19.5 0v.243a2.25 2.25 0 01-1.07 1.916l-7.5 4.615a2.25 2.25 0 01-2.36 0L3.32 8.91a2.25 2.25 0 01-1.07-1.916V6.75"})})}),e.jsxs("div",{className:"email-info",children:[e.jsx("span",{className:"email-name",children:t.service}),t.details&&e.jsx("span",{className:"email-meta",children:t.details.offer})]})]},t.service))})]}),e.jsx("main",{className:"email-main",children:l&&f?e.jsxs(e.Fragment,{children:[e.jsxs("header",{className:"page-header",children:[e.jsxs("div",{children:[e.jsx("h1",{children:l}),f.details&&e.jsxs("p",{className:"page-description",children:["Email Pro | ",f.details.offer," | ",f.details.state]})]}),e.jsxs("button",{className:"btn-refresh",onClick:y,children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99"})}),s("actions.refresh")]})]}),e.jsx("div",{className:"tabs-container",children:e.jsx("div",{className:"tabs-list",children:S.map(t=>e.jsx("button",{className:`tab-btn ${i===t.id?"active":""}`,onClick:()=>a(t.id),children:c(t.labelKey)},t.id))})}),e.jsx("div",{className:"tab-content",children:$()})]}):e.jsxs("div",{className:"no-selection",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.5,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.75 6.75v10.5a2.25 2.25 0 01-2.25 2.25h-15a2.25 2.25 0 01-2.25-2.25V6.75"})}),e.jsx("p",{children:c("selectService")})]})})]})}export{I as default};
//# sourceMappingURL=index-fGMW9QWs.js.map
