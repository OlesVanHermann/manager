import{u as v,r as c,j as e}from"./index-svQWOpff.js";import{o as m}from"./api.service-CIh7kdHI.js";/* empty css               */class M{async listDomains(){return m.get("/email/domain")}async getDomain(s){return m.get(`/email/domain/${s}`)}async getServiceInfos(s){return m.get(`/email/domain/${s}/serviceInfos`)}async listAccounts(s){return m.get(`/email/domain/${s}/account`)}async getAccount(s,t){return m.get(`/email/domain/${s}/account/${t}`)}async createAccount(s,t,o,n){return m.post(`/email/domain/${s}/account`,{accountName:t,password:o,size:n})}async deleteAccount(s,t){return m.delete(`/email/domain/${s}/account/${t}`)}async changePassword(s,t,o){return m.post(`/email/domain/${s}/account/${t}/changePassword`,{password:o})}async listRedirections(s){return m.get(`/email/domain/${s}/redirection`)}async getRedirection(s,t){return m.get(`/email/domain/${s}/redirection/${t}`)}async createRedirection(s,t,o,n){return m.post(`/email/domain/${s}/redirection`,{from:t,to:o,localCopy:n})}async deleteRedirection(s,t){return m.delete(`/email/domain/${s}/redirection/${t}`)}async listMailingLists(s){return m.get(`/email/domain/${s}/mailingList`)}async getMailingList(s,t){return m.get(`/email/domain/${s}/mailingList/${t}`)}async listFilters(s,t){return m.get(`/email/domain/${s}/account/${t}/filter`)}async getFilter(s,t,o){return m.get(`/email/domain/${s}/account/${t}/filter/${o}`)}async listTasks(s){return m.get(`/email/domain/${s}/task`)}async getTask(s,t){return m.get(`/email/domain/${s}/task/${t}`)}}const g=new M;function A({domain:l}){const{t:s}=v("web-cloud/email-domain/index"),[t,o]=c.useState([]),[n,x]=c.useState(!0),[j,h]=c.useState(null);c.useEffect(()=>{(async()=>{try{x(!0);const u=await g.listAccounts(l),N=[];for(let b=0;b<u.length;b+=10){const w=u.slice(b,b+10),y=await Promise.all(w.map(k=>g.getAccount(l,k)));N.push(...y),o([...N])}}catch(u){h(String(u))}finally{x(!1)}})()},[l]);const r=a=>a>1024*1024?`${(a/(1024*1024)).toFixed(1)} GB`:`${(a/1024).toFixed(0)} MB`,d=(a,u)=>u>0?Math.round(a/u*100):0;return n&&t.length===0?e.jsx("div",{className:"tab-loading",children:e.jsx("div",{className:"skeleton-block"})}):j?e.jsx("div",{className:"error-state",children:j}):e.jsxs("div",{className:"accounts-tab",children:[e.jsxs("div",{className:"tab-header",children:[e.jsx("h3",{children:s("accounts.title")}),e.jsx("p",{className:"tab-description",children:s("accounts.description")}),e.jsxs("span",{className:"records-count",children:[t.length," ",s("accounts.count")]})]}),t.length===0?e.jsx("div",{className:"empty-state",children:e.jsx("p",{children:s("accounts.empty")})}):e.jsxs("table",{className:"data-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:s("accounts.email")}),e.jsx("th",{children:s("accounts.description")}),e.jsx("th",{children:s("accounts.usage")}),e.jsx("th",{children:s("accounts.status")})]})}),e.jsx("tbody",{children:t.map(a=>e.jsxs("tr",{children:[e.jsx("td",{className:"font-mono",children:a.email}),e.jsx("td",{children:a.description||"-"}),e.jsx("td",{children:e.jsxs("div",{className:"usage-cell",children:[e.jsx("div",{className:"usage-bar",children:e.jsx("div",{className:"usage-fill",style:{width:`${d(a.size,a.quota)}%`}})}),e.jsxs("span",{children:[r(a.size)," / ",r(a.quota)]})]})}),e.jsx("td",{children:e.jsx("span",{className:`badge ${a.isBlocked?"error":"success"}`,children:a.isBlocked?s("accounts.blocked"):s("accounts.active")})})]},a.accountName))})]})]})}function D({domain:l}){const{t:s}=v("web-cloud/email-domain/index"),[t,o]=c.useState([]),[n,x]=c.useState(!0),[j,h]=c.useState(null);return c.useEffect(()=>{(async()=>{try{x(!0);const d=await g.listRedirections(l),a=await Promise.all(d.map(u=>g.getRedirection(l,u)));o(a)}catch(d){h(String(d))}finally{x(!1)}})()},[l]),n?e.jsx("div",{className:"tab-loading",children:e.jsx("div",{className:"skeleton-block"})}):j?e.jsx("div",{className:"error-state",children:j}):e.jsxs("div",{className:"redirections-tab",children:[e.jsxs("div",{className:"tab-header",children:[e.jsx("h3",{children:s("redirections.title")}),e.jsx("p",{className:"tab-description",children:s("redirections.description")})]}),t.length===0?e.jsx("div",{className:"empty-state",children:e.jsx("p",{children:s("redirections.empty")})}):e.jsxs("table",{className:"data-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:s("redirections.from")}),e.jsx("th",{children:s("redirections.to")}),e.jsx("th",{children:s("redirections.localCopy")})]})}),e.jsx("tbody",{children:t.map(r=>e.jsxs("tr",{children:[e.jsx("td",{className:"font-mono",children:r.from}),e.jsx("td",{className:"font-mono",children:r.to}),e.jsx("td",{children:e.jsx("span",{className:`badge ${r.localCopy?"success":"inactive"}`,children:r.localCopy?"âœ“":"âœ—"})})]},r.id))})]})]})}function E({domain:l}){const{t:s}=v("web-cloud/email-domain/index"),[t,o]=c.useState([]),[n,x]=c.useState(!0),[j,h]=c.useState(null);return c.useEffect(()=>{(async()=>{try{x(!0);const d=await g.listMailingLists(l),a=await Promise.all(d.map(u=>g.getMailingList(l,u)));o(a)}catch(d){h(String(d))}finally{x(!1)}})()},[l]),n?e.jsx("div",{className:"tab-loading",children:e.jsx("div",{className:"skeleton-block"})}):j?e.jsx("div",{className:"error-state",children:j}):e.jsxs("div",{className:"mailing-lists-tab",children:[e.jsxs("div",{className:"tab-header",children:[e.jsx("h3",{children:s("mailingLists.title")}),e.jsx("p",{className:"tab-description",children:s("mailingLists.description")})]}),t.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 18.72a9.094 9.094 0 003.741-.479 3 3 0 00-4.682-2.72m.94 3.198l.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0112 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 016 18.719m12 0a5.971 5.971 0 00-.941-3.197m0 0A5.995 5.995 0 0012 12.75a5.995 5.995 0 00-5.058 2.772m0 0a3 3 0 00-4.681 2.72 8.986 8.986 0 003.74.477m.94-3.197a5.971 5.971 0 00-.94 3.197M15 6.75a3 3 0 11-6 0 3 3 0 016 0zm6 3a2.25 2.25 0 11-4.5 0 2.25 2.25 0 014.5 0zm-13.5 0a2.25 2.25 0 11-4.5 0 2.25 2.25 0 014.5 0z"})}),e.jsx("p",{children:s("mailingLists.empty")})]}):e.jsxs("table",{className:"data-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:s("mailingLists.name")}),e.jsx("th",{children:s("mailingLists.subscribers")}),e.jsx("th",{children:s("mailingLists.language")})]})}),e.jsx("tbody",{children:t.map(r=>e.jsxs("tr",{children:[e.jsxs("td",{className:"font-mono",children:[r.name,"@",l]}),e.jsx("td",{children:r.nbSubscribers}),e.jsx("td",{children:r.language})]},r.name))})]})]})}function P({domain:l}){const{t:s}=v("web-cloud/email-domain/index"),[t,o]=c.useState([]),[n,x]=c.useState(!0);c.useEffect(()=>{(async()=>{try{x(!0);const r=await g.listTasks(l),d=await Promise.all(r.slice(0,50).map(a=>g.getTask(l,a)));d.sort((a,u)=>new Date(u.date).getTime()-new Date(a.date).getTime()),o(d)}finally{x(!1)}})()},[l]);const j=h=>{const d={todo:{class:"warning",icon:"â³"},doing:{class:"info",icon:"ðŸ”„"},done:{class:"success",icon:"âœ“"},error:{class:"error",icon:"âœ—"},cancelled:{class:"inactive",icon:"âŠ˜"}}[h]||{class:"inactive",icon:"?"};return e.jsxs("span",{className:`badge ${d.class}`,children:[d.icon," ",h]})};return n?e.jsx("div",{className:"tab-loading",children:e.jsx("div",{className:"skeleton-block"})}):e.jsxs("div",{className:"tasks-tab",children:[e.jsxs("div",{className:"tab-header",children:[e.jsx("h3",{children:s("tasks.title")}),e.jsx("p",{className:"tab-description",children:s("tasks.description")})]}),t.length===0?e.jsx("div",{className:"empty-state",children:e.jsx("p",{children:s("tasks.empty")})}):e.jsxs("table",{className:"data-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:s("tasks.action")}),e.jsx("th",{children:s("tasks.status")}),e.jsx("th",{children:s("tasks.date")})]})}),e.jsx("tbody",{children:t.map(h=>e.jsxs("tr",{children:[e.jsx("td",{className:"font-mono",children:h.action}),e.jsx("td",{children:j(h.status)}),e.jsx("td",{children:new Date(h.date).toLocaleString()})]},h.id))})]})]})}function F(){const{t:l}=v("web-cloud/email-domain/index"),{t:s}=v("common"),[t,o]=c.useState([]),[n,x]=c.useState(null),[j,h]=c.useState("accounts"),[r,d]=c.useState(!0),[a,u]=c.useState(null),[N,b]=c.useState(""),w=[{id:"accounts",labelKey:"tabs.accounts"},{id:"redirections",labelKey:"tabs.redirections"},{id:"mailingLists",labelKey:"tabs.mailingLists"},{id:"tasks",labelKey:"tabs.tasks"}],y=c.useCallback(async()=>{try{d(!0);const i=await g.listDomains(),C=i.map(f=>({domain:f,loading:!0}));o(C),i.length>0&&!n&&x(i[0]);for(const f of i)try{const $=await g.getDomain(f);o(L=>L.map(p=>p.domain===f?{...p,details:$,loading:!1}:p))}catch($){o(L=>L.map(p=>p.domain===f?{...p,loading:!1,error:String($)}:p))}}catch(i){u(String(i))}finally{d(!1)}},[n]);c.useEffect(()=>{y()},[]);const k=t.filter(i=>i.domain.toLowerCase().includes(N.toLowerCase())),S=t.find(i=>i.domain===n),T=()=>{if(!n)return null;switch(j){case"accounts":return e.jsx(A,{domain:n});case"redirections":return e.jsx(D,{domain:n});case"mailingLists":return e.jsx(E,{domain:n});case"tasks":return e.jsx(P,{domain:n});default:return null}};return e.jsxs("div",{className:"email-page",children:[e.jsxs("aside",{className:"email-sidebar",children:[e.jsxs("div",{className:"sidebar-header",children:[e.jsx("h2",{children:l("title")}),e.jsx("span",{className:"count-badge",children:t.length})]}),e.jsx("div",{className:"sidebar-search",children:e.jsx("input",{type:"text",placeholder:l("searchPlaceholder"),value:N,onChange:i=>b(i.target.value)})}),e.jsx("div",{className:"email-list",children:r&&t.length===0?e.jsx("div",{className:"loading-state",children:e.jsx("div",{className:"skeleton-item"})}):a?e.jsx("div",{className:"error-state",children:a}):k.length===0?e.jsx("div",{className:"empty-state",children:s("empty.title")}):k.map(i=>e.jsxs("button",{className:`email-item ${n===i.domain?"active":""}`,onClick:()=>x(i.domain),children:[e.jsx("div",{className:"email-icon",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.5,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.75 6.75v10.5a2.25 2.25 0 01-2.25 2.25h-15a2.25 2.25 0 01-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0019.5 4.5h-15a2.25 2.25 0 00-2.25 2.25m19.5 0v.243a2.25 2.25 0 01-1.07 1.916l-7.5 4.615a2.25 2.25 0 01-2.36 0L3.32 8.91a2.25 2.25 0 01-1.07-1.916V6.75"})})}),e.jsxs("div",{className:"email-info",children:[e.jsx("span",{className:"email-name",children:i.domain}),i.details&&e.jsx("span",{className:"email-status badge success",children:i.details.status})]})]},i.domain))})]}),e.jsx("main",{className:"email-main",children:n&&S?e.jsxs(e.Fragment,{children:[e.jsxs("header",{className:"page-header",children:[e.jsxs("div",{children:[e.jsx("h1",{children:n}),e.jsx("p",{className:"page-description",children:"MX Plan"})]}),e.jsxs("button",{className:"btn-refresh",onClick:y,children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99"})}),s("actions.refresh")]})]}),e.jsx("div",{className:"tabs-container",children:e.jsx("div",{className:"tabs-list",children:w.map(i=>e.jsx("button",{className:`tab-btn ${j===i.id?"active":""}`,onClick:()=>h(i.id),children:l(i.labelKey)},i.id))})}),e.jsx("div",{className:"tab-content",children:T()})]}):e.jsxs("div",{className:"no-selection",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.5,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.75 6.75v10.5a2.25 2.25 0 01-2.25 2.25h-15a2.25 2.25 0 01-2.25-2.25V6.75"})}),e.jsx("p",{children:l("selectDomain")})]})})]})}export{F as default};
//# sourceMappingURL=index-DoOVTgFW.js.map
