import{u as g,r as l,j as s}from"./index-svQWOpff.js";import{c as m}from"./cloud.service-Cb_WGcWH.js";import"./api.service-CIh7kdHI.js";function A({projectId:i}){const{t}=g("public-cloud/project/index"),{t:r}=g("common"),[j,d]=l.useState([]),[h,a]=l.useState(!0),[e,c]=l.useState(null),x=async()=>{try{a(!0);const n=await m.listInstances(i);d(n)}finally{a(!1)}};l.useEffect(()=>{x()},[i]);const v=async(n,u)=>{try{c(n),u==="reboot"?await m.rebootInstance(i,n,"soft"):u==="start"?await m.startInstance(i,n):u==="stop"&&await m.stopInstance(i,n),setTimeout(x,2e3)}finally{c(null)}},y=n=>{const u={ACTIVE:"success",BUILD:"warning",SHUTOFF:"inactive",ERROR:"error",RESCUE:"info",STOPPED:"inactive"};return s.jsx("span",{className:`badge ${u[n]||"inactive"}`,children:n})},S=n=>{var u,N;return((N=(u=n.ipAddresses)==null?void 0:u.find(b=>b.type==="public"&&b.version===4))==null?void 0:N.ip)||"-"},w=n=>{var u,N;return((N=(u=n.ipAddresses)==null?void 0:u.find(b=>b.type==="private"&&b.version===4))==null?void 0:N.ip)||"-"};return h?s.jsx("div",{className:"tab-loading",children:s.jsx("div",{className:"skeleton-block"})}):s.jsxs("div",{className:"instances-tab",children:[s.jsxs("div",{className:"tab-header",children:[s.jsxs("div",{children:[s.jsx("h3",{children:t("instances.title")}),s.jsx("span",{className:"records-count",children:j.length})]}),s.jsx("button",{className:"btn-refresh",onClick:x,children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99"})})})]}),j.length===0?s.jsx("div",{className:"empty-state",children:s.jsx("p",{children:t("instances.empty")})}):s.jsx("div",{className:"instance-cards",children:j.map(n=>s.jsxs("div",{className:`instance-card ${n.status==="ACTIVE"?"active":""}`,children:[s.jsxs("div",{className:"instance-header",children:[s.jsx("div",{className:`status-dot ${n.status==="ACTIVE"?"running":n.status==="SHUTOFF"?"stopped":"warning"}`}),s.jsx("h4",{children:n.name}),y(n.status)]}),s.jsxs("div",{className:"instance-details",children:[s.jsxs("div",{children:[s.jsx("label",{children:t("instances.region")}),s.jsx("span",{children:n.region})]}),s.jsxs("div",{children:[s.jsx("label",{children:t("instances.publicIp")}),s.jsx("span",{className:"font-mono",children:S(n)})]}),s.jsxs("div",{children:[s.jsx("label",{children:t("instances.privateIp")}),s.jsx("span",{className:"font-mono",children:w(n)})]}),s.jsxs("div",{children:[s.jsx("label",{children:t("instances.created")}),s.jsx("span",{children:new Date(n.created).toLocaleDateString()})]}),n.monthlyBilling&&s.jsxs("div",{children:[s.jsx("label",{children:t("instances.billing")}),s.jsx("span",{className:"badge info",children:"Monthly"})]})]}),s.jsxs("div",{className:"instance-actions",children:[n.status==="ACTIVE"&&s.jsxs(s.Fragment,{children:[s.jsx("button",{className:"btn-small",onClick:()=>v(n.id,"reboot"),disabled:e===n.id,children:e===n.id?"...":t("instances.reboot")}),s.jsx("button",{className:"btn-small danger",onClick:()=>v(n.id,"stop"),disabled:e===n.id,children:t("instances.stop")})]}),n.status==="SHUTOFF"&&s.jsx("button",{className:"btn-small success",onClick:()=>v(n.id,"start"),disabled:e===n.id,children:e===n.id?"...":t("instances.start")})]})]},n.id))})]})}function E({projectId:i}){const{t}=g("public-cloud/project/index"),[r,j]=l.useState([]),[d,h]=l.useState(!0);l.useEffect(()=>{(async()=>{try{h(!0);const x=await m.listVolumes(i);j(x)}finally{h(!1)}})()},[i]);const a=c=>{const x={available:"success","in-use":"info",creating:"warning",error:"error"};return s.jsx("span",{className:`badge ${x[c]||"inactive"}`,children:c})},e=c=>{const x={classic:"inactive","high-speed":"info","high-speed-gen2":"success"};return s.jsx("span",{className:`badge ${x[c]||"inactive"}`,children:c})};return d?s.jsx("div",{className:"tab-loading",children:s.jsx("div",{className:"skeleton-block"})}):s.jsxs("div",{className:"volumes-tab",children:[s.jsxs("div",{className:"tab-header",children:[s.jsx("h3",{children:t("volumes.title")}),s.jsx("span",{className:"records-count",children:r.length})]}),r.length===0?s.jsx("div",{className:"empty-state",children:s.jsx("p",{children:t("volumes.empty")})}):s.jsxs("table",{className:"data-table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:t("volumes.name")}),s.jsx("th",{children:t("volumes.size")}),s.jsx("th",{children:t("volumes.type")}),s.jsx("th",{children:t("volumes.region")}),s.jsx("th",{children:t("volumes.attached")}),s.jsx("th",{children:t("volumes.status")})]})}),s.jsx("tbody",{children:r.map(c=>{var x;return s.jsxs("tr",{children:[s.jsx("td",{className:"font-mono",children:c.name||c.id.slice(0,8)}),s.jsxs("td",{children:[c.size," GB"]}),s.jsx("td",{children:e(c.type)}),s.jsx("td",{children:c.region}),s.jsx("td",{children:((x=c.attachedTo)==null?void 0:x.length)>0?c.attachedTo.length+" instance(s)":"-"}),s.jsx("td",{children:a(c.status)})]},c.id)})})]})]})}function H({projectId:i}){const{t}=g("public-cloud/project/index"),[r,j]=l.useState([]),[d,h]=l.useState(!0);return l.useEffect(()=>{(async()=>{try{h(!0);const e=await m.listSnapshots(i);j(e)}finally{h(!1)}})()},[i]),d?s.jsx("div",{className:"tab-loading",children:s.jsx("div",{className:"skeleton-block"})}):s.jsxs("div",{className:"snapshots-tab",children:[s.jsxs("div",{className:"tab-header",children:[s.jsx("h3",{children:t("snapshots.title")}),s.jsx("span",{className:"records-count",children:r.length})]}),r.length===0?s.jsx("div",{className:"empty-state",children:s.jsx("p",{children:t("snapshots.empty")})}):s.jsxs("table",{className:"data-table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:t("snapshots.name")}),s.jsx("th",{children:t("snapshots.size")}),s.jsx("th",{children:t("snapshots.region")}),s.jsx("th",{children:t("snapshots.created")}),s.jsx("th",{children:t("snapshots.status")})]})}),s.jsx("tbody",{children:r.map(a=>s.jsxs("tr",{children:[s.jsx("td",{className:"font-mono",children:a.name}),s.jsxs("td",{children:[a.size," GB"]}),s.jsx("td",{children:a.region}),s.jsx("td",{children:new Date(a.creationDate).toLocaleDateString()}),s.jsx("td",{children:s.jsx("span",{className:`badge ${a.status==="active"?"success":"warning"}`,children:a.status})})]},a.id))})]})]})}function P({projectId:i}){const{t}=g("public-cloud/project/index"),[r,j]=l.useState([]),[d,h]=l.useState(!0);l.useEffect(()=>{(async()=>{try{h(!0);const c=await m.listContainers(i);j(c)}finally{h(!1)}})()},[i]);const a=e=>e<1024?e+" B":e<1024*1024?(e/1024).toFixed(1)+" KB":e<1024*1024*1024?(e/(1024*1024)).toFixed(1)+" MB":(e/(1024*1024*1024)).toFixed(2)+" GB";return d?s.jsx("div",{className:"tab-loading",children:s.jsx("div",{className:"skeleton-block"})}):s.jsxs("div",{className:"storage-tab",children:[s.jsxs("div",{className:"tab-header",children:[s.jsx("h3",{children:t("storage.title")}),s.jsx("span",{className:"records-count",children:r.length})]}),r.length===0?s.jsxs("div",{className:"empty-state",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.25 7.5l-.625 10.632a2.25 2.25 0 01-2.247 2.118H6.622a2.25 2.25 0 01-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125z"})}),s.jsx("p",{children:t("storage.empty")})]}):s.jsx("div",{className:"container-cards",children:r.map(e=>s.jsxs("div",{className:`container-card ${e.archive?"archive":""}`,children:[s.jsx("div",{className:"container-icon",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.25 7.5l-.625 10.632a2.25 2.25 0 01-2.247 2.118H6.622a2.25 2.25 0 01-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125z"})})}),s.jsx("h4",{children:e.name}),s.jsxs("div",{className:"container-meta",children:[s.jsx("span",{className:`badge ${e.containerType==="public"?"warning":e.containerType==="static"?"info":"success"}`,children:e.containerType}),e.archive&&s.jsx("span",{className:"badge inactive",children:"Archive"})]}),s.jsxs("div",{className:"container-stats",children:[s.jsxs("div",{children:[s.jsx("label",{children:t("storage.objects")}),s.jsx("span",{children:e.storedObjects})]}),s.jsxs("div",{children:[s.jsx("label",{children:t("storage.size")}),s.jsx("span",{children:a(e.storedBytes)})]}),s.jsxs("div",{children:[s.jsx("label",{children:t("storage.region")}),s.jsx("span",{children:e.region})]})]})]},e.id))})]})}function $({projectId:i}){const{t}=g("public-cloud/project/index"),[r,j]=l.useState([]),[d,h]=l.useState(!0);return l.useEffect(()=>{(async()=>{try{h(!0);const e=await m.listNetworks(i);j(e)}finally{h(!1)}})()},[i]),d?s.jsx("div",{className:"tab-loading",children:s.jsx("div",{className:"skeleton-block"})}):s.jsxs("div",{className:"networks-tab",children:[s.jsxs("div",{className:"tab-header",children:[s.jsx("h3",{children:t("networks.title")}),s.jsx("span",{className:"records-count",children:r.length})]}),r.length===0?s.jsxs("div",{className:"empty-state",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 21a9.004 9.004 0 008.716-6.747M12 21a9.004 9.004 0 01-8.716-6.747M12 21c2.485 0 4.5-4.03 4.5-9S14.485 3 12 3m0 18c-2.485 0-4.5-4.03-4.5-9S9.515 3 12 3m0 0a8.997 8.997 0 017.843 4.582M12 3a8.997 8.997 0 00-7.843 4.582m15.686 0A11.953 11.953 0 0112 10.5c-2.998 0-5.74-1.1-7.843-2.918m15.686 0A8.959 8.959 0 0121 12c0 .778-.099 1.533-.284 2.253m0 0A17.919 17.919 0 0112 16.5c-3.162 0-6.133-.815-8.716-2.247m0 0A9.015 9.015 0 013 12c0-1.605.42-3.113 1.157-4.418"})}),s.jsx("p",{children:t("networks.empty")})]}):s.jsxs("table",{className:"data-table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:t("networks.name")}),s.jsx("th",{children:t("networks.vlanId")}),s.jsx("th",{children:t("networks.regions")}),s.jsx("th",{children:t("networks.status")})]})}),s.jsx("tbody",{children:r.map(a=>{var e;return s.jsxs("tr",{children:[s.jsx("td",{className:"font-mono",children:a.name}),s.jsx("td",{children:a.vlanId||"-"}),s.jsx("td",{children:((e=a.regions)==null?void 0:e.map(c=>c.region).join(", "))||"-"}),s.jsx("td",{children:s.jsx("span",{className:`badge ${a.status==="ACTIVE"?"success":"warning"}`,children:a.status})})]},a.id)})})]})]})}function q({projectId:i}){const{t}=g("public-cloud/project/index"),[r,j]=l.useState([]),[d,h]=l.useState(!0);return l.useEffect(()=>{(async()=>{try{h(!0);const e=await m.listSshKeys(i);j(e)}finally{h(!1)}})()},[i]),d?s.jsx("div",{className:"tab-loading",children:s.jsx("div",{className:"skeleton-block"})}):s.jsxs("div",{className:"sshkeys-tab",children:[s.jsxs("div",{className:"tab-header",children:[s.jsx("h3",{children:t("sshkeys.title")}),s.jsx("span",{className:"records-count",children:r.length})]}),r.length===0?s.jsxs("div",{className:"empty-state",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 5.25a3 3 0 013 3m3 0a6 6 0 01-7.029 5.912c-.563-.097-1.159.026-1.563.43L10.5 17.25H8.25v2.25H6v2.25H2.25v-2.818c0-.597.237-1.17.659-1.591l6.499-6.499c.404-.404.527-1 .43-1.563A6 6 0 1121.75 8.25z"})}),s.jsx("p",{children:t("sshkeys.empty")})]}):s.jsx("div",{className:"key-cards",children:r.map(a=>{var e;return s.jsxs("div",{className:"key-card",children:[s.jsx("div",{className:"key-icon",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 5.25a3 3 0 013 3m3 0a6 6 0 01-7.029 5.912c-.563-.097-1.159.026-1.563.43L10.5 17.25H8.25v2.25H6v2.25H2.25v-2.818c0-.597.237-1.17.659-1.591l6.499-6.499c.404-.404.527-1 .43-1.563A6 6 0 1121.75 8.25z"})})}),s.jsxs("div",{className:"key-info",children:[s.jsx("h4",{children:a.name}),s.jsxs("p",{className:"font-mono key-fingerprint",children:[a.publicKey.slice(0,40),"..."]}),s.jsxs("p",{className:"key-regions",children:[((e=a.regions)==null?void 0:e.length)||0," regions"]})]})]},a.id)})})]})}function K({projectId:i}){const{t}=g("public-cloud/project/index"),[r,j]=l.useState([]),[d,h]=l.useState(!0);l.useEffect(()=>{(async()=>{try{h(!0);const c=await m.getQuota(i);j(c)}finally{h(!1)}})()},[i]);const a=({used:e,max:c,label:x})=>{const v=c>0?Math.round(e/c*100):0;return s.jsxs("div",{className:"quota-item",children:[s.jsxs("div",{className:"quota-label",children:[s.jsx("span",{children:x}),s.jsxs("span",{children:[e," / ",c]})]}),s.jsx("div",{className:"quota-bar",children:s.jsx("div",{className:"quota-fill",style:{width:`${Math.min(v,100)}%`,background:v>90?"#ef4444":v>70?"#f59e0b":"#22c55e"}})})]})};return d?s.jsx("div",{className:"tab-loading",children:s.jsx("div",{className:"skeleton-block"})}):s.jsxs("div",{className:"quota-tab",children:[s.jsxs("div",{className:"tab-header",children:[s.jsx("h3",{children:t("quota.title")}),s.jsx("p",{className:"tab-description",children:t("quota.description")})]}),r.length===0?s.jsx("div",{className:"empty-state",children:s.jsx("p",{children:t("quota.empty")})}):s.jsx("div",{className:"quota-regions",children:r.map(e=>s.jsxs("div",{className:"quota-region",children:[s.jsx("h4",{children:e.region}),s.jsxs("div",{className:"quota-grid",children:[s.jsxs("div",{className:"quota-section",children:[s.jsx("h5",{children:t("quota.instances")}),s.jsx(a,{used:e.instance.usedInstances,max:e.instance.maxInstances,label:t("quota.instanceCount")}),s.jsx(a,{used:e.instance.usedCores,max:e.instance.maxCores,label:t("quota.cores")}),s.jsx(a,{used:Math.round(e.instance.usedRAM/1024),max:Math.round(e.instance.maxRam/1024),label:t("quota.ram")})]}),s.jsxs("div",{className:"quota-section",children:[s.jsx("h5",{children:t("quota.volumes")}),s.jsx(a,{used:e.volume.volumeCount,max:e.volume.maxVolumeCount,label:t("quota.volumeCount")}),s.jsx(a,{used:e.volume.usedGigabytes,max:e.volume.maxGigabytes,label:t("quota.storage")})]})]})]},e.region))})]})}function D(){var b,I,T,M;const{t:i}=g("public-cloud/project/index"),{t}=g("common"),[r,j]=l.useState([]),[d,h]=l.useState(null),[a,e]=l.useState("instances"),[c,x]=l.useState(!0),[v,y]=l.useState(""),S=[{id:"instances",labelKey:"tabs.instances"},{id:"volumes",labelKey:"tabs.volumes"},{id:"snapshots",labelKey:"tabs.snapshots"},{id:"storage",labelKey:"tabs.storage"},{id:"networks",labelKey:"tabs.networks"},{id:"sshkeys",labelKey:"tabs.sshkeys"},{id:"quota",labelKey:"tabs.quota"}],w=l.useCallback(async()=>{try{x(!0);const o=await m.listProjects(),f=o.map(p=>({projectId:p,loading:!0}));j(f),o.length>0&&!d&&h(o[0]);for(const p of o)try{const[C,k]=await Promise.all([m.getProject(p),m.getServiceInfos(p)]);j(B=>B.map(L=>L.projectId===p?{...L,details:C,serviceInfos:k,loading:!1}:L))}catch{j(C=>C.map(k=>k.projectId===p?{...k,loading:!1}:k))}}finally{x(!1)}},[d]);l.useEffect(()=>{w()},[]);const n=r.filter(o=>{var f,p;return o.projectId.toLowerCase().includes(v.toLowerCase())||((p=(f=o.details)==null?void 0:f.projectName)==null?void 0:p.toLowerCase().includes(v.toLowerCase()))}),u=r.find(o=>o.projectId===d),N=()=>{if(!d)return null;switch(a){case"instances":return s.jsx(A,{projectId:d});case"volumes":return s.jsx(E,{projectId:d});case"snapshots":return s.jsx(H,{projectId:d});case"storage":return s.jsx(P,{projectId:d});case"networks":return s.jsx($,{projectId:d});case"sshkeys":return s.jsx(q,{projectId:d});case"quota":return s.jsx(K,{projectId:d});default:return null}};return s.jsxs("div",{className:"cloud-project-page",children:[s.jsxs("aside",{className:"project-sidebar",children:[s.jsxs("div",{className:"sidebar-header",children:[s.jsx("h2",{children:i("title")}),s.jsx("span",{className:"count-badge",children:r.length})]}),s.jsx("div",{className:"sidebar-search",children:s.jsx("input",{type:"text",placeholder:i("searchPlaceholder"),value:v,onChange:o=>y(o.target.value)})}),s.jsx("div",{className:"project-list",children:c&&r.length===0?s.jsx("div",{className:"loading-state",children:s.jsx("div",{className:"skeleton-item"})}):n.length===0?s.jsx("div",{className:"empty-state",children:t("empty.title")}):n.map(o=>{var f,p;return s.jsxs("button",{className:`project-item ${d===o.projectId?"active":""}`,onClick:()=>h(o.projectId),children:[s.jsx("div",{className:`project-status-dot ${((f=o.details)==null?void 0:f.status)==="ok"?"running":"warning"}`}),s.jsxs("div",{className:"project-info",children:[s.jsx("span",{className:"project-name",children:((p=o.details)==null?void 0:p.projectName)||o.projectId.slice(0,8)}),s.jsxs("span",{className:"project-id",children:[o.projectId.slice(0,8),"..."]})]})]},o.projectId)})})]}),s.jsx("main",{className:"project-main",children:d&&u?s.jsxs(s.Fragment,{children:[s.jsxs("header",{className:"page-header",children:[s.jsxs("div",{children:[s.jsx("h1",{children:((b=u.details)==null?void 0:b.projectName)||d}),s.jsxs("p",{className:"page-description",children:[((I=u.details)==null?void 0:I.description)||i("noDescription")," | ",s.jsx("span",{className:`state-text ${((T=u.details)==null?void 0:T.status)==="ok"?"running":"warning"}`,children:(M=u.details)==null?void 0:M.status})]})]}),s.jsxs("button",{className:"btn-refresh",onClick:w,children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99"})}),t("actions.refresh")]})]}),s.jsx("div",{className:"tabs-container",children:s.jsx("div",{className:"tabs-list",children:S.map(o=>s.jsx("button",{className:`tab-btn ${a===o.id?"active":""}`,onClick:()=>e(o.id),children:i(o.labelKey)},o.id))})}),s.jsx("div",{className:"tab-content",children:N()})]}):s.jsxs("div",{className:"no-selection",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 15a4.5 4.5 0 004.5 4.5H18a3.75 3.75 0 001.332-7.257 3 3 0 00-3.758-3.848 5.25 5.25 0 00-10.233 2.33A4.502 4.502 0 002.25 15z"})}),s.jsx("p",{children:i("selectProject")})]})})]})}export{D as default};
//# sourceMappingURL=index-BnZ5D5Y3.js.map
