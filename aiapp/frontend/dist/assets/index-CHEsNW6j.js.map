{"version":3,"file":"index-CHEsNW6j.js","sources":["../../src/pages/telecom/fax/index.tsx"],"sourcesContent":["// ============================================================\n// FAX - Page principale\n// ============================================================\n\nimport { useState, useEffect, useCallback } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { telecomService, FreefaxAccount } from \"../../../services/telecom.service\";\nimport \"./styles.css\";\n\ninterface FaxWithDetails { number: string; details?: FreefaxAccount; loading: boolean; }\n\nexport default function FaxPage() {\n  const { t } = useTranslation(\"telecom/fax/index\");\n  const { t: tCommon } = useTranslation(\"common\");\n  const [faxes, setFaxes] = useState<FaxWithDetails[]>([]);\n  const [loading, setLoading] = useState(true);\n\n  const loadFaxes = useCallback(async () => {\n    try {\n      setLoading(true);\n      const numbers = await telecomService.listFreefax();\n      const list: FaxWithDetails[] = numbers.map(number => ({ number, loading: true }));\n      setFaxes(list);\n      for (const number of numbers) {\n        try {\n          const details = await telecomService.getFreefax(number);\n          setFaxes(prev => prev.map(f => f.number === number ? { ...f, details, loading: false } : f));\n        } catch { setFaxes(prev => prev.map(f => f.number === number ? { ...f, loading: false } : f)); }\n      }\n    } finally { setLoading(false); }\n  }, []);\n\n  useEffect(() => { loadFaxes(); }, []);\n\n  return (\n    <div className=\"fax-page\">\n      <header className=\"page-header\">\n        <div><h1>{t(\"title\")}</h1><p className=\"page-description\">{t(\"description\")}</p></div>\n        <button className=\"btn-refresh\" onClick={loadFaxes}><svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth={2}><path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99\" /></svg>{tCommon(\"actions.refresh\")}</button>\n      </header>\n      <div className=\"fax-content\">\n        {loading && faxes.length === 0 ? (<div className=\"loading-state\"><div className=\"skeleton-block\" /></div>) : faxes.length === 0 ? (<div className=\"empty-state\"><svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" strokeWidth={1.5} stroke=\"currentColor\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M6.72 13.829c-.24.03-.48.062-.72.096m.72-.096a42.415 42.415 0 0110.56 0m-10.56 0L6.34 18m10.94-4.171c.24.03.48.062.72.096m-.72-.096L17.66 18m0 0l.229 2.523a1.125 1.125 0 01-1.12 1.227H7.231c-.662 0-1.18-.568-1.12-1.227L6.34 18m11.318 0h1.091A2.25 2.25 0 0021 15.75V9.456c0-1.081-.768-2.015-1.837-2.175a48.055 48.055 0 00-1.913-.247M6.34 18H5.25A2.25 2.25 0 013 15.75V9.456c0-1.081.768-2.015 1.837-2.175a48.041 48.041 0 011.913-.247m10.5 0a48.536 48.536 0 00-10.5 0m10.5 0V3.375c0-.621-.504-1.125-1.125-1.125h-8.25c-.621 0-1.125.504-1.125 1.125v3.659M18 10.5h.008v.008H18V10.5zm-3 0h.008v.008H15V10.5z\" /></svg><p>{t(\"empty\")}</p></div>) : (\n          <div className=\"fax-cards\">\n            {faxes.map(fax => (\n              <div key={fax.number} className=\"fax-card\">\n                <div className=\"fax-icon\"><svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" strokeWidth={1.5} stroke=\"currentColor\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M6.72 13.829c-.24.03-.48.062-.72.096m.72-.096a42.415 42.415 0 0110.56 0m-10.56 0L6.34 18m10.94-4.171c.24.03.48.062.72.096m-.72-.096L17.66 18m0 0l.229 2.523a1.125 1.125 0 01-1.12 1.227H7.231c-.662 0-1.18-.568-1.12-1.227L6.34 18m11.318 0h1.091A2.25 2.25 0 0021 15.75V9.456c0-1.081-.768-2.015-1.837-2.175a48.055 48.055 0 00-1.913-.247M6.34 18H5.25A2.25 2.25 0 013 15.75V9.456c0-1.081.768-2.015 1.837-2.175a48.041 48.041 0 011.913-.247m10.5 0a48.536 48.536 0 00-10.5 0m10.5 0V3.375c0-.621-.504-1.125-1.125-1.125h-8.25c-.621 0-1.125.504-1.125 1.125v3.659M18 10.5h.008v.008H18V10.5zm-3 0h.008v.008H15V10.5z\" /></svg></div>\n                <div className=\"fax-info\">\n                  <h3 className=\"font-mono\">{fax.number}</h3>\n                  {fax.details && (<>\n                    <div className=\"fax-detail\"><label>{t(\"fromName\")}</label><span>{fax.details.fromName || '-'}</span></div>\n                    <div className=\"fax-detail\"><label>{t(\"fromEmail\")}</label><span>{fax.details.fromEmail}</span></div>\n                    <div className=\"fax-detail\"><label>{t(\"quality\")}</label><span className=\"badge info\">{fax.details.faxQuality}</span></div>\n                    <div className=\"fax-detail\"><label>{t(\"redirectTo\")}</label><span>{fax.details.redirectionEmail?.join(', ') || '-'}</span></div>\n                  </>)}\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n"],"names":["FaxPage","t","useTranslation","tCommon","faxes","setFaxes","useState","loading","setLoading","loadFaxes","useCallback","numbers","telecomService","list","number","details","prev","f","useEffect","jsxs","jsx","fax","Fragment","_a"],"mappings":"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"}