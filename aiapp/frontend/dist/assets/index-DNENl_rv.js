import{u as p,r,j as e}from"./index-svQWOpff.js";import{t as x}from"./telecom.service-Bd-lZ7D1.js";import"./api.service-CIh7kdHI.js";function C({billingAccount:n}){const{t:a}=p("telecom/voip/index"),[c,d]=r.useState([]),[l,o]=r.useState(!0);return r.useEffect(()=>{(async()=>{try{o(!0);const t=await x.listLines(n),m=await Promise.all(t.map(h=>x.getLine(n,h)));d(m)}finally{o(!1)}})()},[n]),l?e.jsx("div",{className:"tab-loading",children:e.jsx("div",{className:"skeleton-block"})}):e.jsxs("div",{className:"lines-tab",children:[e.jsxs("div",{className:"tab-header",children:[e.jsx("h3",{children:a("lines.title")}),e.jsx("span",{className:"records-count",children:c.length})]}),c.length===0?e.jsx("div",{className:"empty-state",children:e.jsx("p",{children:a("lines.empty")})}):e.jsx("div",{className:"line-cards",children:c.map(i=>e.jsxs("div",{className:"line-card",children:[e.jsx("div",{className:"line-icon",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 002.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 01-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 00-1.091-.852H4.5A2.25 2.25 0 002.25 4.5v2.25z"})})}),e.jsxs("div",{className:"line-info",children:[e.jsx("h4",{children:i.serviceName}),e.jsx("p",{children:i.description||a("lines.noDescription")}),e.jsxs("div",{className:"line-meta",children:[e.jsx("span",{className:`badge ${i.serviceType==="trunk"?"info":"success"}`,children:i.serviceType}),e.jsxs("span",{children:[i.simultaneousLines," ",a("lines.simultaneous")]})]})]})]},i.serviceName))})]})}function T({billingAccount:n}){const{t:a}=p("telecom/voip/index"),[c,d]=r.useState([]),[l,o]=r.useState(!0);r.useEffect(()=>{(async()=>{try{o(!0);const m=await x.listNumbers(n),h=await Promise.all(m.map(b=>x.getNumber(n,b)));d(h)}finally{o(!1)}})()},[n]);const i=t=>{const m={conference:"info",fax:"warning",voicemail:"success",redirect:"secondary",empty:"inactive"};return e.jsx("span",{className:`badge ${m[t]||"inactive"}`,children:t})};return l?e.jsx("div",{className:"tab-loading",children:e.jsx("div",{className:"skeleton-block"})}):e.jsxs("div",{className:"numbers-tab",children:[e.jsxs("div",{className:"tab-header",children:[e.jsx("h3",{children:a("numbers.title")}),e.jsx("span",{className:"records-count",children:c.length})]}),c.length===0?e.jsx("div",{className:"empty-state",children:e.jsx("p",{children:a("numbers.empty")})}):e.jsxs("table",{className:"data-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:a("numbers.number")}),e.jsx("th",{children:a("numbers.type")}),e.jsx("th",{children:a("numbers.feature")}),e.jsx("th",{children:a("numbers.country")}),e.jsx("th",{children:a("numbers.description")})]})}),e.jsx("tbody",{children:c.map(t=>e.jsxs("tr",{children:[e.jsx("td",{className:"font-mono",children:t.serviceName}),e.jsx("td",{children:e.jsx("span",{className:`badge ${t.serviceType==="alias"?"info":"success"}`,children:t.serviceType})}),e.jsx("td",{children:i(t.featureType)}),e.jsx("td",{children:t.country}),e.jsx("td",{children:t.description||"-"})]},t.serviceName))})]})]})}function B({billingAccount:n}){const{t:a}=p("telecom/voip/index"),[c,d]=r.useState([]),[l,o]=r.useState(!0);return r.useEffect(()=>{(async()=>{try{o(!0);const t=await x.listVoicemails(n),m=await Promise.all(t.map(h=>x.getVoicemail(n,h)));d(m)}finally{o(!1)}})()},[n]),l?e.jsx("div",{className:"tab-loading",children:e.jsx("div",{className:"skeleton-block"})}):e.jsxs("div",{className:"voicemails-tab",children:[e.jsxs("div",{className:"tab-header",children:[e.jsx("h3",{children:a("voicemails.title")}),e.jsx("span",{className:"records-count",children:c.length})]}),c.length===0?e.jsx("div",{className:"empty-state",children:e.jsx("p",{children:a("voicemails.empty")})}):e.jsx("div",{className:"voicemail-cards",children:c.map(i=>e.jsxs("div",{className:"voicemail-card",children:[e.jsx("div",{className:"voicemail-icon",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.75 9v.906a2.25 2.25 0 01-1.183 1.981l-6.478 3.488M2.25 9v.906a2.25 2.25 0 001.183 1.981l6.478 3.488m8.839 2.51l-4.66-2.51m0 0l-1.023-.55a2.25 2.25 0 00-2.134 0l-1.022.55m0 0l-4.661 2.51m16.5 1.615a2.25 2.25 0 01-2.25 2.25h-15a2.25 2.25 0 01-2.25-2.25V8.844a2.25 2.25 0 011.183-1.98l7.5-4.04a2.25 2.25 0 012.134 0l7.5 4.04a2.25 2.25 0 011.183 1.98V19.5z"})})}),e.jsx("h4",{children:i.serviceName}),e.jsx("p",{children:i.description||a("voicemails.noDescription")})]},i.serviceName))})]})}function $(){var k;const{t:n}=p("telecom/voip/index"),{t:a}=p("common"),[c,d]=r.useState([]),[l,o]=r.useState(null),[i,t]=r.useState("lines"),[m,h]=r.useState(!0),[b,L]=r.useState(""),S=[{id:"lines",labelKey:"tabs.lines"},{id:"numbers",labelKey:"tabs.numbers"},{id:"voicemails",labelKey:"tabs.voicemails"}],y=r.useCallback(async()=>{try{h(!0);const s=await x.listBillingAccounts(),N=s.map(u=>({billingAccount:u,loading:!0}));d(N),s.length>0&&!l&&o(s[0]);for(const u of s)try{const g=await x.getBillingAccount(u);d(v=>v.map(f=>f.billingAccount===u?{...f,details:g,loading:!1}:f))}catch{d(g=>g.map(v=>v.billingAccount===u?{...v,loading:!1}:v))}}finally{h(!1)}},[l]);r.useEffect(()=>{y()},[]);const w=c.filter(s=>s.billingAccount.toLowerCase().includes(b.toLowerCase())),j=c.find(s=>s.billingAccount===l),A=()=>{if(!l)return null;switch(i){case"lines":return e.jsx(C,{billingAccount:l});case"numbers":return e.jsx(T,{billingAccount:l});case"voicemails":return e.jsx(B,{billingAccount:l});default:return null}};return e.jsxs("div",{className:"voip-page",children:[e.jsxs("aside",{className:"voip-sidebar",children:[e.jsxs("div",{className:"sidebar-header",children:[e.jsx("h2",{children:n("title")}),e.jsx("span",{className:"count-badge",children:c.length})]}),e.jsx("div",{className:"sidebar-search",children:e.jsx("input",{type:"text",placeholder:n("searchPlaceholder"),value:b,onChange:s=>L(s.target.value)})}),e.jsx("div",{className:"account-list",children:m&&c.length===0?e.jsx("div",{className:"loading-state",children:e.jsx("div",{className:"skeleton-item"})}):w.length===0?e.jsx("div",{className:"empty-state",children:a("empty.title")}):w.map(s=>{var N,u;return e.jsxs("button",{className:`account-item ${l===s.billingAccount?"active":""}`,onClick:()=>o(s.billingAccount),children:[e.jsx("div",{className:`account-status-dot ${((N=s.details)==null?void 0:N.status)==="enabled"?"running":"stopped"}`}),e.jsxs("div",{className:"account-info",children:[e.jsx("span",{className:"account-name",children:s.billingAccount}),((u=s.details)==null?void 0:u.description)&&e.jsx("span",{className:"account-desc",children:s.details.description})]})]},s.billingAccount)})})]}),e.jsx("main",{className:"voip-main",children:l&&j?e.jsxs(e.Fragment,{children:[e.jsxs("header",{className:"page-header",children:[e.jsxs("div",{children:[e.jsx("h1",{children:l}),j.details&&e.jsxs("p",{className:"page-description",children:[j.details.description," | Credits: ",((k=j.details.currentOutplan)==null?void 0:k.toFixed(2))||0,"€ / ",j.details.allowedOutplan,"€"]})]}),e.jsxs("button",{className:"btn-refresh",onClick:y,children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99"})}),a("actions.refresh")]})]}),e.jsx("div",{className:"tabs-container",children:e.jsx("div",{className:"tabs-list",children:S.map(s=>e.jsx("button",{className:`tab-btn ${i===s.id?"active":""}`,onClick:()=>t(s.id),children:n(s.labelKey)},s.id))})}),e.jsx("div",{className:"tab-content",children:A()})]}):e.jsxs("div",{className:"no-selection",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 002.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 01-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 00-1.091-.852H4.5A2.25 2.25 0 002.25 4.5v2.25z"})}),e.jsx("p",{children:n("selectAccount")})]})})]})}export{$ as default};
//# sourceMappingURL=index-DNENl_rv.js.map
