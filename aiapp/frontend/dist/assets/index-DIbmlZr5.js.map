{"version":3,"file":"index-DIbmlZr5.js","sources":["../../src/pages/network/ip/index.tsx"],"sourcesContent":["// ============================================================\n// IP - Page principale\n// ============================================================\n\nimport { useState, useEffect, useCallback } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { networkService, IpBlock } from \"../../../services/network.service\";\nimport \"./styles.css\";\n\nexport default function IpPage() {\n  const { t } = useTranslation(\"network/ip/index\");\n  const { t: tCommon } = useTranslation(\"common\");\n  const [ips, setIps] = useState<{ ip: string; details?: IpBlock; loading: boolean }[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [filterType, setFilterType] = useState<string>(\"all\");\n\n  const loadIps = useCallback(async () => {\n    try {\n      setLoading(true);\n      const ipList = await networkService.listIps();\n      const list = ipList.map(ip => ({ ip, loading: true }));\n      setIps(list);\n      for (let i = 0; i < ipList.length; i += 10) {\n        const batch = ipList.slice(i, i + 10);\n        await Promise.all(batch.map(async (ip) => {\n          try {\n            const details = await networkService.getIp(ip);\n            setIps(prev => prev.map(item => item.ip === ip ? { ...item, details, loading: false } : item));\n          } catch { setIps(prev => prev.map(item => item.ip === ip ? { ...item, loading: false } : item)); }\n        }));\n      }\n    } finally { setLoading(false); }\n  }, []);\n\n  useEffect(() => { loadIps(); }, []);\n\n  const filtered = ips.filter(item => {\n    const matchSearch = item.ip.toLowerCase().includes(searchQuery.toLowerCase()) ||\n      item.details?.description?.toLowerCase().includes(searchQuery.toLowerCase());\n    const matchType = filterType === 'all' || item.details?.type === filterType;\n    return matchSearch && matchType;\n  });\n\n  const ipTypes = [...new Set(ips.map(i => i.details?.type).filter(Boolean))];\n\n  const getTypeBadge = (type: string) => {\n    const colors: Record<string, string> = { dedicated: 'info', failover: 'success', vps: 'warning', cloud: 'primary', vrack: 'secondary' };\n    return <span className={`badge ${colors[type] || 'inactive'}`}>{type}</span>;\n  };\n\n  return (\n    <div className=\"ip-page\">\n      <header className=\"page-header\">\n        <div>\n          <h1>{t(\"title\")}</h1>\n          <p className=\"page-description\">{t(\"description\")}</p>\n        </div>\n        <button className=\"btn-refresh\" onClick={loadIps}><svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth={2}><path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99\" /></svg>{tCommon(\"actions.refresh\")}</button>\n      </header>\n      <div className=\"filters-bar\">\n        <input type=\"text\" placeholder={t(\"searchPlaceholder\")} value={searchQuery} onChange={(e) => setSearchQuery(e.target.value)} className=\"search-input\" />\n        <select value={filterType} onChange={(e) => setFilterType(e.target.value)} className=\"filter-select\">\n          <option value=\"all\">{t(\"filters.allTypes\")}</option>\n          {ipTypes.map(type => <option key={type} value={type}>{type}</option>)}\n        </select>\n        <span className=\"results-count\">{filtered.length} / {ips.length}</span>\n      </div>\n      <div className=\"ip-content\">\n        {loading && ips.length === 0 ? (<div className=\"loading-state\"><div className=\"skeleton-block\" /></div>) : filtered.length === 0 ? (<div className=\"empty-state\"><p>{t(\"empty\")}</p></div>) : (\n          <table className=\"data-table\">\n            <thead><tr><th>{t(\"table.ip\")}</th><th>{t(\"table.type\")}</th><th>{t(\"table.description\")}</th><th>{t(\"table.routedTo\")}</th><th>{t(\"table.country\")}</th></tr></thead>\n            <tbody>\n              {filtered.map(item => (\n                <tr key={item.ip}>\n                  <td className=\"font-mono ip-cell\">{item.ip}</td>\n                  <td>{item.details ? getTypeBadge(item.details.type) : '-'}</td>\n                  <td>{item.details?.description || '-'}</td>\n                  <td className=\"font-mono\">{item.details?.routedTo?.serviceName || '-'}</td>\n                  <td>{item.details?.country || '-'}</td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        )}\n      </div>\n    </div>\n  );\n}\n"],"names":["IpPage","t","useTranslation","tCommon","ips","setIps","useState","loading","setLoading","searchQuery","setSearchQuery","filterType","setFilterType","loadIps","useCallback","ipList","networkService","list","ip","i","batch","details","prev","item","useEffect","filtered","matchSearch","_b","_a","matchType","_c","ipTypes","getTypeBadge","type","colors","jsx","jsxs","e","_d"],"mappings":"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"}