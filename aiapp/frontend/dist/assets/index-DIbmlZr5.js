import{u as f,r as i,j as e}from"./index-svQWOpff.js";import{n as v}from"./network.service-4DKL1RXE.js";import"./api.service-CIh7kdHI.js";function I(){const{t:l}=f("network/ip/index"),{t:y}=f("common"),[d,h]=i.useState([]),[N,m]=i.useState(!0),[p,w]=i.useState(""),[x,b]=i.useState("all"),g=i.useCallback(async()=>{try{m(!0);const s=await v.listIps(),t=s.map(a=>({ip:a,loading:!0}));h(t);for(let a=0;a<s.length;a+=10){const r=s.slice(a,a+10);await Promise.all(r.map(async n=>{try{const c=await v.getIp(n);h(o=>o.map(j=>j.ip===n?{...j,details:c,loading:!1}:j))}catch{h(c=>c.map(o=>o.ip===n?{...o,loading:!1}:o))}}))}}finally{m(!1)}},[]);i.useEffect(()=>{g()},[]);const u=d.filter(s=>{var r,n,c;const t=s.ip.toLowerCase().includes(p.toLowerCase())||((n=(r=s.details)==null?void 0:r.description)==null?void 0:n.toLowerCase().includes(p.toLowerCase())),a=x==="all"||((c=s.details)==null?void 0:c.type)===x;return t&&a}),k=[...new Set(d.map(s=>{var t;return(t=s.details)==null?void 0:t.type}).filter(Boolean))],C=s=>{const t={dedicated:"info",failover:"success",vps:"warning",cloud:"primary",vrack:"secondary"};return e.jsx("span",{className:`badge ${t[s]||"inactive"}`,children:s})};return e.jsxs("div",{className:"ip-page",children:[e.jsxs("header",{className:"page-header",children:[e.jsxs("div",{children:[e.jsx("h1",{children:l("title")}),e.jsx("p",{className:"page-description",children:l("description")})]}),e.jsxs("button",{className:"btn-refresh",onClick:g,children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99"})}),y("actions.refresh")]})]}),e.jsxs("div",{className:"filters-bar",children:[e.jsx("input",{type:"text",placeholder:l("searchPlaceholder"),value:p,onChange:s=>w(s.target.value),className:"search-input"}),e.jsxs("select",{value:x,onChange:s=>b(s.target.value),className:"filter-select",children:[e.jsx("option",{value:"all",children:l("filters.allTypes")}),k.map(s=>e.jsx("option",{value:s,children:s},s))]}),e.jsxs("span",{className:"results-count",children:[u.length," / ",d.length]})]}),e.jsx("div",{className:"ip-content",children:N&&d.length===0?e.jsx("div",{className:"loading-state",children:e.jsx("div",{className:"skeleton-block"})}):u.length===0?e.jsx("div",{className:"empty-state",children:e.jsx("p",{children:l("empty")})}):e.jsxs("table",{className:"data-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:l("table.ip")}),e.jsx("th",{children:l("table.type")}),e.jsx("th",{children:l("table.description")}),e.jsx("th",{children:l("table.routedTo")}),e.jsx("th",{children:l("table.country")})]})}),e.jsx("tbody",{children:u.map(s=>{var t,a,r,n;return e.jsxs("tr",{children:[e.jsx("td",{className:"font-mono ip-cell",children:s.ip}),e.jsx("td",{children:s.details?C(s.details.type):"-"}),e.jsx("td",{children:((t=s.details)==null?void 0:t.description)||"-"}),e.jsx("td",{className:"font-mono",children:((r=(a=s.details)==null?void 0:a.routedTo)==null?void 0:r.serviceName)||"-"}),e.jsx("td",{children:((n=s.details)==null?void 0:n.country)||"-"})]},s.ip)})})]})})]})}export{I as default};
//# sourceMappingURL=index-DIbmlZr5.js.map
