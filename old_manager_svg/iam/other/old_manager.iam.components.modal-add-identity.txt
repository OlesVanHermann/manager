# Cahier des Charges : iam/components/modal-add-identity

## 1. VUE D'ENSEMBLE

| Champ | Valeur |
|-------|--------|
| **Fichier SVG** | old_manager.iam.components.modal-add-identity.svg |
| **NAV1** | iam |
| **NAV2** | policies |
| **Type** | Modal |
| **Description** | Modal d'ajout d'identités à une politique IAM |

---

## 2. MODAL

### 2.1 Dimensions

| Propriété | Valeur |
|-----------|--------|
| Largeur | 700px |
| Hauteur | 580px |
| Position | Centrée (x: 370, y: 120) |
| Border radius | 8px |
| Shadow | drop-shadow(0 4px 20px rgba(0,0,0,0.15)) |

### 2.2 Overlay

| Propriété | Valeur |
|-----------|--------|
| Background | rgba(0, 0, 0, 0.5) |

---

## 3. HEADER MODAL

| Propriété | Valeur |
|-----------|--------|
| Hauteur | 60px |
| Titre | Ajouter des identités |
| Font-size | 18px |
| Font-weight | 600 |
| Bouton fermer | × (position droite) |

---

## 4. CONTENU

### 4.1 Barre de recherche

| Type | Input text |
| Dimensions | 652×36px |
| Placeholder | Rechercher par nom, email ou URN... |

### 4.2 Onglets types d'identité

| Onglet | Style | Dimensions |
|--------|-------|------------|
| Utilisateurs locaux | Primary (sélectionné) | 160×32px |
| Groupes | Outline | 140×32px |
| Comptes de service | Outline | 160×32px |

### 4.3 Style onglet actif

| Background | #0050D7 |
| Couleur texte | #FFFFFF |

### 4.4 Style onglet inactif

| Background | #FFFFFF |
| Border | 1px solid #E5E7EB |
| Couleur texte | #6B7280 |

---

## 5. LISTE DES IDENTITÉS

### 5.1 Item sélectionné

| Propriété | Valeur |
|-----------|--------|
| Background | #E8F0FE |
| Border | 1px solid #0050D7 |
| Checkbox | 16×16px, filled #0050D7 |
| Hauteur | 60px |

### 5.2 Item non sélectionné

| Propriété | Valeur |
|-----------|--------|
| Background | #FFFFFF |
| Border | 1px solid #E5E7EB |
| Checkbox | 16×16px, empty |
| Hauteur | 60px |

### 5.3 Structure item

| Élément | Style |
|---------|-------|
| Checkbox | Gauche, 16×16px |
| Nom | Font-weight 500, font-size 12px |
| Email + Groupe | Font-size 10px, muted |

### 5.4 Données exemple

| Sélection | Nom | Email | Groupe |
|-----------|-----|-------|--------|
| ✓ | admin-user | admin@example.com | ADMIN |
| ✓ | developer-1 | dev1@example.com | DEFAULT |
| ☐ | operator | operator@example.com | DEFAULT |
| ☐ | support-user | support@example.com | REGULAR |
| ☐ | viewer | viewer@example.com | NONE |

---

## 6. FOOTER MODAL

| Élément | Style | Position |
|---------|-------|----------|
| Compteur | "2 identités sélectionnées" | Gauche |
| Annuler | Outline, 100×36px | Centre-droite |
| Ajouter | Primary, 106×36px | Droite |

---

## 7. APIS & ENDPOINTS

### 7.1 Lister les utilisateurs disponibles

```
GET /me/identity/user
```

### 7.2 Lister les groupes disponibles

```
GET /me/identity/group
```

### 7.3 Lister les comptes de service

```
GET /me/api/credential?type=oauth2
```

### 7.4 Ajouter des identités à la politique

```
POST /me/iam/policy/{policyId}/identity
```

Body:
```json
{
  "identities": [
    "urn:v1:eu:identity:user:xx12345-ovh/admin-user",
    "urn:v1:eu:identity:user:xx12345-ovh/developer-1"
  ]
}
```

---

## 8. TRADUCTIONS (i18n)

| Clé | Valeur FR |
|-----|-----------|
| `iam_add_identity_title` | Ajouter des identités |
| `iam_add_identity_search` | Rechercher par nom, email ou URN... |
| `iam_add_identity_tab_users` | Utilisateurs locaux |
| `iam_add_identity_tab_groups` | Groupes |
| `iam_add_identity_tab_service` | Comptes de service |
| `iam_add_identity_selected` | identités sélectionnées |
| `iam_add_identity_cancel` | Annuler |
| `iam_add_identity_submit` | Ajouter |
