# Cahier des Charges : iam/components/service-account-identities

## 1. VUE D'ENSEMBLE

| Champ | Valeur |
|-------|--------|
| **Fichier SVG** | old_manager.iam.components.service-account-identities.svg |
| **NAV1** | iam |
| **NAV2** | policies |
| **Type** | Composant réutilisable |
| **Description** | Composant de gestion des comptes de service dans les politiques IAM |

---

## 2. LAYOUT

| Zone | Valeur |
|------|--------|
| Type | Page avec LEFT PANEL |
| LEFT PANEL | 280px |
| RIGHT PANEL | 1096×765px |

---

## 3. RIGHT PANEL

### 3.1 Header

| Titre | Identités |
| Font-size | 18px |
| Font-weight | 600 |
| Description | Sélectionnez les identités que vous souhaitez associer à cette politique |

---

## 4. SECTION COMPTES DE SERVICE

### 4.1 Header section

| Titre | Comptes de service |
| Font-size | 13px |
| Font-weight | 600 |

### 4.2 Tableau

| Colonne | Largeur |
|---------|---------|
| ▶/▼ (expand) | 20px |
| Nom | 322px |
| ID Client | 670px |
| ⋮ | 44px |

### 4.3 Header tableau

| Propriété | Valeur |
|-----------|--------|
| Background | #F9FAFB |
| Hauteur | 36px |

---

## 5. DONNÉES EXEMPLE

| Expand | Nom | ID Client |
|--------|-----|-----------|
| ▶ | api-automation | a1b2c3d4-e5f6-7890-abcd-ef1234567890 |
| ▼ | ci-cd-pipeline | 9f8e7d6c-5b4a-3210-fedc-ba0987654321 |
| ▶ | monitoring-agent | abc12345-6789-0def-ghij-klmnopqrstuv |

### 5.1 Détails déployés (ci-cd-pipeline)

| Champ | Valeur |
|-------|--------|
| Background | #F9FAFB |
| Hauteur | 70px |
| Identité | urn:v1:eu:identity:credential:xx12345-ovh/oauth2-9f8e7d6c |
| Description | Pipeline CI/CD pour déploiement automatique |
| Flow | CLIENT_CREDENTIALS |

---

## 6. MENU ACTIONS

| Dimensions | 130×50px |
| Shadow | drop-shadow(0 2px 8px rgba(0,0,0,0.1)) |

| Option | Couleur |
|--------|---------|
| Supprimer | #DC2626 |

---

## 7. SECTION AUTRES COMPTES (état vide)

| Titre | Autres comptes OVHcloud |
| État | Aucun compte sélectionné (#DBEAFE) |

---

## 8. PAGINATION

| Position | Centrée |
| Style | ◀ [1] ▶ |

---

## 9. APIS & ENDPOINTS

### 9.1 Lister les comptes de service de la politique

```
GET /me/iam/policy/{policyId}/identity?type=credential
```

Response:
```json
[
  {
    "name": "api-automation",
    "clientId": "a1b2c3d4-e5f6-7890-abcd-ef1234567890",
    "description": "API Automation service",
    "flow": "CLIENT_CREDENTIALS",
    "urn": "urn:v1:eu:identity:credential:xx12345-ovh/oauth2-a1b2c3d4"
  }
]
```

### 9.2 Supprimer un compte de service de la politique

```
DELETE /me/iam/policy/{policyId}/identity/{identityUrn}
```

---

## 10. TRADUCTIONS (i18n)

| Clé | Valeur FR |
|-----|-----------|
| `iam_service_account_title` | Identités |
| `iam_service_account_subtitle` | Sélectionnez les identités que vous souhaitez associer à cette politique |
| `iam_service_account_section` | Comptes de service |
| `iam_service_account_col_name` | Nom |
| `iam_service_account_col_clientid` | ID Client |
| `iam_service_account_detail_urn` | Identité |
| `iam_service_account_detail_desc` | Description |
| `iam_service_account_detail_flow` | Flow |
| `iam_service_account_remove` | Supprimer |
| `iam_service_account_empty` | Aucun compte sélectionné |
