# Cahier des Charges : iam/components/create-condition-modal

## 1. VUE D'ENSEMBLE

| Champ | Valeur |
|-------|--------|
| **Fichier SVG** | old_manager.iam.components.create-condition-modal.svg |
| **NAV1** | iam |
| **NAV2** | policies |
| **Type** | Modal |
| **Description** | Modal de sélection du type de condition à créer |

---

## 2. MODAL

### 2.1 Dimensions

| Propriété | Valeur |
|-----------|--------|
| Largeur | 600px |
| Hauteur | 500px |
| Position | Centrée (x: 420, y: 150) |
| Border radius | 8px |
| Shadow | drop-shadow(0 4px 20px rgba(0,0,0,0.15)) |

### 2.2 Overlay

| Propriété | Valeur |
|-----------|--------|
| Background | rgba(0, 0, 0, 0.5) |

---

## 3. HEADER MODAL

| Propriété | Valeur |
|-----------|--------|
| Hauteur | 60px |
| Titre | Configurez vos conditions |
| Font-size | 18px |
| Font-weight | 600 |
| Bouton fermer | × (position droite) |

---

## 4. CONTENU

### 4.1 Champ Type de condition

| Label | Type de condition |
| Type | Select dropdown avec recherche |
| Dimensions | 552×36px |
| Valeur affichée | Tag |

### 4.2 Dropdown types de condition

| Dimensions | 552×180px |
| Shadow | drop-shadow(0 2px 8px rgba(0,0,0,0.1)) |

### 4.3 Options disponibles

| Option | Sélection |
|--------|-----------|
| Tag | ✓ (selected, background #E8F0FE) |
| Nom | |
| Adresse IP | |
| Jour de la semaine | |
| Date | |
| Heure | |
| Type de produit | |

### 4.4 Champ Opérateur

| Label | Opérateur |
| Type | Select dropdown |
| Dimensions | 552×36px |
| Placeholder | Sélectionnez un opérateur |
| État | Disabled tant que le type n'est pas choisi |

### 4.5 Bannière d'information

| Dimensions | 552×40px |
| Background | #DBEAFE |
| Texte | Le contenu du formulaire dépend du type de condition sélectionné |
| Font-size | 11px |
| Couleur texte | #1E40AF |

---

## 5. FOOTER MODAL

| Bouton | Style | Dimensions | Position |
|--------|-------|------------|----------|
| Annuler | Outline | 100×36px | Centre-droite |
| Configurer | Primary (disabled) | 106×36px | Droite |

---

## 6. COMPORTEMENT

### 6.1 Workflow

1. L'utilisateur sélectionne un type de condition
2. Le dropdown opérateur s'active avec les options appropriées
3. Les champs spécifiques au type apparaissent
4. Le bouton Configurer devient actif

### 6.2 Types de conditions disponibles

| Type | Champs spécifiques |
|------|-------------------|
| Tag | Clé, Valeur |
| Nom | Nom (texte) |
| Adresse IP | IPs (liste) |
| Jour de la semaine | Jours (multi-select) |
| Date | Date (picker), Timezone |
| Heure | Heure, Timezone |
| Type de produit | Types (multi-select) |

---

## 7. APIS & ENDPOINTS

### 7.1 Créer une condition

```
POST /me/iam/policy/{policyId}/condition
```

Body varie selon le type sélectionné.

### 7.2 Lister les types de condition

```
GET /me/iam/policy/conditionType
```

Response:
```json
[
  {"id": "tag", "label": "Tag"},
  {"id": "name", "label": "Nom"},
  {"id": "ip", "label": "Adresse IP"},
  {"id": "dayOfWeek", "label": "Jour de la semaine"},
  {"id": "date", "label": "Date"},
  {"id": "hour", "label": "Heure"},
  {"id": "productType", "label": "Type de produit"}
]
```

---

## 8. TRADUCTIONS (i18n)

| Clé | Valeur FR |
|-----|-----------|
| `iam_condition_create_title` | Configurez vos conditions |
| `iam_condition_create_type_label` | Type de condition |
| `iam_condition_create_type_tag` | Tag |
| `iam_condition_create_type_name` | Nom |
| `iam_condition_create_type_ip` | Adresse IP |
| `iam_condition_create_type_weekday` | Jour de la semaine |
| `iam_condition_create_type_date` | Date |
| `iam_condition_create_type_hour` | Heure |
| `iam_condition_create_type_product` | Type de produit |
| `iam_condition_create_operator` | Opérateur |
| `iam_condition_create_operator_placeholder` | Sélectionnez un opérateur |
| `iam_condition_create_info` | Le contenu du formulaire dépend du type de condition sélectionné |
| `iam_condition_create_cancel` | Annuler |
| `iam_condition_create_submit` | Configurer |
