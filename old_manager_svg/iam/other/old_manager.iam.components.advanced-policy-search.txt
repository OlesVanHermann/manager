# Cahier des Charges : iam/components/advanced-policy-search

## 1. VUE D'ENSEMBLE

| Champ | Valeur |
|-------|--------|
| **Fichier SVG** | old_manager.iam.components.advanced-policy-search.svg |
| **NAV1** | iam |
| **NAV2** | policies |
| **Type** | Modal |
| **Description** | Modal de recherche avancée de politiques avec filtres multiples |

---

## 2. MODAL

### 2.1 Dimensions

| Propriété | Valeur |
|-----------|--------|
| Largeur | 800px |
| Hauteur | 720px |
| Position | Centrée (x: 320, y: 80) |
| Border radius | 8px |
| Shadow | drop-shadow(0 4px 20px rgba(0,0,0,0.15)) |

### 2.2 Overlay

| Propriété | Valeur |
|-----------|--------|
| Background | rgba(0, 0, 0, 0.5) |

---

## 3. HEADER MODAL

| Propriété | Valeur |
|-----------|--------|
| Hauteur | 60px |
| Titre | Rechercher les politiques |
| Font-size | 18px |
| Font-weight | 600 |
| Bouton fermer | × (position droite) |

---

## 4. SECTIONS DE FILTRES

### 4.1 Section Identités

| Propriété | Valeur |
|-----------|--------|
| Checkbox | 16×16px, checked = #0050D7 |
| Titre | Identités |
| Compteur | (2) |
| État | Sélectionné |

### 4.2 Collapsible Utilisateurs locaux

| Propriété | Valeur |
|-----------|--------|
| Dimensions | 732×40px |
| Background | #F9FAFB |
| Titre | Sélectionner des utilisateurs locaux |
| État | Ouvert (▼) |

### 4.3 Barre de recherche utilisateurs

| Dimensions | 700×32px |
| Placeholder | Rechercher par nom ou email |

### 4.4 Liste utilisateurs (checkboxes)

| Utilisateur | Email | Groupe | Sélection |
|-------------|-------|--------|-----------|
| admin-user | admin@example.com | ADMIN | ✓ |
| operator-user | operator@example.com | DEFAULT | ✓ |

### 4.5 Collapsible Groupes d'utilisateurs

| État | Fermé (►) |
| Titre | Sélectionner des groupes d'utilisateurs |

### 4.6 Section Ressources

| Checkbox | Non sélectionné |
| Titre | Ressources |
| Compteur | (0) |

### 4.7 Section Actions

| Checkbox | Non sélectionné |
| Titre | Actions |
| Compteur | (0) |

### 4.8 URN Search

| État | Fermé (►) |
| Titre | Rechercher un compte client OVHcloud |

---

## 5. FOOTER MODAL

| Bouton | Style | Dimensions | Position |
|--------|-------|------------|----------|
| Annuler | Outline | 100×36px | Centre-droite |
| Rechercher | Primary | 116×36px | Droite |

---

## 6. APIS & ENDPOINTS

### 6.1 Rechercher des politiques

```
POST /me/iam/policy/search
```

Body:
```json
{
  "identities": [
    "urn:v1:eu:identity:user:xx12345-ovh/admin-user",
    "urn:v1:eu:identity:user:xx12345-ovh/operator-user"
  ],
  "resources": [],
  "actions": []
}
```

### 6.2 Lister les utilisateurs

```
GET /me/identity/user
```

### 6.3 Lister les groupes

```
GET /me/identity/group
```

---

## 7. TRADUCTIONS (i18n)

| Clé | Valeur FR |
|-----|-----------|
| `iam_policy_search_title` | Rechercher les politiques |
| `iam_policy_search_identities` | Identités |
| `iam_policy_search_users_local` | Sélectionner des utilisateurs locaux |
| `iam_policy_search_users_search` | Rechercher par nom ou email |
| `iam_policy_search_groups` | Sélectionner des groupes d'utilisateurs |
| `iam_policy_search_resources` | Ressources |
| `iam_policy_search_actions` | Actions |
| `iam_policy_search_account` | Rechercher un compte client OVHcloud |
| `iam_policy_search_cancel` | Annuler |
| `iam_policy_search_submit` | Rechercher |
