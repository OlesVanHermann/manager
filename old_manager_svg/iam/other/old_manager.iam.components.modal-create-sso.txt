# Cahier des Charges : iam/components/modal-create-sso

## 1. VUE D'ENSEMBLE

| Champ | Valeur |
|-------|--------|
| **Fichier SVG** | old_manager.iam.components.modal-create-sso.svg |
| **NAV1** | iam |
| **NAV2** | components |
| **Type** | Modal |
| **Description** | Modal de configuration d'un fournisseur SSO (SAML 2.0) |

---

## 2. MODAL

### 2.1 Dimensions

| Propriété | Valeur |
|-----------|--------|
| Largeur | 700px |
| Hauteur | 560px |
| Position | Centrée (x: 370, y: 120) |
| Border radius | 8px |
| Shadow | drop-shadow(0 4px 20px rgba(0,0,0,0.15)) |

### 2.2 Overlay

| Propriété | Valeur |
|-----------|--------|
| Background | rgba(0, 0, 0, 0.5) |

---

## 3. HEADER MODAL

| Propriété | Valeur |
|-----------|--------|
| Hauteur | 60px |
| Titre | Configurer un fournisseur SSO |
| Font-size | 18px |
| Font-weight | 600 |
| Bouton fermer | × (position droite) |

---

## 4. CONTENU

### 4.1 Bannière d'information

| Propriété | Valeur |
|-----------|--------|
| Dimensions | 652×50px |
| Background | #DBEAFE |
| Texte | Le SSO (Single Sign-On) permet à vos utilisateurs de se connecter avec leur fournisseur d'identité externe (SAML 2.0). |
| Font-size | 11px |
| Couleur texte | #1E40AF |

### 4.2 Champ URL du service SSO

| Label | URL du service SSO (Metadata URL) * |
| Type | Input text |
| Dimensions | 652×36px |
| Placeholder | https://idp.example.com/saml2/metadata |
| Required | Oui |

### 4.3 Champ Entity ID

| Label | Entity ID |
| Type | Input text |
| Dimensions | 652×36px |
| Placeholder | https://idp.example.com/entity |

### 4.4 Champ Certificat X.509

| Label | Certificat X.509 (PEM) |
| Type | Textarea |
| Dimensions | 652×100px |
| Font | Monospace |
| Placeholder | -----BEGIN CERTIFICATE----- ... -----END CERTIFICATE----- |

### 4.5 Toggle provisionnement automatique

| Label | Provisionnement automatique des utilisateurs |
| Type | Toggle switch |
| Dimensions toggle | 44×22px |
| État par défaut | Actif (checked) |
| Description | Activer la création automatique des utilisateurs lors de la première connexion |

---

## 5. FOOTER MODAL

| Bouton | Style | Dimensions | Position |
|--------|-------|------------|----------|
| Annuler | Outline | 100×36px | Centre-droite |
| Configurer | Primary | 106×36px | Droite |

---

## 6. APIS & ENDPOINTS

### 6.1 Configurer un fournisseur SSO

```
POST /me/identity/sso
```

Body:
```json
{
  "metadataUrl": "https://idp.example.com/saml2/metadata",
  "entityId": "https://idp.example.com/entity",
  "certificate": "-----BEGIN CERTIFICATE-----...",
  "autoProvisionUsers": true
}
```

### 6.2 Valider la configuration SSO

```
POST /me/identity/sso/test
```

---

## 7. VALIDATION

| Champ | Règle |
|-------|-------|
| URL Metadata | URL valide commençant par https:// |
| Entity ID | URL ou URN valide |
| Certificat | Format PEM valide |

---

## 8. TRADUCTIONS (i18n)

| Clé | Valeur FR |
|-----|-----------|
| `iam_sso_create_title` | Configurer un fournisseur SSO |
| `iam_sso_create_info` | Le SSO (Single Sign-On) permet à vos utilisateurs de se connecter avec leur fournisseur d'identité externe (SAML 2.0). |
| `iam_sso_create_url_label` | URL du service SSO (Metadata URL) |
| `iam_sso_create_entity_label` | Entity ID |
| `iam_sso_create_cert_label` | Certificat X.509 (PEM) |
| `iam_sso_create_provision_label` | Provisionnement automatique des utilisateurs |
| `iam_sso_create_provision_desc` | Activer la création automatique des utilisateurs lors de la première connexion |
| `iam_sso_create_cancel` | Annuler |
| `iam_sso_create_submit` | Configurer |
