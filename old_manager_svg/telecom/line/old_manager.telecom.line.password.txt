# Cahier des Charges : telecom/line - Mot de passe SIP

## 1. RESUME EXECUTIF

### Perimetre
Modification du mot de passe SIP utilise pour l'authentification de la ligne sur le reseau.

### Objectif fonctionnel
- Changer le mot de passe SIP de la ligne
- Afficher l'indicateur de force du mot de passe
- Valider les regles de securite

### Users cibles
- Administrateurs telephonie
- Techniciens configurant les equipements

---

## 2. ARCHITECTURE

### Route Angular
```
telecom.telephony.billingAccount.line.dashboard.management.password
```

### Params URL
- `billingAccount` : Identifiant groupe facturation
- `serviceName` : Numero de ligne

---

## 3. PAGES & NAVIGATION

### Page principale
- **Titre** : "Mot de passe SIP"
- **Lien retour** : "Retour a la gestion de la ligne"
- **Breadcrumb** : Telecom > Telephonie > {billingAccount} > {serviceName} > Gestion > Mot de passe

---

## 4. COMPOSANTS UI

### Zone information
| Composant | Description |
|-----------|-------------|
| Info box | Explications sur le mot de passe SIP |
| Texte 1 | "Le mot de passe SIP permet d'authentifier votre ligne sur le reseau." |
| Texte 2 | "Modification effective immediatement." |
| Texte 3 | "Pensez a reconfigurer votre equipement." |

### Formulaire
| Champ | Type | Description |
|-------|------|-------------|
| Mot de passe | Input password | Nouveau mot de passe |
| Icone oeil | Toggle | Afficher/masquer |
| Indicateur force | Progress bar | 3 segments colores |
| Regles | Checklist | Validation en temps reel |

### Indicateur de force
| Niveau | Couleur | Segments |
|--------|---------|----------|
| Faible | Rouge #EF4444 | 1/3 |
| Moyen | Orange #F59E0B | 2/3 |
| Fort | Vert #10B981 | 3/3 |

### Regles mot de passe (checklist)
| Regle | Validation |
|-------|------------|
| Au moins 8 caracteres | check vert si OK |
| Au moins une majuscule | check vert si OK |
| Au moins une minuscule | check vert si OK |
| Au moins un chiffre | check vert si OK |
| Au moins un caractere special | check vert si OK |

### Actions
| Element | Type | Description |
|---------|------|-------------|
| Lien bulk | Link | "Appliquer a plusieurs lignes..." |
| Bouton Valider | Primary | Enregistre le mot de passe |
| Lien Annuler | Link | Reset formulaire |

---

## 5. APIS & DONNEES

### Endpoints

#### Changer mot de passe
```
POST /telephony/{billingAccount}/line/{serviceName}/changePassword
    Body: { password: string }
```

### Validation
| Regle | Contrainte |
|-------|------------|
| Longueur minimum | 8 caracteres |
| Longueur maximum | 20 caracteres |
| Majuscule | Au moins 1 |
| Minuscule | Au moins 1 |
| Chiffre | Au moins 1 |
| Special | Au moins 1 parmi !@#$%^&*... |

---

## 6. TRADUCTIONS (i18n)

### Cles principales
```json
{
  "telephony_line_password_title": "Mot de passe SIP",
  "telephony_line_password_info_1": "Le mot de passe SIP permet d'authentifier votre ligne sur le reseau.",
  "telephony_line_password_info_2": "Cette modification sera effective immediatement.",
  "telephony_line_password_info_3": "Pensez a reconfigurer votre equipement avec le nouveau mot de passe.",
  "telephony_line_password_label": "Nouveau mot de passe SIP",
  "telephony_line_password_strength_weak": "Force : Faible",
  "telephony_line_password_strength_medium": "Force : Moyen",
  "telephony_line_password_strength_strong": "Force : Excellent",
  "telephony_line_password_rules_title": "Regles du mot de passe :",
  "telephony_line_password_rule_length": "Au moins 8 caracteres",
  "telephony_line_password_rule_upper": "Au moins une majuscule",
  "telephony_line_password_rule_lower": "Au moins une minuscule",
  "telephony_line_password_rule_digit": "Au moins un chiffre",
  "telephony_line_password_rule_special": "Au moins un caractere special",
  "telephony_line_password_bulk": "Appliquer a plusieurs lignes...",
  "telephony_line_password_submit": "Valider",
  "telephony_line_password_cancel": "Annuler",
  "telephony_line_password_success": "Mot de passe modifie avec succes.",
  "telephony_line_password_error": "Erreur lors de la modification."
}
```

---

## 7. REGLES METIER

### Securite
- Mot de passe jamais affiche en clair (sauf toggle)
- Validation cote client ET serveur
- Pas d'historique des anciens mots de passe

### Impact changement
- Effectif immediatement
- Telephone/equipement deconnecte
- Reconfiguration necessaire

### Cas d'usage
- Securisation apres compromission
- Configuration nouveau terminal
- Rotation periodique

---

## NOTES IMPLEMENTATION NEW_MANAGER

### Mapping composants ODS
| Element actuel | Composant ODS |
|----------------|---------------|
| Info box | OsdsMessage variant="info" |
| Input password | OsdsInput type="password" |
| Toggle visibilite | OsdsIcon clickable |
| Progress bar force | OsdsProgressBar |
| Checklist | Liste avec OsdsIcon check |
| Bouton primary | OsdsButton variant="primary" |

### Points d'attention
- Validation temps reel des regles
- Calcul dynamique de la force
- Affichage/masquage du mot de passe
- Support bulk actions
