# Cahier des Charges : telecom/line - Options messagerie vocale

## 1. RESUME EXECUTIF

### Perimetre
Page de configuration des options de la messagerie vocale.

### Objectif fonctionnel
- Configurer l'enregistrement
- Gerer les notifications email
- Personnaliser les parametres

---

## 2. LAYOUT

### Structure page avec cartes enregistrement + email + parametres

---

## 3. COMPOSANTS UI

### Header page
| Element | Description |
|---------|-------------|
| Titre | Options de la messagerie vocale |

### Carte Enregistrement
| Element | Description |
|---------|-------------|
| Toggle | Activer l'enregistrement |
| Message accueil | Type + fichier audio |
| Bouton supprimer | Supprime message actuel |
| Zone upload | Drag & drop fichier |

### Toggle switch
| Etat | Style |
|------|-------|
| Off | Fond gris, cercle gauche |
| On | Fond bleu, cercle droite |

### Message accueil
| Element | Description |
|---------|-------------|
| Label | Type: Accueil personnalise |
| Fichier | Nom du fichier .wav |
| Bouton | Supprimer (rouge) |

### Zone upload
| Element | Description |
|---------|-------------|
| Style | Bordure pointillee |
| Texte | Telecharger un fichier |
| Formats | wav, mp3, m4a, aac, ogg |

### Carte Notifications email
| Element | Description |
|---------|-------------|
| Liste emails | Email + type + supprimer |
| Formulaire | Ajout nouvel email |

### Ligne email
| Element | Description |
|---------|-------------|
| Email | Adresse email |
| Type | Piece jointe / Notification simple |
| Supprimer | Icone poubelle rouge |

### Formulaire ajout email
| Champ | Description |
|-------|-------------|
| Email | Input text |
| Type | Select (Piece jointe/Notification) |
| Boutons | Ajouter / Annuler |

### Carte Parametres notifications
| Element | Description |
|---------|-------------|
| Format audio | Select (MP3, WAV) |
| Conserver message | Toggle |
| Nom expediteur | Input text |
| Email expediteur | Input text |

---

## 4. APIS & DONNEES

### Endpoints
```
GET /telephony/{billingAccount}/line/{serviceName}/voicemail/settings
PUT /telephony/{billingAccount}/line/{serviceName}/voicemail/settings
POST /telephony/{billingAccount}/line/{serviceName}/voicemail/greeting
DELETE /telephony/{billingAccount}/line/{serviceName}/voicemail/greeting
GET /telephony/{billingAccount}/line/{serviceName}/voicemail/emails
POST /telephony/{billingAccount}/line/{serviceName}/voicemail/emails
DELETE /telephony/{billingAccount}/line/{serviceName}/voicemail/emails/{id}
```

### Modele
```typescript
interface VoicemailSettings {
  recordingEnabled: boolean;
  greetingType: 'default' | 'custom';
  greetingFile?: string;
  audioFormat: 'mp3' | 'wav';
  keepOnServer: boolean;
  senderName: string;
  senderEmail: string;
}

interface VoicemailEmail {
  id: string;
  email: string;
  type: 'attachment' | 'notification';
}
```

---

## 5. TRADUCTIONS (i18n)

```json
{
  "line_vm_options_title": "Options de la messagerie vocale",
  "line_vm_recording": "Enregistrement",
  "line_vm_recording_enable": "Activer l'enregistrement",
  "line_vm_greeting": "Message d'accueil",
  "line_vm_greeting_type": "Type",
  "line_vm_greeting_custom": "Accueil personnalise",
  "line_vm_greeting_delete": "Supprimer",
  "line_vm_upload": "Telecharger un fichier",
  "line_vm_upload_formats": "Formats : wav, mp3, m4a, aac, ogg",
  "line_vm_emails": "Notifications par email",
  "line_vm_email_attachment": "Piece jointe",
  "line_vm_email_notification": "Notification simple",
  "line_vm_email_add": "Ajouter un email",
  "line_vm_settings": "Parametres des notifications",
  "line_vm_format": "Format audio",
  "line_vm_keep": "Conserver le message sur le serveur",
  "line_vm_sender_name": "Nom de l'expediteur",
  "line_vm_sender_email": "Email de l'expediteur",
  "line_vm_save": "Enregistrer",
  "line_vm_add": "Ajouter",
  "line_vm_cancel": "Annuler"
}
```

---

## 6. REGLES METIER

- Formats audio: wav, mp3, m4a, aac, ogg
- Taille max fichier: 5 Mo
- Max 5 emails de notification
- Piece jointe = message audio inclus
- Notification = alerte seule
