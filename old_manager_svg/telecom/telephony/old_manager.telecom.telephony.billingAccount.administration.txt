# CAHIER DES CHARGES - old_manager.telecom.telephony.billingAccount.administration
# Administration d'un groupe de facturation

## 1. RESUME EXECUTIF

### Perimetre
Section administration et parametrage d'un groupe de facturation VoIP.

### Objectif fonctionnel
Gerer les options du groupe, portabilites, regroupements de lignes.

### Users cibles
- Administrateurs VoIP
- Gestionnaires IT

---

## 2. ARCHITECTURE

### Arborescence fichiers source
```
telecom/telephony/billingAccount/administration/
├── administration.module.js
├── administration.routing.js
├── optionsGroup/
├── linesGroup/
├── addGroup/
├── deleteGroup/
├── portabilities/
├── white-label-manager/
└── translations/Messages_fr_FR.json
```

### Sous-modules
| Module | Description |
|--------|-------------|
| optionsGroup | Options du groupe |
| linesGroup | Regroupement de lignes |
| addGroup | Ajouter un groupe |
| deleteGroup | Supprimer le groupe |
| portabilities | Portabilites en cours |
| white-label-manager | Manager marque blanche |

---

## 3. PAGES & NAVIGATION

### Route
- State: `telecom.telephony.billingAccount.administration`
- URL: `/telephony/{billingAccount}/administration`

### Breadcrumb
VoIP > {billingAccount} > Administration

### Actions disponibles
| Action | Cle traduction | Route |
|--------|----------------|-------|
| Options du groupe | telephony_group_admin_actions_group_billing_options | .optionsGroup |
| Regroupement lignes | telephony_group_admin_actions_group_lines_group_change | .linesGroup |
| Ajouter groupe | telephony_group_admin_actions_group_new_billing_account | .addGroup |
| Supprimer groupe | telephony_group_admin_actions_group_delete_billing_account | .deleteGroup |
| Portabilites | telephony_group_admin_actions_portabilities | .portabilities |
| Marque blanche | telephony_group_admin_actions_white_label_manager | .whiteLabelManager |

---

## 4. COMPOSANTS UI

### Menu Administration
- Liste des actions avec icones
- Acces conditionnel selon droits

### Section Options Groupe
- Description editable
- Parametres de notification
- Configuration alertes

### Section Portabilites
- Liste portabilites en cours
- Statut de chaque portabilite
- Actions (annuler, relancer)

---

## 5. APIs & DONNEES

### Endpoints

#### Mise a jour groupe
```
PUT /telephony/{billingAccount}
Body: { description: string, ... }
```

#### Changement contacts
```
POST /telephony/{billingAccount}/changeContact
Body: {
  contactAdmin: string,
  contactBilling: string,
  contactTech: string
}
```

#### Liste portabilites
```
GET /telephony/{billingAccount}/portability
Response: Array<number> (portability IDs)
```

#### Detail portabilite
```
GET /telephony/{billingAccount}/portability/{id}
Response: {
  id: number,
  status: string,
  numbersList: Array<string>,
  ...
}
```

#### Annuler portabilite
```
POST /telephony/{billingAccount}/portability/{id}/cancel
```

#### Relancer portabilite
```
POST /telephony/{billingAccount}/portability/{id}/relaunch
Body: { portal: string }
```

---

## 6. TRADUCTIONS

### Cles i18n (FR)
| Cle | Valeur FR |
|-----|-----------|
| telephony_group_admin_breadcrumb | Administration |
| telephony_group_admin_actions_group_billing_options | Options du groupe |
| telephony_group_admin_actions_group_lines_group_change | Regroupement de lignes |
| telephony_group_admin_actions_group_new_billing_account | Ajouter un groupe |
| telephony_group_admin_actions_group_delete_billing_account | Supprimer le groupe |
| telephony_group_admin_actions_portabilities | Portabilites en cours |
| telephony_group_admin_actions_white_label_manager | Manager marque blanche |
| telephony_group_admin_group_back_link | Retour a l'administration de groupe |

---

## 7. REGLES METIER

### Suppression groupe
- Possible uniquement si aucun service actif
- Demande confirmation

### Portabilites
- Annulation possible si canBeCancelled = true
- Relance possible selon statut

### Marque blanche
- Fonctionnalite revendeur uniquement
- Necessite droits specifiques
