# Cahier des Charges : telecom/telephony - Gestion appels ligne

## 1. RESUME EXECUTIF

### Perimetre
Page principale de gestion des appels d'une ligne VoIP.

### Objectif fonctionnel
- Acceder aux fonctionnalites d'appels
- Voir l'etat des configurations
- Gerer les plages horaires

---

## 2. LAYOUT

### Structure page avec onglets et grille de cartes fonctionnalites

---

## 3. COMPOSANTS UI

### Header page
| Element | Description |
|---------|-------------|
| Retour | ← Retour a la gestion des appels |
| Titre | Gestion des appels |
| Sous-titre | Ligne XXXXXXXXXXXX |

### Onglets principaux
| Onglet | Etat |
|--------|------|
| Gestion | Inactif |
| Consommation | Inactif |
| Gestion des appels | Actif (bleu) |
| Gestion des musiques | Inactif |
| Softphone | Inactif |

### Cartes fonctionnalites (grille 3x3)
| Carte | Description | Statut |
|-------|-------------|--------|
| Renvoi d'appel | Redirigez vos appels | Badge Configure (vert) |
| Verrouillage appels | Bloquez appels sortants | Badge Desactive (rouge) |
| Presentation numero | Numero affiche sortant | Numero affiche |
| Filtrage d'appels | Liste blanche/noire | Badge X regles actives (jaune) |
| Appels simultanes | Nombre max simultanes | Nombre affiché |
| Double appel | Double appel et intercom | Badge Active (vert) |
| Numeros abreges | Raccourcis frequents | Compteur configures |
| Click2Call | Appel depuis navigateur | Badge Active (vert) |
| Numero externe | Presentation externe | Badge Non configure (rouge) |

### Carte fonctionnalite
| Element | Description |
|---------|-------------|
| Icone | Emoji descriptif |
| Titre | Nom fonctionnalite |
| Description | 2 lignes texte gris |
| Statut | Badge ou valeur |

### Badges statut
| Type | Style |
|------|-------|
| Configure / Active | Fond vert, texte vert |
| Desactive / Non configure | Fond rouge, texte rouge |
| X regles actives | Fond jaune, texte orange |

### Section Plages horaires
| Element | Description |
|---------|-------------|
| Titre section | Plages horaires |
| Description | Regles de renvoi selon horaires |

### Carte plages horaires
| Element | Description |
|---------|-------------|
| Info | Zone bleue avec conseil |
| Lien 1 | Gerer les plages horaires → |
| Lien 2 | Gerer les fermetures exceptionnelles → |

---

## 4. APIS & DONNEES

### Endpoints
```
GET /telephony/{billingAccount}/line/{serviceName}/options
GET /telephony/{billingAccount}/line/{serviceName}/forward
GET /telephony/{billingAccount}/line/{serviceName}/simultaneousChannels
GET /telephony/{billingAccount}/line/{serviceName}/click2Call
GET /telephony/{billingAccount}/line/{serviceName}/abbreviatedNumber
GET /telephony/{billingAccount}/line/{serviceName}/timeCondition
```

### Modele LineCallsConfig
```typescript
interface LineCallsConfig {
  forward: {
    enabled: boolean;
    configured: boolean;
  };
  callLock: {
    enabled: boolean;
  };
  callerIdDisplay: string;
  filtering: {
    rulesCount: number;
  };
  simultaneousCalls: number;
  callWaiting: boolean;
  abbreviatedNumbers: number;
  click2Call: boolean;
  externalNumber: {
    configured: boolean;
  };
}
```

---

## 5. TRADUCTIONS (i18n)

```json
{
  "telephony_calls_title": "Gestion des appels",
  "telephony_calls_back": "Retour a la gestion des appels",
  "telephony_calls_forward": "Renvoi d'appel",
  "telephony_calls_forward_desc": "Redirigez vos appels vers un autre numero",
  "telephony_calls_lock": "Verrouillage appels",
  "telephony_calls_lock_desc": "Bloquez les appels sortants vers certaines destinations",
  "telephony_calls_display": "Presentation numero",
  "telephony_calls_display_desc": "Choisissez le numero affiche lors de vos appels sortants",
  "telephony_calls_filtering": "Filtrage d'appels",
  "telephony_calls_filtering_desc": "Filtrez les appels entrants par liste blanche/noire",
  "telephony_calls_simultaneous": "Appels simultanes",
  "telephony_calls_simultaneous_desc": "Nombre d'appels simultanes autorises sur la ligne",
  "telephony_calls_waiting": "Double appel",
  "telephony_calls_waiting_desc": "Double appel et intercom",
  "telephony_calls_abbreviated": "Numeros abreges",
  "telephony_calls_abbreviated_desc": "Configurez des raccourcis pour vos numeros frequents",
  "telephony_calls_click2call": "Click2Call",
  "telephony_calls_click2call_desc": "Appel en 1 clic depuis votre navigateur",
  "telephony_calls_external": "Numero externe",
  "telephony_calls_external_desc": "Presentation d'un numero externe",
  "telephony_calls_time": "Plages horaires",
  "telephony_calls_time_desc": "Configurez des regles de renvoi selon les plages horaires",
  "telephony_calls_time_tip": "Cliquez & glissez sur l'agenda pour creer une plage horaire",
  "telephony_calls_time_manage": "Gerer les plages horaires",
  "telephony_calls_closures": "Gerer les fermetures exceptionnelles",
  "telephony_calls_status_configured": "Configure",
  "telephony_calls_status_enabled": "Active",
  "telephony_calls_status_disabled": "Desactive",
  "telephony_calls_status_not_configured": "Non configure",
  "telephony_calls_rules_active": "regles actives",
  "telephony_calls_max": "appels max"
}
```

---

## 6. REGLES METIER

- Renvoi et filtrage configurables independamment
- Appels simultanes: 1-10 selon offre
- Click2Call necessite configuration SIP
- Plages horaires s'appliquent aux renvois
