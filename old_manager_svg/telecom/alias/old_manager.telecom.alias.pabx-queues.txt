# Cahier des Charges : telecom/alias - PABX Files d'attente

## 1. RESUME EXECUTIF

### Perimetre
Gestion des files d'attente du PABX.

### Objectif fonctionnel
- Creer des files d'attente
- Configurer la strategie de distribution
- Gerer les sons d'attente

---

## 2. LAYOUT

### Structure page avec liste files + configuration

---

## 3. COMPOSANTS UI

### Header
| Element | Description |
|---------|-------------|
| Titre | Files d'attente |
| Bouton | + Creer une file |

### Liste files
| Colonne | Description |
|---------|-------------|
| Nom | Identifiant file |
| Agents | Nombre d'agents |
| Strategie | Mode distribution |
| Actions | Configurer / Supprimer |

### Configuration file
| Section | Description |
|---------|-------------|
| General | Nom, strategie |
| Sons | Attente, debordement |
| Debordement | Actions si file pleine |

### Strategies distribution
| Strategie | Description |
|-----------|-------------|
| sequentiallyByAgentOrder | Sequentiel par ordre |
| ringAll | Tous en meme temps |
| random | Aleatoire |
| longestHangupAgent | Agent le plus disponible |
| roundRobin | Tour par tour |

### Sons configurables
| Son | Usage |
|-----|-------|
| onHold | Musique d'attente |
| onQueueWaitTimeUpdate | Annonce temps attente |
| onQueueAgentCallbackOffer | Rappel automatique |

### Footer
| Bouton | Type | Action |
|--------|------|--------|
| Enregistrer | Primary | Sauvegarde |
| Annuler | Default | Annule |

---

## 4. APIS & DONNEES

### Endpoints
```
GET /telephony/{billingAccount}/ovhPabx/{serviceName}/hunting/queue
GET /telephony/{billingAccount}/ovhPabx/{serviceName}/hunting/queue/{queueId}
POST /telephony/{billingAccount}/ovhPabx/{serviceName}/hunting/queue
PUT /telephony/{billingAccount}/ovhPabx/{serviceName}/hunting/queue/{queueId}
DELETE /telephony/{billingAccount}/ovhPabx/{serviceName}/hunting/queue/{queueId}
```

### Modele Queue
```typescript
interface OvhPabxHuntingQueue {
  queueId: number;
  description: string;
  strategy: string;
  maxWaitTime: number;
  maxMember: number;
  soundOnHold: number;
}
```

---

## 5. TRADUCTIONS (i18n)

```json
{
  "alias_pabx_queues_title": "Files d'attente",
  "alias_pabx_queues_create": "Creer une file",
  "alias_pabx_queues_name": "Nom de la file",
  "alias_pabx_queues_strategy": "Strategie",
  "alias_pabx_queues_agents": "Agents",
  "alias_pabx_queues_max_wait": "Temps max attente",
  "alias_pabx_queues_max_members": "Appels max en attente",
  "alias_pabx_queues_on_hold": "Musique d'attente"
}
```

---

## 6. REGLES METIER

- Une file doit avoir au moins 1 agent
- Temps max attente: 1800 secondes
- Strategie par defaut: sequentiel
- Debordement obligatoire si file pleine
