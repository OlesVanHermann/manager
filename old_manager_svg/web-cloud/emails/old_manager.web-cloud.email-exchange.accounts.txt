# Cahier des Charges : web-cloud/email-exchange - Comptes email

## 1. RESUME EXECUTIF

### Perimetre
Onglet de gestion des comptes email Exchange.

### Objectif fonctionnel
- Voir la liste des comptes
- Creer de nouveaux comptes
- Gerer les delegations et alias
- Modifier les mots de passe

---

## 2. LAYOUT

### Structure onglet avec bouton action + tableau pagine

---

## 3. COMPOSANTS UI

### Bouton action
| Element | Description |
|---------|-------------|
| Type | Primary |
| Texte | Ajouter un compte |

### Tableau comptes
| Colonne | Description |
|---------|-------------|
| Adresse email | Lien bleu cliquable |
| Nom d'affichage | Texte |
| Type | Badge Standard/Admin |
| Quota | Barre progression + texte |
| Statut | Badge Actif (vert) |
| Actions | Menu ⋮ |

### Types de compte
| Type | Badge |
|------|-------|
| Standard | Violet clair (#E0E7FF) |
| Admin | Bleu clair (#DBEAFE) |

### Barre quota
| Element | Description |
|---------|-------------|
| Type | Progress bar horizontale |
| Couleur | Bleu (#0050D7) |
| Texte | XX Go / YY Go |

### Menu actions (⋮)
| Option | Description |
|--------|-------------|
| Modifier le mot de passe | Change password |
| Configurer les delegations | Manage delegates |
| Gerer les alias | Manage aliases |
| Acceder a OWA | Open webmail |
| --- | Separateur |
| Supprimer | Destructif (rouge) |

### Pagination
| Element | Description |
|---------|-------------|
| Texte | Affichage X-Y sur Z comptes email |

---

## 4. APIS & DONNEES

### Endpoints
```
GET /email/exchange/{organization}/{service}/account
POST /email/exchange/{organization}/{service}/account
DELETE /email/exchange/{organization}/{service}/account/{email}
POST /email/exchange/{organization}/{service}/account/{email}/changePassword
GET /email/exchange/{organization}/{service}/account/{email}/alias
POST /email/exchange/{organization}/{service}/account/{email}/alias
GET /email/exchange/{organization}/{service}/account/{email}/sendAs
GET /email/exchange/{organization}/{service}/account/{email}/fullAccess
```

### Modele
```typescript
interface ExchangeAccount {
  primaryEmailAddress: string;
  displayName: string;
  firstName?: string;
  lastName?: string;
  accountType: 'standard' | 'admin';
  quota: number;
  usedQuota: number;
  state: 'ok' | 'inCreation' | 'suspended';
  hiddenFromAddressBook: boolean;
  outlookLicense: boolean;
}

interface ExchangeDelegation {
  accountId: number;
  allowedAccount: string;
  type: 'fullAccess' | 'sendAs' | 'sendOnBehalf';
}
```

---

## 5. TRADUCTIONS (i18n)

```json
{
  "exchange_accounts_title": "Comptes email",
  "exchange_accounts_add": "Ajouter un compte",
  "exchange_accounts_col_email": "Adresse email",
  "exchange_accounts_col_display": "Nom d'affichage",
  "exchange_accounts_col_type": "Type",
  "exchange_accounts_col_quota": "Quota",
  "exchange_accounts_col_status": "Statut",
  "exchange_accounts_type_standard": "Standard",
  "exchange_accounts_type_admin": "Admin",
  "exchange_accounts_status_active": "Actif",
  "exchange_accounts_action_password": "Modifier le mot de passe",
  "exchange_accounts_action_delegations": "Configurer les delegations",
  "exchange_accounts_action_aliases": "Gerer les alias",
  "exchange_accounts_action_owa": "Acceder a OWA",
  "exchange_accounts_action_delete": "Supprimer",
  "exchange_accounts_pagination": "Affichage de {start}-{end} sur {total} comptes email"
}
```

---

## 6. REGLES METIER

- 50 Go par compte standard
- Admin = droits d'administration Exchange
- Delegations: Full Access, Send As, Send On Behalf
- Alias = adresses alternatives sur meme boite
- Quota individuel decompte du quota global
