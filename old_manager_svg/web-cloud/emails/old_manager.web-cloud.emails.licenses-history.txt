# Cahier des Charges : web-cloud/emails - Licenses History

## 1. VUE D'ENSEMBLE

**Type:** Page datagrid avec filtres
**Fonction:** Historique des opérations de licences email
**Contexte:** Sous-onglet "Historique" de l'onglet Licences

## 2. NAVIGATION

### NAV1
- Menu: Web Cloud (actif)

### NAV2
- Menu: Emails (actif)

### NAV3
- Onglets: Boîtes mail | Redirections | Répondeurs | Listes | Sécurité | Avancé | Licences (actif) | Tâches

### NAV4
- Sous-onglets: Vue globale | À la carte | Historique (actif)

## 3. FILTRES

| Filtre | Type | Options |
|--------|------|---------|
| Période | Dropdown | 12 derniers mois, 6 mois, 3 mois |
| Type | Dropdown | Tous, Commande, Renouvellement, Résiliation, Option, Upgrade |

### Actions toolbar
- Exporter (btn-outline)
- Rafraîchir (↻)

## 4. DATAGRID

### Colonnes

| Colonne | Largeur | Contenu |
|---------|---------|---------|
| Date | 110px | Date + heure |
| N° Commande | 150px | Lien vers commande |
| Type | 140px | Badge coloré |
| Description | 260px | Détail de l'opération |
| Montant | 120px | Prix HT ou "-" |
| Statut | 100px | Badge statut |
| Facture | 80px | Icône PDF ou "-" |

### Badges Type

| Type | Background | Couleur |
|------|------------|---------|
| Commande | #DEF7EC | #03543F |
| Renouvellement | #DBEAFE | #1E40AF |
| Résiliation | #FEE2E2 | #DC2626 |
| Option | #FEF3C7 | #D97706 |
| Upgrade | #E0E7FF | #4338CA |

### Badges Statut

| Statut | Background | Couleur |
|--------|------------|---------|
| Livrée | #DEF7EC | #03543F |
| Payée | #DEF7EC | #03543F |
| Active | #DEF7EC | #03543F |
| Actif | #DEF7EC | #03543F |
| Terminée | #F3F4F6 | #6B7280 |

## 5. EXEMPLES D'OPÉRATIONS

| Date | N° | Type | Description | Montant | Statut |
|------|-----|------|-------------|---------|--------|
| 28/12/2025 14:32 | #12345678 | Commande | 1x Exchange 2019 | 9,99 EUR HT | Livrée |
| 15/12/2025 00:00 | #12340001 | Renouvellement | 5x Exchange 2019 | 49,95 EUR HT | Payée |
| 01/12/2025 09:15 | #12339555 | Résiliation | 1x Email Pro | - | Terminée |
| 15/11/2025 11:45 | #12335000 | Option | Archivage emails (3 comptes) | 8,97 EUR HT | Active |
| 01/11/2025 16:20 | #12330100 | Upgrade | +25 Go quota (jean@...) | 3,99 EUR HT | Actif |

## 6. PAGINATION

- Texte: "Affichage 1-6 sur 24 opérations"
- Navigation: < 1 2 ... >

## 7. APIS & ENDPOINTS

```
# Historique commandes
GET /me/order
Query: {
  "date.from": "2025-01-01",
  "date.to": "2025-12-31"
}
→ Liste des commandes du compte

GET /me/order/{orderId}
→ Détails d'une commande

GET /me/order/{orderId}/details
→ Détails des articles commandés

# Factures
GET /me/bill
Query: {
  "date.from": "2025-01-01",
  "date.to": "2025-12-31"
}
→ Liste des factures

GET /me/bill/{billId}/download
→ Télécharge la facture PDF

# Services email
GET /email/exchange/{organization}/service/{serviceName}/billingHistory
→ Historique facturation Exchange

GET /email/pro/{service}/billingHistory
→ Historique facturation Email Pro
```

## 8. TRADUCTIONS (i18n)

| Clé | FR |
|-----|-----|
| page_title | Historique |
| filter_period | Période |
| filter_type | Type |
| period_12m | 12 derniers mois |
| period_6m | 6 derniers mois |
| period_3m | 3 derniers mois |
| type_all | Tous |
| type_order | Commande |
| type_renewal | Renouvellement |
| type_termination | Résiliation |
| type_option | Option |
| type_upgrade | Upgrade |
| col_date | Date |
| col_order | N° Commande |
| col_type | Type |
| col_description | Description |
| col_amount | Montant |
| col_status | Statut |
| col_invoice | Facture |
| status_delivered | Livrée |
| status_paid | Payée |
| status_active | Active |
| status_terminated | Terminée |
| btn_export | Exporter |
| btn_refresh | Rafraîchir |
| pagination | Affichage {start}-{end} sur {total} opérations |
