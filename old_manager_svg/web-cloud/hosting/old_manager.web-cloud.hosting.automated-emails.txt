# Cahier des Charges : web-cloud/hosting - Scripts e-mail

## 1. VUE D'ENSEMBLE
- **Écran** : Gestion des e-mails automatisés (scripts)
- **Objectif** : Surveiller et gérer les e-mails envoyés par scripts CGI/PERL/PHP
- **Contexte** : Monitoring des envois et gestion des erreurs

## 2. LAYOUT & STRUCTURE
- Breadcrumb : Hébergements / mywebsite.com
- Titre : "Scripts e-mail"
- Description : "E-mails envoyés depuis des scripts CGI/PERL/PHP."
- Tuile informations (état, stats, actions)
- Graphique historique
- Tableau des erreurs

## 3. COMPOSANTS UI
- **OdsCard** : Tuile statut et statistiques
- **OdsBadge** : État du service (actif - vert)
- **OdsButton** : "Bloquer l'envoi" (danger rouge), "Purger les e-mails" (secondaire)
- **OdsLink** : "Changer le destinataire"
- **OdsChart** : Graphique en barres (historique hebdomadaire)
- **OdsTable** : Tableau des e-mails en erreur

## 4. TUILE INFORMATIONS
| Champ | Valeur |
|-------|--------|
| État du service | Badge "actif" (vert) |
| Rapport d'erreurs à | admin@mywebsite.com + lien "Changer le destinataire" |
| Total des e-mails envoyés | 1,247 (grand format) |
| E-mails envoyés aujourd'hui | 42 (grand format) |
| Total des e-mails en erreur | 3 (rouge, grand format) |

## 5. GRAPHIQUE HISTORIQUE
- Titre : "Historique des e-mails envoyés"
- Type : Barres verticales
- Période : 7 jours (Lun - Dim)
- Axe Y : 0 à 100

## 6. TABLEAU E-MAILS EN ERREUR
| Colonne | Description |
|---------|-------------|
| Date | Timestamp (27/12/2025 10:23) |
| E-mail | Adresse destinataire |
| Message | Code erreur SMTP |

## 7. EXEMPLES DONNÉES ERREURS
| Date | E-mail | Message |
|------|--------|---------|
| 27/12/2025 10:23 | user@example.com | 550 Mailbox not found |
| 26/12/2025 15:47 | invalid@domain.fr | 550 No such user |

## 8. BOUTONS ACTIONS
- "Bloquer l'envoi" (rouge) : Bloque tous les envois
- "Purger les e-mails" (secondaire) : Vide la file d'attente

## 9. APIS & ENDPOINTS
- GET /hosting/web/{serviceName}/automatedEmails : Statut et stats
- POST /hosting/web/{serviceName}/automatedEmails/block : Bloquer
- POST /hosting/web/{serviceName}/automatedEmails/unblock : Débloquer
- POST /hosting/web/{serviceName}/automatedEmails/purge : Purger
- PUT /hosting/web/{serviceName}/automatedEmails/recipient : Changer destinataire
- GET /hosting/web/{serviceName}/automatedEmails/bounces : Liste erreurs
