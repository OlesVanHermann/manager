# Cahier des Charges : telecom/billing - Seuil de credit

## 1. RESUME EXECUTIF

### Perimetre
Page de configuration du seuil de credit hors forfait.

### Objectif fonctionnel
- Voir le seuil actuel et la consommation
- Modifier le seuil de credit
- Comprendre les implications

---

## 2. LAYOUT

### Structure page avec carte info + formulaire + alertes

---

## 3. COMPOSANTS UI

### Header page
| Element | Description |
|---------|-------------|
| Retour | ← Retour a la facturation |
| Titre | Seuil de credit |

### Carte informations actuelles
| Champ | Valeur |
|-------|--------|
| Seuil de credit | 200,00 EUR HT |
| Hors forfait autorise | 150,00 EUR HT |
| Hors forfait actuel | 45,30 EUR HT |

### Barre de progression
| Element | Description |
|---------|-------------|
| Label | Utilisation du hors forfait |
| Barre | Vert si < 50%, Orange si > 50%, Rouge si > 80% |
| Pourcentage | XX% |

### Formulaire modification
| Element | Description |
|---------|-------------|
| Titre | Modifier le seuil de credit |

### Champ nouveau seuil
| Element | Description |
|---------|-------------|
| Label | Nouveau seuil de credit |
| Type | Select dropdown |
| Options | 100, 200, 300, 500, 1000 EUR HT |

### Info nouveau hors forfait
| Element | Description |
|---------|-------------|
| Label | Nouveau hors forfait autorise |
| Valeur | XXX,XX EUR HT (calcule) |

### Checkbox conditions
| Element | Description |
|---------|-------------|
| Type | Checkbox obligatoire |
| Label | J'accepte les conditions generales |

### Bouton validation
| Element | Description |
|---------|-------------|
| Type | Primary (disabled si checkbox non coche) |
| Texte | Modifier |

### Alerte warning
| Element | Description |
|---------|-------------|
| Type | Warning (fond jaune) |
| Titre | Attention |
| Message | Depassement = blocage appels sortants |

### Etat succes
| Element | Description |
|---------|-------------|
| Type | Success (fond vert) |
| Icone | ✓ dans cercle |
| Message | Modification effectuee ! |

---

## 4. APIS & DONNEES

### Endpoints
```
GET /telephony/{billingAccount}/billingAccount
PUT /telephony/{billingAccount}/billingAccount
GET /telephony/{billingAccount}/allowedCreditThreshold
```

### Modele
```typescript
interface CreditThresholdInfo {
  currentThreshold: number;
  allowedOutOfPlan: number;
  currentOutOfPlan: number;
  usagePercent: number;
}

interface CreditThresholdUpdate {
  creditThreshold: number;
}

interface AllowedThreshold {
  value: number;
  label: string;
}
```

---

## 5. TRADUCTIONS (i18n)

```json
{
  "telecom_threshold_title": "Seuil de credit",
  "telecom_threshold_back": "Retour a la facturation",
  "telecom_threshold_info_title": "Informations actuelles",
  "telecom_threshold_current": "Seuil de credit",
  "telecom_threshold_allowed": "Hors forfait autorise",
  "telecom_threshold_usage": "Hors forfait actuel",
  "telecom_threshold_progress": "Utilisation du hors forfait",
  "telecom_threshold_form_title": "Modifier le seuil de credit",
  "telecom_threshold_new": "Nouveau seuil de credit",
  "telecom_threshold_new_allowed": "Nouveau hors forfait autorise",
  "telecom_threshold_accept": "J'accepte les conditions generales",
  "telecom_threshold_submit": "Modifier",
  "telecom_threshold_warning_title": "Attention",
  "telecom_threshold_warning_msg": "Lorsque votre consommation hors forfait depasse le seuil autorise, vos appels sortants seront bloques.",
  "telecom_threshold_success": "Modification effectuee !"
}
```

---

## 6. REGLES METIER

- Seuil = montant maximum de depot
- Hors forfait autorise = seuil - depot actuel
- Depassement = blocage appels sortants
- Deblocage = paiement ou augmentation seuil
- Conditions obligatoires a accepter
