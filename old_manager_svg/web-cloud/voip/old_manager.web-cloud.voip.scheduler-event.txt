# Cahier des Charges : telecom/scheduler - Nouvel evenement

## 1. RESUME EXECUTIF

### Perimetre
Panneau lateral de creation/edition d'un evenement du calendrier.

### Objectif fonctionnel
- Creer un nouvel evenement
- Definir la categorie (action)
- Configurer les dates et heures

---

## 2. LAYOUT

### Structure panneau lateral glissant + sous-panneau categories

---

## 3. COMPOSANTS UI

### Panneau principal
| Element | Description |
|---------|-------------|
| Type | Sliding panel (droite) |
| Largeur | 400px |
| Titre | Nouvel evenement |

### Toggle duree
| Element | Description |
|---------|-------------|
| Type | Switch toggle |
| Option 1 | Creneau horaire |
| Option 2 | Journee entiere |
| Fond | Gris (#F3F4F6) |

### Champ titre
| Element | Description |
|---------|-------------|
| Label | Titre |
| Type | Text input |
| Placeholder | Ex: "Fermeture exceptionnelle" |

### Selecteur categorie
| Element | Description |
|---------|-------------|
| Label | Categorie |
| Type | Bouton clickable |
| Affichage | Badge couleur + nom |
| Action | Ouvre sous-panneau categories |
| Icone | Fleche droite ▶ |

### Champs date/heure Du
| Element | Description |
|---------|-------------|
| Label | Du |
| Date | Datepicker DD/MM/YYYY |
| Heure | Select HH:MM |

### Champs date/heure Au
| Element | Description |
|---------|-------------|
| Label | Au |
| Date | Datepicker DD/MM/YYYY |
| Heure | Select HH:MM |

### Champ description
| Element | Description |
|---------|-------------|
| Label | Description |
| Type | Textarea |
| Lignes | 3 lignes visibles |

### Boutons actions
| Element | Description |
|---------|-------------|
| Annuler | Secondary, ferme panneau |
| Creer | Primary, sauvegarde event |

---

## SOUS-PANNEAU : Selection categorie

### Header sous-panneau
| Element | Description |
|---------|-------------|
| Retour | ← Fleche retour |
| Titre | Choisir une categorie |

### Liste categories
| Categorie | Couleur | Description |
|-----------|---------|-------------|
| Disponible | Vert #10B981 | Service actif normal |
| Ferme | Rouge #EF4444 | Service ferme |
| Messagerie vocale | Orange #F59E0B | Renvoi vers messagerie |
| Renvoi externe | Violet #8B5CF6 | Renvoi vers numero externe |
| Personnalise | Gris #6B7280 | Action custom |

### Item categorie
| Element | Description |
|---------|-------------|
| Radio | Bouton radio selection |
| Badge | Carre couleur 20x20px |
| Label | Nom de la categorie |
| Fond actif | Bleu clair (#E8F0FE) |

---

## 4. APIS & DONNEES

### Endpoints
```
POST /telephony/{billingAccount}/timeCondition/{serviceName}/condition
PUT /telephony/{billingAccount}/timeCondition/{serviceName}/condition/{id}
GET /telephony/{billingAccount}/timeCondition/{serviceName}/slot
```

### Modele
```typescript
interface SchedulerEventForm {
  title: string;
  category: SchedulerCategory;
  startDate: string;
  startTime?: string;
  endDate: string;
  endTime?: string;
  allDay: boolean;
  description?: string;
}

interface SchedulerCategory {
  id: string;
  label: string;
  color: string;
  action: TimeConditionAction;
}

type TimeConditionAction =
  | 'available'
  | 'closed'
  | 'voicemail'
  | 'redirect_external'
  | 'custom';

interface TimeSlot {
  day: string;
  hourBegin: string;
  hourEnd: string;
}
```

---

## 5. TRADUCTIONS (i18n)

```json
{
  "telecom_event_title": "Nouvel evenement",
  "telecom_event_edit_title": "Modifier l'evenement",
  "telecom_event_timeslot": "Creneau horaire",
  "telecom_event_allday": "Journee entiere",
  "telecom_event_name": "Titre",
  "telecom_event_category": "Categorie",
  "telecom_event_from": "Du",
  "telecom_event_to": "Au",
  "telecom_event_description": "Description",
  "telecom_event_create": "Creer",
  "telecom_event_save": "Enregistrer",
  "telecom_event_cancel": "Annuler",
  "telecom_event_choose_category": "Choisir une categorie",
  "telecom_event_cat_available": "Disponible",
  "telecom_event_cat_closed": "Ferme",
  "telecom_event_cat_voicemail": "Messagerie vocale",
  "telecom_event_cat_redirect": "Renvoi externe",
  "telecom_event_cat_custom": "Personnalise"
}
```

---

## 6. REGLES METIER

- Creneau horaire par defaut (toggle on)
- Journee entiere masque les selecteurs d'heure
- Categorie obligatoire
- Date fin >= date debut
- Heure fin > heure debut (meme jour)
- Description optionnelle
- Edition = meme formulaire avec bouton "Enregistrer"

