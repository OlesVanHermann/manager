# Cahier des Charges : telecom/xdsl - Alertes et notifications

## 1. RESUME EXECUTIF

### Perimetre
Gestion des alertes et notifications pour les acces xDSL.

### Objectif fonctionnel
- Configurer des alertes SMS ou email
- Etre notifie en cas d'incident sur la ligne
- Gerer les frequences et delais de notification

---

## 2. LAYOUT

### Structure avec tableau de notifications

---

## 3. COMPOSANTS UI

### Breadcrumb
| Element | Description |
|---------|-------------|
| Chemin | Accueil > Telecom > Pack xDSL > Notifications |

### Titre
| Element | Description |
|---------|-------------|
| Titre | Alertes et notifications |

### Banniere warning (conditionnelle)
| Element | Description |
|---------|-------------|
| Type | Warning (fond jaune) |
| Message | Attention, le compte sms-xxx n'a plus de credit... |

### Bouton ajout
| Element | Description |
|---------|-------------|
| Bouton | + Ajouter une alerte |
| Action | Ouvre modal ajout |

### Tableau notifications
| Colonne | Description |
|---------|-------------|
| Type | SMS ou E-mail avec icone |
| Compte | Compte SMS associe (ou --) |
| Contact a notifier | Numero ou email |
| Frequence d'envoi | Toutes les X minutes/heures |
| Notification incidents | Oui/Non |
| Delai (min) | Delai avant notification |
| Actions | Bouton supprimer |

### Bouton action par ligne
| Element | Description |
|---------|-------------|
| Supprimer | Icone poubelle rouge |

---

## 4. APIS & DONNEES

### Endpoints
```
GET /xdsl/{serviceName}/monitoringNotifications
    Response: [{
      id, type, smsAccount, phone/email,
      frequency, allowIncident, downThreshold
    }]

POST /xdsl/{serviceName}/monitoringNotifications
    Body: { type, smsAccount, phone, frequency, allowIncident, downThreshold }

DELETE /xdsl/{serviceName}/monitoringNotifications/{id}
```

### Types de notification
| Type | Description |
|------|-------------|
| sms | Notification par SMS |
| email | Notification par email |

### Frequences disponibles
| Valeur | Label |
|--------|-------|
| 5 | Toutes les 5 minutes |
| 60 | Toutes les heures |
| 360 | Toutes les 6 heures |
| 1440 | Toutes les 24 heures |

---

## 5. TRADUCTIONS (i18n)

```json
{
  "xdsl_notif_title": "Alertes et notifications",
  "xdsl_notif_add": "Ajouter une alerte",
  "xdsl_notif_no_credit": "Attention, le compte {{account}} n'a plus de credit pour l'envoi de nouveaux SMS.",
  "xdsl_notif_col_type": "Type",
  "xdsl_notif_col_account": "Compte",
  "xdsl_notif_col_contact": "Contact a notifier",
  "xdsl_notif_col_frequency": "Frequence d'envoi",
  "xdsl_notif_col_incident": "Notification incidents",
  "xdsl_notif_col_threshold": "Delai (min)",
  "xdsl_notif_col_actions": "Actions",
  "xdsl_notif_type_sms": "SMS",
  "xdsl_notif_type_email": "E-mail",
  "xdsl_notif_delete": "Supprimer"
}
```

---

## 6. REGLES METIER

- Max 10 notifications par service
- Compte SMS requis pour type SMS
- Delai entre 0 et 1440 min (24h)
- Warning si credit SMS epuise
