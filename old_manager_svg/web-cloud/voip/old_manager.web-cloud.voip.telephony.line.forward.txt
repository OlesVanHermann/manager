# CAHIER DES CHARGES - old_manager.telecom.telephony.line.forward
# Page renvoi d'appel d'une ligne

## 1. RESUME EXECUTIF

### Perimetre
Configuration des renvois d'appel pour une ligne SIP.

### Objectif fonctionnel
Permettre de rediriger les appels selon diverses conditions.

---

## 2. ARCHITECTURE

### Arborescence fichiers source
```
telecom/telephony/line/calls/forward/
├── forward.module.js
├── forward.routing.js
├── forward.controller.js
├── forward.html
└── translations/Messages_fr_FR.json
```

---

## 3. PAGES & NAVIGATION

### Route
- State: `telecom.telephony.billingAccount.line.dashboard.calls.forward`
- URL: `/telephony/{billingAccount}/line/{serviceName}/calls/forward`

---

## 4. COMPOSANTS UI

### Section Renvoi Inconditionnel
- Toggle activation
- Selecteur type destination
- Champ numero destination

### Section Renvoi Pas de Reponse
- Toggle activation
- Slider delai (5-60 sec)

### Section Renvoi Occupe
- Toggle activation
- Selecteur destination

### Section Renvoi Backup
- Toggle activation
- Selecteur destination

### Selecteur Type Destination
| Type | Label FR |
|------|----------|
| number | Telephone |
| fax | Fax |
| voicemail | Repondeur |
| external | Numero hors OVHcloud |

---

## 5. APIs & DONNEES

### Endpoints

```
GET /telephony/{billingAccount}/line/{serviceName}/options
PUT /telephony/{billingAccount}/line/{serviceName}/options
Body: {
  forwardUnconditional: {...},
  forwardNoReply: {...},
  forwardBusy: {...},
  forwardBackup: {...}
}
```

---

## 6. TRADUCTIONS

### Cles i18n (FR)
| Cle | Valeur FR |
|-----|-----------|
| telephony_line_actions_line_calls_forward_title | Renvoi d'appel |
| telephony_line_actions_line_calls_forward_voicemail | Repondeur |
| telephony_line_actions_line_calls_forward_number | Telephone |
| telephony_line_actions_line_calls_forward_fax | Fax |
| telephony_line_actions_line_calls_forward_external | Numero hors OVHcloud |
| telephony_line_actions_line_calls_forward_time_range | Valeur comprise entre 5 et 60 |
| telephony_line_actions_line_calls_forward_save_success | Les renvois d'appel ont ete mis a jour. |

---

## 7. REGLES METIER

### Priorite des renvois
1. Inconditionnel (si actif, ignore les autres)
2. Occupe
3. Pas de reponse
4. Backup (injoignable)

### Delai pas de reponse
- Minimum: 5 secondes
- Maximum: 60 secondes
- Par defaut: 20 secondes
