# Cahier des Charges : network/cdn - Règles de cache domaine

## 1. VUE D'ENSEMBLE
- **Type** : Page onglet avec datagrid
- **Contexte** : Vue détail d'un domaine CDN
- **Objectif** : Gérer les règles de cache du domaine

## 2. DIMENSIONS
| Propriété | Valeur |
|-----------|--------|
| Largeur | 100% |
| Hauteur | 650px |

## 3. COMPOSANTS UI
- **OdsTabs** : Navigation onglets
- **OdsInput** : Barre de recherche
- **OdsButton** : Actions groupées
- **OdsDatagrid** : Tableau des règles
- **OdsActionMenu** : Menu actions par ligne
- **OdsBadge** : Statut ON/OFF

## 4. NAVIGATION ONGLETS
| Onglet | État |
|--------|------|
| Statistiques | Inactif |
| Règles de cache | Actif |
| Logs | Inactif |

## 5. HEADER SECTION

### Titre
| Texte |
|-------|
| "Règles de cache" (18px, gras) |

### Barre d'actions
| Élément | Type | Action |
|---------|------|--------|
| Recherche | Input | Filtrer les règles |
| + Ajouter une règle | Button | Ouvre modal-add-rule |
| Tout désactiver | Button | Désactive toutes les règles |
| Vider le cache | Button | Purge tout le cache |

## 6. DATAGRID

### Colonnes
| Colonne | Largeur | Type |
|---------|---------|------|
| TYPE | 150px | Texte (Extension, Dossier, URI) |
| RÈGLE | 250px | Texte (pattern) |
| TYPE DE CACHE | 180px | Texte (Forcer le cache, Pas de cache) |
| TTL | 130px | Nombre (secondes) |
| ÉTAT | 100px | Badge ON/OFF |
| ACTIONS | 80px | ActionMenu |

### ActionMenu (⋮)
| Action | Couleur | Modal |
|--------|---------|-------|
| Vider le cache | Normal | modal-flush-rule |
| Modifier TTL | Normal | modal-update-rule |
| Désactiver/Activer | Normal | modal-deactivate-rule / modal-activate-rule |
| Supprimer | Rouge | modal-delete-rule |

### Badge état
| État | Couleur fond | Couleur texte |
|------|--------------|---------------|
| ON | Vert (#D1FAE5) | Vert (#10B981) |
| OFF | Rouge (#FEE2E2) | Rouge (#DC2626) |

## 7. PAGINATION
| Élément | Description |
|---------|-------------|
| Info | "Affichage X-Y sur Z règles" |

## 8. APIS & ENDPOINTS
- GET /cdn/{serviceName}/domains/{domain}/cacheRules - Liste des règles
- POST /cdn/{serviceName}/domains/{domain}/cacheRules - Créer règle
- PUT /cdn/{serviceName}/domains/{domain}/cacheRules/{ruleId} - Modifier règle
- DELETE /cdn/{serviceName}/domains/{domain}/cacheRules/{ruleId} - Supprimer règle
- POST /cdn/{serviceName}/domains/{domain}/cacheRules/{ruleId}/flush - Purger cache règle

