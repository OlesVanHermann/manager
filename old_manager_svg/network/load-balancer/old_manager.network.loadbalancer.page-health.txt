# Cahier des Charges : network/loadbalancer - Page Health

## 1. VUE D'ENSEMBLE
- **Type** : Page configuration health checks
- **Contexte** : Network Load Balancer
- **Objectif** : Configurer et monitorer les sondes de santé

## 2. DIMENSIONS
| Propriété | Valeur |
|-----------|--------|
| Page largeur | 1100px |
| Page hauteur | 550px |
| Background | #F9FAFB |

## 3. COMPOSANTS UI
- **OdsText** : Titres et labels
- **OdsButton** : Ajouter health check
- **OdsCard** : Cartes configuration health check
- **OdsSelect** : Type, intervalle
- **OdsInput** : Port, URL path
- **OdsBadge** : Statut santé

## 4. HEADER
| Propriété | Valeur |
|-----------|--------|
| Titre | "Health Checks" |
| Description | "lb-production-web - Configuration des sondes de santé." |

## 5. BOUTON ACTION
| Propriété | Valeur |
|-----------|--------|
| Texte | "+ Ajouter health check" |
| Style | Primary #0050D7 |
| Largeur | 180px |

## 6. CARTE HEALTH CHECK
| Propriété | Valeur |
|-----------|--------|
| Largeur | 500-510px |
| Hauteur | 360px |
| Titre | "HTTP Health Check - {backend}" |

### Badge statut
| Statut | Fond | Texte |
|--------|------|-------|
| 4/4 Healthy | #DCFCE7 | #16A34A |
| 1/2 Healthy | #FEF3C7 | #92400E |
| 0/X Healthy | #FEE2E2 | #DC2626 |

## 7. CONFIGURATION SONDE
| Champ | Largeur | Options |
|-------|---------|---------|
| Type | 220px | HTTP, HTTPS, TCP |
| Port | 100px | Numéro port |
| URL Path | 340px | /health, /ping... |
| Intervalle | 150px | 10s, 30s, 60s |
| Timeout | 120px | 5s, 10s, 30s |

## 8. SEUILS HEALTH CHECK
| Paramètre | Description |
|-----------|-------------|
| Healthy après | Nombre checks OK consécutifs |
| Unhealthy après | Nombre échecs consécutifs |

## 9. ÉTAT BACKENDS (dans carte TCP)
| Propriété | Valeur |
|-----------|--------|
| Hauteur ligne | 45px |
| Fond healthy | #DCFCE7 |
| Fond unhealthy | #FEE2E2 |

### Contenu ligne backend
| Élément | Description |
|---------|-------------|
| Dot | Couleur état |
| Nom | "db-primary (IP:port)" |
| Statut | "Healthy - Xms" ou "Timeout - X fails" |

## 10. APIS & ENDPOINTS
- GET /ipLoadbalancing/{serviceName}/http/farm/{farmId}/healthcheck - Config sonde
- PUT /ipLoadbalancing/{serviceName}/http/farm/{farmId}/healthcheck - Modifier
- GET /ipLoadbalancing/{serviceName}/http/farm/{farmId}/server - État serveurs

