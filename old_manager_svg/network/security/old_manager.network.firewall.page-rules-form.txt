# Cahier des Charges : network/firewall/page-rules-form

## 1. VUE D'ENSEMBLE

| Champ | Valeur |
|-------|--------|
| **Fichier SVG** | old_manager.network.firewall.page-rules-form.svg |
| **NAV1** | network (Network) |
| **NAV2** | firewall |
| **Type** | Page avec formulaire inline |
| **Description** | Page de gestion des r√®gles de firewall avec √©dition inline |

---

## 2. LAYOUT

| Zone | Dimensions | Position |
|------|------------|----------|
| Content | 1392√ó450px | x: 24, y: 370 |
| Full-width | Oui | - |

---

## 3. NAVIGATION

### 3.1 NAV2 Sous-header

| Onglet | √âtat |
|--------|------|
| IP | Inactif |
| **Firewall** | **Actif** (#0050D7) |

### 3.2 Lien retour

| Propri√©t√© | Valeur |
|-----------|--------|
| Texte | ‚Üê Retour √† la liste des IPs |
| Couleur | #0050D7 |

---

## 4. HEADER PAGE

### 4.1 Titre

| Propri√©t√© | Valeur |
|-----------|--------|
| Texte | Firewall - 192.168.1.100 |
| Font-size | 24px |
| Font-weight | 600 |

### 4.2 Description

| Ligne | Texte |
|-------|-------|
| 1 | Le firewall OVHcloud vous permet de filtrer le trafic r√©seau entrant vers votre IP. |
| 2 | Cr√©ez des r√®gles pour autoriser ou refuser des connexions selon le protocole, l'IP source et les ports. |

---

## 5. BANNER DENY

| Propri√©t√© | Valeur |
|-----------|--------|
| Background | #FEF3C7 |
| Dimensions | 1392√ó40px |
| Border radius | 4px |
| Ic√¥ne | ‚ö† |
| Message | Pour bloquer tout le trafic non autoris√©, cr√©ez une r√®gle DENY finale en derni√®re position. |
| Lien | cr√©ez une r√®gle DENY finale (#0050D7, underline) |

---

## 6. BARRE D'ACTIONS

### 6.1 Bouton ajout

| Propri√©t√© | Valeur |
|-----------|--------|
| Label | + Ajouter une r√®gle |
| Style | Primary (#0050D7) |
| Dimensions | 150√ó36px |

### 6.2 Statut firewall

| Propri√©t√© | Valeur |
|-----------|--------|
| Label | R√®gles activ√©es |
| Couleur label | #059669 |
| Type | Switch toggle |
| √âtat | Activ√© (#0050D7) |
| Dimensions switch | 44√ó24px |
| Position | Droite |

---

## 7. DATAGRID R√àGLES

### 7.1 Container

| Propri√©t√© | Valeur |
|-----------|--------|
| Dimensions | 1392√ó450px |
| Background | #FFFFFF |
| Border | 1px #E5E7EB |
| Border radius | 8px |

### 7.2 Header tableau

| Propri√©t√© | Valeur |
|-----------|--------|
| Hauteur | 45px |
| Background | #F9FAFB |

### 7.3 Colonnes

| # | Colonne | Largeur | Alignement |
|---|---------|---------|------------|
| 1 | Position | 80px | Centre |
| 2 | Mode | 100px | Gauche |
| 3 | Protocole | 120px | Gauche |
| 4 | IP source | 170px | Gauche |
| 5 | Port source | 130px | Gauche |
| 6 | Port dest. | 120px | Gauche |
| 7 | Options | 150px | Gauche |
| 8 | Statut | 80px | Centre |
| 9 | Actions | 100px | Centre |

---

## 8. LIGNE FORMULAIRE INLINE

### 8.1 Style ligne

| Propri√©t√© | Valeur |
|-----------|--------|
| Hauteur | 55px |
| Background | #E8F0FE (blue light) |

### 8.2 Champs du formulaire

| Champ | Type | Dimensions | Placeholder/Options |
|-------|------|------------|---------------------|
| Position | Select | 80√ó34px | 0, 1, 2, 3... |
| Mode | Select | 100√ó34px | deny, permit |
| Protocole | Select | 120√ó34px | TCP, UDP, ICMP, GRE |
| IP source | Text input (active) | 160√ó34px | 192.168.0.0/24 |
| Port source | Text input | 120√ó34px | 1-65535 |
| Port dest. | Text input | 110√ó34px | 80 |
| Options | Select | 140√ó34px | Aucune, established, frag |

### 8.3 Boutons action inline

| Bouton | Ic√¥ne | Action |
|--------|-------|--------|
| Annuler | ‚úï | Annuler l'ajout |
| Valider | ‚úì (#0050D7) | Cr√©er la r√®gle |

---

## 9. DONN√âES EXEMPLE R√àGLES

| Position | Mode | Protocole | IP source | Port source | Port dest. | Options | Statut |
|----------|------|-----------|-----------|-------------|------------|---------|--------|
| 1 | permit | TCP | any | eq 1-65535 | eq 22 | - | OK |
| 2 | permit | TCP | any | eq 1-65535 | eq 80 | - | OK |
| 3 | permit | TCP | any | eq 1-65535 | eq 443 | - | OK |

### 9.1 Badge statut

| Statut | Background | Texte | Dimensions |
|--------|------------|-------|------------|
| OK | #DEF7EC | #059669 | 50√ó22px |

---

## 10. FOOTER

| Propri√©t√© | Valeur |
|-----------|--------|
| Texte | 3 r√®gles sur 20 maximum |
| Font-size | 12px |
| Couleur | #6B7280 |

---

## 11. COMPORTEMENT

| Action | R√©sultat |
|--------|----------|
| Clic + Ajouter une r√®gle | Afficher ligne formulaire en haut |
| Clic ‚úï (formulaire) | Masquer la ligne formulaire |
| Clic ‚úì (formulaire) | Valider et cr√©er la r√®gle |
| Toggle R√®gles activ√©es | Activer/d√©sactiver toutes les r√®gles |
| Clic üóë | Supprimer la r√®gle |
| Modifier Position | R√©ordonner les r√®gles |

---

## 12. VALIDATIONS

| Champ | R√®gles |
|-------|--------|
| Position | Entier 0-19 |
| Mode | deny ou permit |
| Protocole | TCP, UDP, ICMP, GRE |
| IP source | any ou format CIDR valide |
| Port source | eq X ou range X-Y (1-65535) |
| Port dest. | eq X ou range X-Y (1-65535) |

---

## 13. APIS & ENDPOINTS

### 13.1 Lister les r√®gles

```
GET /ip/{ipAddress}/firewall/rule
```

Response:
```json
[
  {
    "sequence": 1,
    "action": "permit",
    "protocol": "tcp",
    "sourceIp": "any",
    "sourcePort": "eq 1-65535",
    "destinationPort": "eq 22",
    "options": null,
    "state": "ok"
  }
]
```

### 13.2 Cr√©er une r√®gle

```
POST /ip/{ipAddress}/firewall/rule
```

Body:
```json
{
  "sequence": 0,
  "action": "deny",
  "protocol": "tcp",
  "sourceIp": "192.168.0.0/24",
  "sourcePort": "eq 1-65535",
  "destinationPort": "eq 80"
}
```

### 13.3 Supprimer une r√®gle

```
DELETE /ip/{ipAddress}/firewall/rule/{sequence}
```

---

## 14. TRADUCTIONS (i18n)

| Cl√© | Valeur FR |
|-----|-----------|
| `firewall_rules_back` | Retour √† la liste des IPs |
| `firewall_rules_title` | Firewall - {ip} |
| `firewall_rules_desc_1` | Le firewall OVHcloud vous permet de filtrer le trafic r√©seau entrant vers votre IP. |
| `firewall_rules_desc_2` | Cr√©ez des r√®gles pour autoriser ou refuser des connexions selon le protocole, l'IP source et les ports. |
| `firewall_rules_deny_tip` | Pour bloquer tout le trafic non autoris√©, |
| `firewall_rules_deny_link` | cr√©ez une r√®gle DENY finale |
| `firewall_rules_deny_suffix` | en derni√®re position. |
| `firewall_rules_add` | Ajouter une r√®gle |
| `firewall_rules_enabled` | R√®gles activ√©es |
| `firewall_rules_col_position` | Position |
| `firewall_rules_col_mode` | Mode |
| `firewall_rules_col_protocol` | Protocole |
| `firewall_rules_col_ip_source` | IP source |
| `firewall_rules_col_port_source` | Port source |
| `firewall_rules_col_port_dest` | Port dest. |
| `firewall_rules_col_options` | Options |
| `firewall_rules_col_status` | Statut |
| `firewall_rules_col_actions` | Actions |
| `firewall_rules_mode_deny` | deny |
| `firewall_rules_mode_permit` | permit |
| `firewall_rules_any` | any |
| `firewall_rules_status_ok` | OK |
| `firewall_rules_count` | r√®gles sur {max} maximum |
