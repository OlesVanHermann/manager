# Cahier des Charges : home/iam-identities/sso-details

## 1. VUE D'ENSEMBLE

| Champ | Valeur |
|-------|--------|
| **Fichier SVG** | old_manager.home.iam-identities.sso-details.svg |
| **NAV1** | home (Accueil) |
| **NAV2** | iam-identities |
| **NAV4** | sso-details |
| **Type** | Page détail avec 2 colonnes |
| **Description** | Page de détails d'un fournisseur SSO avec configuration SAML et logs de connexion |

---

## 2. LAYOUT

### 2.1 Structure

| Zone | Dimensions | Position |
|------|------------|----------|
| Header OVH | 1440×50px | y: 0 |
| Sous-header | 1440×40px | y: 50 |
| Header page | 1360×60px | x: 40, y: 115 |
| Carte gauche | 660×350px | x: 40, y: 190 |
| Carte droite | 680×350px | x: 720, y: 190 |
| Carte logs | 1360×200px | x: 40, y: 570 |

---

## 3. HEADER PAGE

### 3.1 Breadcrumb

| Propriété | Valeur |
|-----------|--------|
| Texte | IAM - SSO - Azure AD |
| Couleur | #0050D7 |
| Font-size | 14px |

### 3.2 Lien retour

| Propriété | Valeur |
|-----------|--------|
| Texte | ← Retour à la liste |
| Couleur | #0050D7 |
| Font-size | 12px |

### 3.3 Titre et badge

| Propriété | Valeur |
|-----------|--------|
| Titre | Azure Active Directory |
| Font-size | 24px |
| Badge | Actif (#DEF7EC, #059669, 60×22px) |

### 3.4 Bouton Modifier

| Propriété | Valeur |
|-----------|--------|
| Texte | Modifier |
| Type | Primary |
| Dimensions | 160×36px |
| Position | Droite |

---

## 4. CARTE CONFIGURATION SAML

### 4.1 Conteneur

| Propriété | Valeur |
|-----------|--------|
| Dimensions | 660×350px |
| Background | #FFFFFF |
| Border | 1px #E5E7EB |
| Border radius | 8px |

### 4.2 Titre

| Propriété | Valeur |
|-----------|--------|
| Texte | Configuration SAML |
| Font-size | 15px |
| Font-weight | 700 |

### 4.3 Champs (Definition list)

| Label | Valeur exemple |
|-------|----------------|
| Entity ID (Issuer) | https://login.microsoftonline.com/abc123/saml2 |
| SSO URL | https://login.microsoftonline.com/abc123/saml2/sso |
| Certificate | -----BEGIN CERTIFICATE----- (avec bouton Copier) |
| Metadata URL | https://login.microsoftonline.com/abc123/federationmetadata/... |

### 4.4 Style champs

| Propriété | Valeur |
|-----------|--------|
| Label | #6B7280, 12px |
| Valeur | #1F2937, 12px |
| Espacement | 40px entre sections |

---

## 5. CARTE CONFIGURATION OVHCLOUD

### 5.1 Conteneur

| Propriété | Valeur |
|-----------|--------|
| Dimensions | 680×350px |
| Background | #FFFFFF |
| Border | 1px #E5E7EB |
| Border radius | 8px |

### 5.2 Titre

| Propriété | Valeur |
|-----------|--------|
| Texte | Configuration OVHcloud |
| Font-size | 15px |
| Font-weight | 700 |

### 5.3 Champs (Definition list)

| Label | Valeur | Action |
|-------|--------|--------|
| ACS URL (Callback) | https://www.ovh.com/auth/sso/saml/callback | Copier |
| Entity ID OVHcloud | https://www.ovh.com/auth/sso/saml | Copier |
| Attributs mappés | (voir tableau) | - |

### 5.4 Tableau attributs mappés

| Propriété | Valeur |
|-----------|--------|
| Dimensions | 620×80px |
| Background | #F9FAFB |
| Border radius | 4px |

| Attribut OVH | Attribut fournisseur |
|--------------|----------------------|
| email | user.mail |
| firstName | user.givenname |
| lastName | user.surname |

---

## 6. CARTE DERNIÈRES CONNEXIONS

### 6.1 Conteneur

| Propriété | Valeur |
|-----------|--------|
| Dimensions | 1360×200px |
| Position | x: 40, y: 570 |
| Background | #FFFFFF |
| Border | 1px #E5E7EB |
| Border radius | 8px |

### 6.2 Titre

| Propriété | Valeur |
|-----------|--------|
| Texte | Dernières connexions via ce SSO |
| Font-size | 15px |
| Font-weight | 700 |

### 6.3 Structure des lignes

| Colonne | Position X | Contenu |
|---------|------------|---------|
| Email | 20px | Email utilisateur |
| Date | 400px | Date/heure |
| Statut | 600px | Badge succès/échec |

### 6.4 Badges statut

| État | Background | Couleur | Dimensions |
|------|------------|---------|------------|
| Succès | #DEF7EC | #059669 | 60×22px |
| Échec | #FEE2E2 | #DC2626 | 60×22px |

### 6.5 Données exemple

| Email | Date | Statut |
|-------|------|--------|
| admin@company.com | 02/01/2026 10:30 | Succès |
| john.doe@company.com | 02/01/2026 09:45 | Succès |

---

## 7. COMPORTEMENT

| Action | Résultat |
|--------|----------|
| Clic ← Retour | Retourner à la liste SSO |
| Clic Modifier | Ouvrir modal-sso-update |
| Clic Copier | Copier la valeur dans le presse-papier |

---

## 8. APIS & ENDPOINTS

### 8.1 Obtenir les détails SSO

```
GET /me/identity/provider/{providerId}
```

Response:
```json
{
  "providerId": "sso-azure-001",
  "displayName": "Azure Active Directory",
  "type": "saml",
  "status": "active",
  "entityId": "https://login.microsoftonline.com/abc123/saml2",
  "ssoUrl": "https://login.microsoftonline.com/abc123/saml2/sso",
  "certificate": "-----BEGIN CERTIFICATE-----...",
  "metadataUrl": "https://login.microsoftonline.com/abc123/federationmetadata/...",
  "ovhConfig": {
    "acsUrl": "https://www.ovh.com/auth/sso/saml/callback",
    "entityId": "https://www.ovh.com/auth/sso/saml"
  },
  "attributeMapping": {
    "email": "user.mail",
    "firstName": "user.givenname",
    "lastName": "user.surname"
  }
}
```

### 8.2 Obtenir les connexions récentes

```
GET /me/identity/provider/{providerId}/logins?limit=10
```

Response:
```json
{
  "logins": [
    {
      "email": "admin@company.com",
      "timestamp": "2026-01-02T10:30:00Z",
      "status": "success"
    }
  ]
}
```

---

## 9. TRADUCTIONS (i18n)

| Clé | Valeur FR |
|-----|-----------|
| `iam_sso_details_back` | ← Retour à la liste |
| `iam_sso_details_status_active` | Actif |
| `iam_sso_details_edit` | Modifier |
| `iam_sso_details_saml_config` | Configuration SAML |
| `iam_sso_details_entity_id` | Entity ID (Issuer) |
| `iam_sso_details_sso_url` | SSO URL |
| `iam_sso_details_certificate` | Certificate |
| `iam_sso_details_metadata_url` | Metadata URL |
| `iam_sso_details_ovh_config` | Configuration OVHcloud |
| `iam_sso_details_acs_url` | ACS URL (Callback) |
| `iam_sso_details_ovh_entity_id` | Entity ID OVHcloud |
| `iam_sso_details_attributes` | Attributs mappés |
| `iam_sso_details_copy` | Copier |
| `iam_sso_details_logins` | Dernières connexions via ce SSO |
| `iam_sso_details_login_success` | Succès |
| `iam_sso_details_login_failed` | Échec |
