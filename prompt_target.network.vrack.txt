################################################################################
#                                                                              #
#                     PROMPT TARGET - NETWORK > VRACK                          #
#                                                                              #
#                              Version 1.1                                     #
#                                                                              #
################################################################################

# MAPPING REPERTOIRES (ACTION REQUISE)
################################################################################
#
# Cette interface fusionne vRack et vRack Services.
# Un agent AI doit fusionner les rÃ©pertoires :
#
#   old_manager_svg/network/vrack-services/  â†’  old_manager_svg/network/vrack/
#   target_manager_svg/network/vrack-services/  â†’  target_manager_svg/network/vrack/
#
# Fichiers concernÃ©s : 31 fichiers (old) + 25 fichiers (target) vrack-services
#
# BACKUP OBLIGATOIRE avant toute modification :
#   cp fichier.txt fichier.txt.$(date +%Y%m%dT%H%M%S)
#
################################################################################

# FUSION VRACK + VRACK SERVICES
################################################################################
#
# L'interface vRack unifie les deux produits historiques :
#
# | NAV4       | Contenu                      | Source API                    |
# |------------|------------------------------|-------------------------------|
# | Services   | Serveurs, Cloud, LB...       | /vrack/{sn}/dedicatedServer   |
# | Subnets    | Subnets privÃ©s (vRack Svc)   | /vrackServices/{sn}/subnet    |
# | Endpoints  | Services managÃ©s (vRack Svc) | /vrackServices/{sn}/endpoint  |
#
# Screenshots couvrant vRack Services :
# - #5  : Tab Subnets (liste, utilisation globale)
# - #6  : Tab Endpoints (LB, Managed DB, K8s, OVHcloud Connect)
# - #9  : Modal - Ajouter un subnet (CIDR, VLAN, rÃ©gion)
# - #10 : Modal - Ajouter un endpoint (type, service, subnet)
#
################################################################################

# 0. VISION PRODUIT
################################################################################

vRack (Virtual Rack) est le rÃ©seau privÃ© OVHcloud permettant d'interconnecter
les services du client Ã  travers les datacenters :
- Serveurs dÃ©diÃ©s
- Public Cloud (instances, Kubernetes, etc.)
- Load Balancer
- Services managÃ©s (DB, Registry, etc.)
- OVHcloud Connect

Cette interface fusionne vRack et vRack Services pour une gestion unifiÃ©e :
- Services connectÃ©s au vRack
- Subnets privÃ©s
- Endpoints (services managÃ©s)


# 1. NAVIGATION
################################################################################

NAV1: Network
NAV2: vRack (sÃ©lectionnÃ©)
NAV3: Region (dropdown dans LEFT PANEL)
NAV4: [GÃ©nÃ©ral] [Services] [Subnets] [Endpoints] [TÃ¢ches]

## 1.1 Position dans la hiÃ©rarchie

```
Network (NAV1)
â”œâ”€â”€ Subnet
â”œâ”€â”€ vRack* (NAV2 actif)
â”œâ”€â”€ Load Balancer
â”œâ”€â”€ CDN
â”œâ”€â”€ OVHcloud Connect
â”œâ”€â”€ Anti-DDoS VAC
â””â”€â”€ Anti-DDoS Game
```

## 1.2 URLs

| Ã‰cran | URL |
|-------|-----|
| Vue d'ensemble | /network/vrack |
| DÃ©tail vRack | /network/vrack/{serviceName} |
| Tab Services | /network/vrack/{serviceName}/services |
| Tab Subnets | /network/vrack/{serviceName}/subnets |
| Tab Endpoints | /network/vrack/{serviceName}/endpoints |
| Tab TÃ¢ches | /network/vrack/{serviceName}/tasks |


# 2. LEFT PANEL (280px)
################################################################################

## 2.1 Structure

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Region          [â–¼] â”‚  â† NAV3 : Filtre par rÃ©gion
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ” Rechercher...    â”‚  â† Recherche nom/description
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â—GÃ©nÃ©ral (ALL)      â”‚  â† Vue d'ensemble (toujours visible)
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â—‹pn-123456          â”‚  â† Liste des vRack
â”‚   Production        â”‚
â”‚ â—‹pn-789012          â”‚
â”‚   Staging           â”‚
â”‚ â—‹pn-345678          â”‚
â”‚   Dev               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## 2.2 NAV3 : Filtre Region

Filtre les vRack selon les services qu'ils contiennent dans la rÃ©gion.

Comportement:
- "ALL" : Affiche tous les vRack
- RÃ©gion sÃ©lectionnÃ©e : Affiche les vRack ayant au moins un service dans cette rÃ©gion
- Les compteurs sont mis Ã  jour selon le filtre

## 2.3 Ã‰lÃ©ment "GÃ©nÃ©ral (ALL)"

Toujours en premiÃ¨re position, non filtrable.
Affiche la vue d'ensemble avec statistiques globales de tous les vRack.

## 2.4 Format Ã©lÃ©ment vRack

```
â—‹ pn-123456          â† Nom technique
  Production         â† Description (si dÃ©finie)
```


# 3. RIGHT PANEL - TAB GÃ‰NÃ‰RAL (Vue d'ensemble)
################################################################################

Quand "GÃ©nÃ©ral (ALL)" est sÃ©lectionnÃ© dans le LEFT PANEL.

## 3.1 Header

```
vRack - Vue d'ensemble                           [+ Commander]
```

## 3.2 Cartes statistiques (row 1)

| Carte | Contenu |
|-------|---------|
| vRack | {vrack_count} |
| Services | {services_count} total |
| Subnets | {subnets_count} |

## 3.3 Cartes statistiques (row 2)

| Carte | Contenu |
|-------|---------|
| Endpoints | {endpoints_count} |
| RÃ©gions | {regions_count} |

## 3.4 Section "Services par type"

Barres horizontales montrant la rÃ©partition :
- ğŸ–¥ï¸ Serveurs dÃ©diÃ©s : {count}
- â˜ï¸ Public Cloud : {count}
- âš–ï¸ Load Balancer : {count}
- ğŸ—„ï¸ Managed Services : {count}

## 3.5 Section "RÃ©partition par vRack"

Barres horizontales par vRack :
- pn-123456 (Prod) : {count} services
- pn-789012 (Stag) : {count} services
- etc.


# 4. RIGHT PANEL - TAB GÃ‰NÃ‰RAL (vRack sÃ©lectionnÃ©)
################################################################################

Quand un vRack est sÃ©lectionnÃ© dans le LEFT PANEL.

## 4.1 Header

```
pn-123456                                 [Modifier] [â†»]
Production network
```

## 4.2 Section "Informations"

| Champ | Valeur |
|-------|--------|
| Nom | {name} |
| Description | {description} |
| Date crÃ©ation | {creation_date} |
| Services | {services_count} |
| Subnets | {subnets_count} |
| Endpoints | {endpoints_count} |

## 4.3 Section "RÃ©partition par rÃ©gion"

Barres horizontales :
- GRA : {count} services
- RBX : {count} services
- etc.


# 5. RIGHT PANEL - TAB SERVICES
################################################################################

## 5.1 Header section

```
Services associÃ©s ({count})                  [+ Ajouter service]
```

## 5.2 Tableau des services

| Service | Type | RÃ©gion | Statut | Actions |
|---------|------|--------|--------|---------|
| {name} | ğŸ–¥ï¸ Dedicated | {region} | ğŸŸ¢ | â‹® |
| {name} | â˜ï¸ Public Cloud | {region} | ğŸŸ¢ | â‹® |
| {name} | âš–ï¸ Load Balancer | {region} | ğŸŸ¢ | â‹® |

## 5.3 Types de services supportÃ©s

| Type | IcÃ´ne | API |
|------|-------|-----|
| Serveur dÃ©diÃ© | ğŸ–¥ï¸ | /vrack/{sn}/dedicatedServer |
| Public Cloud | â˜ï¸ | /vrack/{sn}/cloudProject |
| Load Balancer | âš–ï¸ | /vrack/{sn}/ipLoadbalancing |
| Hosted Private Cloud | ğŸ¢ | /vrack/{sn}/dedicatedCloud |
| IP Block | ğŸŒ | /vrack/{sn}/ip |

## 5.4 Actions par service

| Action | Description |
|--------|-------------|
| Voir dÃ©tails | AccÃ©der au service |
| Retirer du vRack | Supprimer l'association |
| DÃ©placer | Vers autre vRack |


# 6. RIGHT PANEL - TAB SUBNETS
################################################################################

## 6.1 Description

Gestion des subnets privÃ©s dans le vRack (via vRack Services).

## 6.2 Header section

```
Subnets privÃ©s ({count})                        [+ Ajouter]
```

## 6.3 Tableau des subnets

| Subnet | RÃ©gion | VLAN | UtilisÃ© | Actions |
|--------|--------|------|---------|---------|
| 10.0.1.0/24 | GRA | 100 | 45/254 | â‹® |
| 10.0.2.0/24 | GRA | 200 | 12/254 | â‹® |
| 192.168.0.0/16 | ALL | 500 | 156/65534 | â‹® |

## 6.4 Section "Utilisation globale"

```
â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  221 / 66296 (0.3%)
```

## 6.5 Actions par subnet

| Action | Description |
|--------|-------------|
| Modifier | Changer VLAN, description |
| Voir IPs | Liste des IPs utilisÃ©es |
| Supprimer | Retirer le subnet |


# 7. RIGHT PANEL - TAB ENDPOINTS
################################################################################

## 7.1 Description

Endpoints = services managÃ©s connectÃ©s au vRack via vRack Services.

## 7.2 Header section

```
Endpoints (services managÃ©s connectÃ©s)            [+ Ajouter]
```

## 7.3 Tableau des endpoints

| Service | Type | RÃ©gion | Subnet | Actions |
|---------|------|--------|--------|---------|
| lb-prod | âš–ï¸ Load Balancer | GRA | 10.0.1.0/24 | â‹® |
| mysql-prod | ğŸ—„ï¸ Managed DB | GRA | 10.0.1.0/24 | â‹® |
| k8s-cluster | â˜¸ï¸ Managed K8s | GRA | 10.0.2.0/24 | â‹® |
| registry-1 | ğŸ“¦ Registry | GRA | 10.0.1.0/24 | â‹® |

## 7.4 Types d'endpoints

| Type | IcÃ´ne | Description |
|------|-------|-------------|
| Load Balancer | âš–ï¸ | IP Load Balancing |
| Managed DB | ğŸ—„ï¸ | Bases de donnÃ©es managÃ©es |
| Managed K8s | â˜¸ï¸ | Kubernetes managÃ© |
| Registry | ğŸ“¦ | Container Registry |
| OVHcloud Connect | ğŸ”— | Connexion hybride |
| Vault | ğŸ”’ | Secret Manager |

## 7.5 Actions par endpoint

| Action | Description |
|--------|-------------|
| Voir dÃ©tails | AccÃ©der au service |
| Changer subnet | Modifier le subnet associÃ© |
| Retirer | Supprimer l'endpoint |


# 8. RIGHT PANEL - TAB TÃ‚CHES
################################################################################

## 8.1 Description

Historique des opÃ©rations sur le vRack.

## 8.2 Tableau des tÃ¢ches

| Date | OpÃ©ration | Cible | Statut | DurÃ©e |
|------|-----------|-------|--------|-------|
| {date} | Ajout service | ns123.ovh | âœ… | 2s |
| {date} | CrÃ©ation subnet | 10.0.3.0/24 | âœ… | 1s |
| {date} | Ajout endpoint | lb-staging | ğŸ”„ | - |

## 8.3 Statuts

| Statut | IcÃ´ne | Description |
|--------|-------|-------------|
| En cours | ğŸ”„ | OpÃ©ration en cours |
| SuccÃ¨s | âœ… | TerminÃ© avec succÃ¨s |
| Erreur | âŒ | Ã‰chec |
| AnnulÃ© | âšª | AnnulÃ© |


# 9. APIS & ENDPOINTS
################################################################################

## 9.1 vRack

```
GET /vrack
GET /vrack/{serviceName}
GET /vrack/{serviceName}/serviceInfos
PUT /vrack/{serviceName}
```

## 9.2 Services associÃ©s

```
GET /vrack/{serviceName}/dedicatedServer
POST /vrack/{serviceName}/dedicatedServer
DELETE /vrack/{serviceName}/dedicatedServer/{dedicatedServer}

GET /vrack/{serviceName}/cloudProject
POST /vrack/{serviceName}/cloudProject
DELETE /vrack/{serviceName}/cloudProject/{project}

GET /vrack/{serviceName}/ipLoadbalancing
POST /vrack/{serviceName}/ipLoadbalancing
DELETE /vrack/{serviceName}/ipLoadbalancing/{ipLoadbalancing}

GET /vrack/{serviceName}/dedicatedCloud
POST /vrack/{serviceName}/dedicatedCloud
DELETE /vrack/{serviceName}/dedicatedCloud/{dedicatedCloud}
```

## 9.3 vRack Services (Subnets & Endpoints)

```
GET /vrackServices/{serviceName}
GET /vrackServices/{serviceName}/resource
GET /vrackServices/{serviceName}/subnet
POST /vrackServices/{serviceName}/subnet
DELETE /vrackServices/{serviceName}/subnet/{subnetId}

GET /vrackServices/{serviceName}/endpoint
POST /vrackServices/{serviceName}/endpoint
DELETE /vrackServices/{serviceName}/endpoint/{endpointId}
```

## 9.4 TÃ¢ches

```
GET /vrack/{serviceName}/task
GET /vrack/{serviceName}/task/{taskId}
```


# 10. VARIABLES DYNAMIQUES
################################################################################

| Variable | Source | Exemple |
|----------|--------|---------|
| {serviceName} | API /vrack | pn-123456 |
| {description} | API /vrack/{sn} | Production network |
| {vrack_count} | Comptage | 3 |
| {services_count} | Comptage | 24 |
| {subnets_count} | API vrackServices | 12 |
| {endpoints_count} | API vrackServices | 8 |
| {regions_count} | Comptage distinct | 4 |
| {creation_date} | API serviceInfos | 15/01/2024 |


# 11. MODALES
################################################################################

## 11.1 modal-add-service

Ajouter un service au vRack.

| Champ | Type | Options |
|-------|------|---------|
| Type de service | Select | Dedicated, Cloud, LB, etc. |
| Service | Select | Liste services disponibles |

Actions: [Annuler] [Ajouter]

## 11.2 modal-remove-service

Retirer un service du vRack.

| Champ | Type |
|-------|------|
| Service | Readonly |
| Confirmation | Checkbox |

Actions: [Annuler] [Retirer]

## 11.3 modal-add-subnet

CrÃ©er un subnet privÃ©.

| Champ | Type | Validation |
|-------|------|------------|
| Subnet (CIDR) | Input | Format CIDR valide |
| VLAN ID | Input | 1-4094 |
| RÃ©gion | Select | Liste rÃ©gions |
| Description | Input | Optionnel |

Actions: [Annuler] [CrÃ©er]

## 11.4 modal-add-endpoint

Ajouter un endpoint au vRack.

| Champ | Type | Options |
|-------|------|---------|
| Type | Select | LB, DB, K8s, etc. |
| Service | Select | Services disponibles |
| Subnet | Select | Subnets existants |

Actions: [Annuler] [Ajouter]

## 11.5 modal-edit-vrack

Modifier les informations du vRack.

| Champ | Type |
|-------|------|
| Description | Input |

Actions: [Annuler] [Enregistrer]


# 12. RÃˆGLES MÃ‰TIER
################################################################################

## 12.1 vRack

- Un vRack peut contenir des services de plusieurs rÃ©gions
- Les services communiquent via le rÃ©seau privÃ© L2
- Gratuit (inclus avec les services)

## 12.2 Subnets

- GÃ©rÃ©s via vRack Services
- Un subnet est liÃ© Ã  une rÃ©gion spÃ©cifique
- VLAN ID unique par vRack
- Plages privÃ©es RFC1918 recommandÃ©es

## 12.3 Endpoints

- NÃ©cessitent un subnet existant
- Liaison automatique de l'IP privÃ©e
- DÃ©pendent de vRack Services

## 12.4 Filtrage rÃ©gion

- Filtre basÃ© sur les services contenus
- Un vRack multi-rÃ©gion apparaÃ®t dans plusieurs filtres
- "GÃ©nÃ©ral (ALL)" affiche toujours la vue complÃ¨te


# 13. COMPOSANTS ODS UTILISÃ‰S
################################################################################

- OdsTabs : NAV4 tabs
- OdsInput : Recherche, formulaires
- OdsSelect : Filtre rÃ©gion (NAV3), sÃ©lection services
- OdsDatagrid : Tableaux (services, subnets, endpoints, tÃ¢ches)
- OdsCard : Cartes statistiques
- OdsBadge : Types, statuts
- OdsButton : Actions
- OdsModal : Modales
- OdsProgressBar : Utilisation subnets


# 14. FICHIERS ASSOCIÃ‰S
################################################################################

Documentation : prompt_target.network.vrack.txt (ce fichier)
Screenshots : prompt_target.network.vrack-screenshot.txt

################################################################################
#                            FIN DU DOCUMENT                                   #
################################################################################
