################################################################################
#                                                                              #
#                    PROMPT TARGET - NETWORK > SUBNET                          #
#                                                                              #
#                              Version 1.1                                     #
#                                                                              #
################################################################################

# MAPPING REPERTOIRES (ACTION REQUISE)
################################################################################
#
# Les r√©pertoires SVG sources utilisent l'ancien nom "ip".
# Un agent AI doit renommer ces r√©pertoires vers "subnet" :
#
#   old_manager_svg/network/ip/       ‚Üí  old_manager_svg/network/subnet/
#   target_manager_svg/network/ip/    ‚Üí  target_manager_svg/network/subnet/
#
# Fichiers concern√©s : 147 fichiers (old) + 27 fichiers (target)
#
# Note : Le NAV2 dans le nouveau manager s'appelle "Subnet" (vision unifi√©e IP)
#        L'ancien manager utilisait "IP" comme nom de section.
#
# BACKUP OBLIGATOIRE avant toute modification :
#   cp fichier.txt fichier.txt.$(date +%Y%m%dT%H%M%S)
#
################################################################################

# 0. VISION PRODUIT
################################################################################

Subnet est la vue unifi√©e de toutes les adresses IP du client OVHcloud :
- Blocs IP (Failover, vRack, BYOIP)
- IP unitaires (Dedicated Server, VPS, Public Cloud, etc.)
- IPv4 et IPv6 dans la m√™me interface

L'objectif est de donner une vision centralis√©e du patrimoine IP avec :
- Gestion des reverses DNS
- Op√©rations sur les blocs (split/join)
- Configuration BYOIP (Bring Your Own IP)
- Lien vers le service associ√© (serveur, VPS, instance, etc.)


# 1. NAVIGATION
################################################################################

NAV1: Network
NAV2: Subnet (s√©lectionn√©)
NAV3: Region (dropdown dans LEFT PANEL)
NAV4: [G√©n√©ral] [Reverse] [Op√©rations] [BYOIP]

## 1.1 Position dans la hi√©rarchie

```
Network (NAV1)
‚îú‚îÄ‚îÄ Subnet* (NAV2 actif)
‚îú‚îÄ‚îÄ vRack
‚îú‚îÄ‚îÄ Load Balancer
‚îú‚îÄ‚îÄ CDN
‚îú‚îÄ‚îÄ OVHcloud Connect
‚îú‚îÄ‚îÄ Anti-DDoS VAC
‚îî‚îÄ‚îÄ Anti-DDoS Game
```

## 1.2 URLs

| √âcran | URL |
|-------|-----|
| Vue d'ensemble | /network/subnet |
| Bloc IP | /network/subnet/{ip}/{cidr} |
| IP unitaire | /network/subnet/{ip} |
| Tab Reverse | /network/subnet/{ip}/reverse |
| Tab Op√©rations | /network/subnet/{ip}/operations |
| Tab BYOIP | /network/subnet/{ip}/byoip |


# 2. LEFT PANEL (280px)
################################################################################

## 2.1 Structure

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Region          [‚ñº] ‚îÇ  ‚Üê NAV3 : Filtre par r√©gion
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ üîç Rechercher...    ‚îÇ  ‚Üê Recherche IP/nom
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ ‚óèG√©n√©ral (ALL)      ‚îÇ  ‚Üê Vue d'ensemble (toujours visible)
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ Blocs               ‚îÇ  ‚Üê Section blocs IP
‚îÇ ‚óã51.210.x.x/24      ‚îÇ
‚îÇ   Failover /24      ‚îÇ
‚îÇ ‚óã10.0.0.0/16        ‚îÇ
‚îÇ   vRack priv√©       ‚îÇ
‚îÇ ‚óã192.99.x.x/28      ‚îÇ
‚îÇ   BYOIP             ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ IP unitaires        ‚îÇ  ‚Üê Section IP individuelles
‚îÇ ‚óã51.210.45.67       ‚îÇ
‚îÇ   üñ•Ô∏è ns123.ovh      ‚îÇ
‚îÇ ‚óã141.94.12.34       ‚îÇ
‚îÇ   üíª vps-abc        ‚îÇ
‚îÇ ‚óã57.128.99.1        ‚îÇ
‚îÇ   ‚òÅÔ∏è instance-1     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## 2.2 NAV3 : Filtre Region

Source donn√©es: /api/regions.json

| Groupe | Options |
|--------|---------|
| (d√©faut) | ALL |
| EUROPE | EU-West (PAR.FR), EU-West (GRA.FR), EU-West (RBX.FR), EU-Central (SBG.FR), EU-Central (LIM.DE), EU-West (ERI.UK), EU-East (WAW.PL), EU-South (MIL.IT) |
| EUROPE SOUVERAIN | EU-West (RBX.FR-SOV), EU-Central (SBG.FR-SOV), EU-West (GRA.FR-SOV), EU-West (PAR.FR-SOV), EU-South (MIL.IT-SOV) |
| NORTH AMERICA | US-East (VIN.US), US-West (HIL.US), CA-East (BHS.CA), CA-East (TOR.CA) |
| ASIA PACIFIC | AP-Southeast (SGP.SG), AP-Southeast (SYD.AU), AP-South (MUM.IN) |

Comportement:
- Filtre la liste des IP/blocs dans le LEFT PANEL
- Met √† jour les compteurs dans la vue d'ensemble
- Persistance via URL: ?region=eu-west-gra

## 2.3 Types d'√©l√©ments

| Type | Ic√¥ne | Description |
|------|-------|-------------|
| Bloc Failover | üîÄ | IP Failover command√©es |
| Bloc vRack | üîó | IP priv√©es vRack |
| Bloc BYOIP | üì¶ | Bring Your Own IP |
| IP Dedicated Server | üñ•Ô∏è | Serveur d√©di√© |
| IP VPS | üíª | VPS |
| IP Public Cloud | ‚òÅÔ∏è | Instance Public Cloud |
| IP Hosted Private Cloud | üè¢ | VMware/Nutanix |
| IPv6 | üåê | Adresse IPv6 |

## 2.4 √âl√©ment "G√©n√©ral (ALL)"

Toujours en premi√®re position, non filtrable.
Affiche la vue d'ensemble avec statistiques globales.


# 3. RIGHT PANEL - TAB G√âN√âRAL (Vue d'ensemble)
################################################################################

Quand "G√©n√©ral (ALL)" est s√©lectionn√© dans le LEFT PANEL.

## 3.1 Header

```
Subnet - Vue d'ensemble                    [+ Commander]
```

## 3.2 Cartes statistiques (row 1)

| Carte | Contenu |
|-------|---------|
| Total | {total} blocs + IP |
| IPv4 | {ipv4_count} |
| IPv6 | {ipv6_count} |

## 3.3 Cartes statistiques (row 2)

| Carte | Contenu |
|-------|---------|
| Failover | {failover_count} |
| vRack | {vrack_count} |
| BYOIP | {byoip_count} |

## 3.4 Section "Par type"

Barres horizontales montrant la r√©partition :
- üñ•Ô∏è Dedicated Server : {count} IP
- üíª VPS : {count} IP
- ‚òÅÔ∏è Public Cloud : {count} IP
- üîÄ Failover : {count} IP
- üîó vRack : {count} IP
- üì¶ BYOIP : {count} IP

## 3.5 Section "Par r√©gion"

Barres horizontales :
- GRA : {count}
- RBX : {count}
- PAR : {count}
- etc.


# 4. RIGHT PANEL - TAB G√âN√âRAL (Bloc/IP s√©lectionn√©)
################################################################################

Quand un bloc ou une IP est s√©lectionn√© dans le LEFT PANEL.

## 4.1 Header

```
{ip}/{cidr} ou {ip}                                    [‚ãÆ]
{type} ‚Ä¢ {version} ‚Ä¢ {region}
```

## 4.2 Section "Informations"

| Champ | Valeur |
|-------|--------|
| Bloc / Adresse IP | {ip}/{cidr} ou {ip} |
| Version | IPv4 / IPv6 |
| Type | Failover / vRack / BYOIP / Principale |
| R√©gion | {region_label} {flag} |
| Firewall | üü¢ Actif / üî¥ Inactif |
| Mitigation | üü¢ Auto / üü° Permanent / üî¥ D√©sactiv√© |

## 4.3 Section "Attachement" (pour IP unitaires)

| Champ | Valeur |
|-------|--------|
| Type | üñ•Ô∏è Serveur d√©di√© / üíª VPS / ‚òÅÔ∏è Public Cloud |
| Nom | {service_name} |
| Offre | {offer} |
| Datacenter | {datacenter} |
| Statut | üü¢ Attach√© / ‚ö™ Non attach√© |

## 4.4 Actions

```
[Configurer FW] [G√©rer mitigation] [D√©placer IP]
```


# 5. RIGHT PANEL - TAB REVERSE
################################################################################

## 5.1 Description

Gestion des enregistrements DNS inverses (PTR) pour le bloc ou l'IP.

## 5.2 Pour un bloc

Tableau des reverses :

| IP | Reverse | Statut | Actions |
|----|---------|--------|---------|
| {ip} | {reverse} | üü¢ | [‚úèÔ∏è] [üóëÔ∏è] |

## 5.3 Pour une IP unitaire

| Champ | Valeur | Action |
|-------|--------|--------|
| IP | {ip} | - |
| Reverse actuel | {reverse} | [‚úèÔ∏è Modifier] |
| Statut | üü¢ Propag√© / üü° En attente | - |

## 5.4 Actions

```
[+ Ajouter reverse] [Appliquer √† tout le bloc]
```


# 6. RIGHT PANEL - TAB OP√âRATIONS
################################################################################

## 6.1 Description

Op√©rations avanc√©es sur les blocs IP : division (split) et fusion (join).

## 6.2 Section "Diviser (Split)"

Disponible uniquement pour les blocs >= /30

```
Diviser {ip}/{cidr} en :
‚óã 2 √ó /{cidr+1}
‚óã 4 √ó /{cidr+2}
‚óã 8 √ó /{cidr+3}

                                    [Diviser le bloc]
```

## 6.3 Section "Fusionner (Join)"

Disponible si blocs adjacents existent.

```
Blocs adjacents disponibles :
‚òë {adjacent_ip}/{cidr}
‚Üí R√©sultat : {merged_ip}/{cidr-1}

                                    [Fusionner blocs]
```

## 6.4 Historique des op√©rations

| Date | Op√©ration | D√©tails | Statut |
|------|-----------|---------|--------|
| {date} | Split | /24 ‚Üí 2√ó/25 | ‚úÖ |
| {date} | Join | 2√ó/25 ‚Üí /24 | ‚úÖ |


# 7. RIGHT PANEL - TAB BYOIP
################################################################################

## 7.1 Description

Configuration pour les blocs "Bring Your Own IP" import√©s depuis un RIR.

## 7.2 Section "Configuration BYOIP"

| Champ | Valeur |
|-------|--------|
| Bloc BYOIP | {ip}/{cidr} |
| RIR d'origine | RIPE / ARIN / APNIC / etc. |
| ASN | AS{number} |
| Statut import | üü¢ Actif / üü° En cours / üî¥ Erreur |
| Date import | {date} |

## 7.3 Section "Annonces BGP"

| Pr√©fixe | Next-hop | Statut |
|---------|----------|--------|
| {prefix} | {next_hop} | üü¢ Annonc√© / üî¥ Retir√© |

## 7.4 Actions

```
[Modifier annonce] [Retirer BYOIP]
```


# 8. APIS & ENDPOINTS
################################################################################

## 8.1 Liste des IP

```
GET /ip
GET /ip?type=failover
GET /ip?type=vrack
GET /ip?routedTo.serviceName={serviceName}
```

## 8.2 D√©tails IP

```
GET /ip/{ip}
GET /ip/{ip}/reverse
GET /ip/{ip}/delegation
GET /ip/{ip}/firewall
GET /ip/{ip}/mitigation
```

## 8.3 Services associ√©s

```
GET /dedicated/server/{serviceName}/ips
GET /vps/{serviceName}/ips
GET /cloud/project/{serviceName}/ip
```

## 8.4 Op√©rations

```
POST /ip/{ip}/move
POST /ip/{ip}/split
POST /ip/{ip}/join
PUT /ip/{ip}/reverse/{ipReverse}
```

## 8.5 BYOIP

```
GET /ip/byoip/{ip}
POST /ip/byoip/{ip}/announce
DELETE /ip/byoip/{ip}/announce
```


# 9. VARIABLES DYNAMIQUES
################################################################################

| Variable | Source | Exemple |
|----------|--------|---------|
| {ip} | API /ip | 51.210.123.0 |
| {cidr} | API /ip | 24 |
| {type} | API /ip/{ip}.type | failover |
| {version} | Calcul | IPv4 / IPv6 |
| {region} | API /ip/{ip}.routedTo | eu-west-gra |
| {region_label} | /api/regions.json | EU-West (GRA.FR) |
| {flag} | /api/regions.json | üá´üá∑ |
| {service_name} | API /ip/{ip}.routedTo.serviceName | ns1234567.ip-51-210-123.eu |
| {service_type} | API | dedicated / vps / cloud |
| {reverse} | API /ip/{ip}/reverse | mail.example.com |
| {firewall_status} | API /ip/{ip}/firewall | enabled / disabled |
| {mitigation_status} | API /ip/{ip}/mitigation | auto / permanent / off |
| {total} | Comptage | 312 |
| {ipv4_count} | Comptage | 248 |
| {ipv6_count} | Comptage | 64 |


# 10. MODALES
################################################################################

## 10.1 modal-add-reverse

Ajouter/modifier un reverse DNS.

| Champ | Type | Validation |
|-------|------|------------|
| IP | Readonly | - |
| Reverse | Input | FQDN valide |

Actions: [Annuler] [Valider]

## 10.2 modal-move-ip

D√©placer une IP vers un autre service.

| Champ | Type | Options |
|-------|------|---------|
| IP | Readonly | - |
| Service destination | Select | Liste services compatibles |

Actions: [Annuler] [D√©placer]

## 10.3 modal-split-block

Diviser un bloc IP.

| Champ | Type | Options |
|-------|------|---------|
| Bloc | Readonly | - |
| Division | Radio | 2√ó, 4√ó, 8√ó |

Actions: [Annuler] [Diviser]

## 10.4 modal-join-blocks

Fusionner des blocs IP adjacents.

| Champ | Type | Options |
|-------|------|---------|
| Bloc principal | Readonly | - |
| Blocs adjacents | Checkbox | Liste blocs adjacents |
| R√©sultat | Readonly | Bloc fusionn√© |

Actions: [Annuler] [Fusionner]

## 10.5 modal-configure-firewall

Configurer le firewall r√©seau.

| Champ | Type | Options |
|-------|------|---------|
| IP | Readonly | - |
| Statut | Toggle | Actif / Inactif |

Actions: [Annuler] [Appliquer]

## 10.6 modal-configure-mitigation

Configurer la mitigation Anti-DDoS.

| Champ | Type | Options |
|-------|------|---------|
| IP | Readonly | - |
| Mode | Radio | Auto / Permanent / D√©sactiv√© |

Actions: [Annuler] [Appliquer]


# 11. R√àGLES M√âTIER
################################################################################

## 11.1 Affichage

- IPv4 et IPv6 dans la m√™me liste
- Tri par d√©faut : blocs en premier, puis IP unitaires
- Groupement par type dans le LEFT PANEL (sections)

## 11.2 Filtrage r√©gion

- "G√©n√©ral (ALL)" toujours visible m√™me avec filtre actif
- Filtre appliqu√© sur la r√©gion du datacenter de rattachement
- Compteurs mis √† jour selon le filtre

## 11.3 Op√©rations Split/Join

- Split disponible uniquement pour blocs >= /30
- Join disponible uniquement si blocs adjacents du m√™me propri√©taire
- Op√©rations asynchrones (t√¢che cr√©√©e)

## 11.4 BYOIP

- Tab BYOIP visible uniquement pour les blocs de type BYOIP
- N√©cessite configuration BGP pr√©alable
- Annonces g√©r√©es par bloc, pas par IP


# 12. COMPOSANTS ODS UTILIS√âS
################################################################################

- OdsBreadcrumb : Navigation contextuelle
- OdsTabs : NAV4 tabs
- OdsInput : Recherche, formulaires
- OdsSelect : Filtre r√©gion (NAV3)
- OdsDatagrid : Tableaux (reverses, historique)
- OdsCard : Cartes statistiques
- OdsBadge : Statuts (IPv4/IPv6, type)
- OdsButton : Actions
- OdsModal : Modales
- OdsToggle : Activation firewall/mitigation
- OdsRadio : Options split
- OdsCheckbox : S√©lection blocs join
- OdsProgressBar : R√©partition par type/r√©gion


# 13. FICHIERS ASSOCI√âS
################################################################################

Documentation : prompt_target.network.subnet.txt (ce fichier)
Screenshots : prompt_target.network.subnet-screenshot.txt

################################################################################
#                            FIN DU DOCUMENT                                   #
################################################################################
