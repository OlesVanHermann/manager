# Cahier des Charges : iam/policies - Création politique

## 1. VUE D'ENSEMBLE
- **Type** : Page formulaire multi-sections
- **URL** : /iam/policies/create
- **Objectif** : Créer une nouvelle politique d'accès IAM

## 2. DIMENSIONS
| Propriété | Valeur |
|-----------|--------|
| Largeur | 1440px |
| Hauteur | 1200px (scrollable) |

## 3. COMPOSANTS UI
- **OdsHeader** : En-tête OVHcloud
- **OdsSidebar** : Navigation
- **OdsCard** : Container formulaire
- **OdsInput** : Champs texte
- **OdsTextarea** : Description
- **OdsSelect** : Sélecteurs
- **OdsChip** : Tags identités sélectionnées
- **OdsButton** : Annuler, Créer

## 4. HEADER PAGE
| Élément | Description |
|---------|-------------|
| Titre | "Créer une politique" |
| Bouton | "Guides" (ouvre documentation) |
| Description | "La politique contient une liste d'actions autorisées..." |

## 5. SECTIONS FORMULAIRE

### Section 1: Nom de la politique
| Champ | Type | Requis |
|-------|------|--------|
| Nom | Input | Oui |
| Description | Textarea | Non |

### Section 2: Identités
| Champ | Type | Description |
|-------|------|-------------|
| Identités | Multi-select chips | Utilisateurs, groupes, services |
| Bouton | "+ Ajouter des identités" | Ouvre modal sélection |

### Section 3: Types de produits
| Champ | Type | Options |
|-------|------|---------|
| Type | Select | Liste des produits OVHcloud |

### Section 4: Ressources
| Champ | Type | Description |
|-------|------|-------------|
| Ressources | Multi-select | Dépend du type de produit sélectionné |
| Info | Message | "Définissez un type de produits pour sélectionner des ressources" |

### Section 5: Groupes de ressources
| Champ | Type | Description |
|-------|------|-------------|
| Groupes | Select | Groupes de ressources existants |

### Section 6: Conditions
| Champ | Type | Description |
|-------|------|-------------|
| Conditions | Liste | Conditions d'application |
| Bouton | "+ Ajouter une condition" | Ouvre modal |

### Section 7: Actions
| Champ | Type | Description |
|-------|------|-------------|
| Actions | Checkboxes | Liste des actions disponibles |
| Info | Message | "Sélectionnez d'abord un type de produit..." |

## 6. FOOTER FORMULAIRE
| Bouton | Style | Action |
|--------|-------|--------|
| Annuler | Secondary | Retour liste |
| Créer la politique | Primary | Soumet formulaire |

## 7. VALIDATION
| Champ | Règle |
|-------|-------|
| Nom | Requis, 3-64 caractères, unique |
| Type de produit | Requis |
| Actions | Au moins une action |

## 8. APIS & ENDPOINTS
- POST /iam/policies - Créer politique
- GET /iam/products - Liste types de produits
- GET /iam/products/{type}/resources - Ressources par type
- GET /iam/products/{type}/actions - Actions par type
- GET /iam/resource-groups - Groupes de ressources
- GET /iam/identities - Liste identités disponibles

