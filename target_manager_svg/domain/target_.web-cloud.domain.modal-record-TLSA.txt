================================================================================
TARGET SVG DOCUMENTATION
================================================================================
Fichier: target_.web-cloud.domain.modal-record-TLSA.svg
Route:   /web-cloud/domain/{domainName}/zone/add/TLSA
Version: v1 (2025-12-30)
================================================================================

⚠️ DONNÉES DYNAMIQUES
| Exemple SVG                     | Source API                              |
|---------------------------------|-----------------------------------------|
| exemple.com                     | /domain/zone → zoneName                 |
| 443                             | Input utilisateur (port)                |
| tcp                             | Select utilisateur (protocole)          |
| www                             | Input utilisateur (sous-domaine)        |
| 3 - DANE-EE                     | Select utilisateur (usage)              |
| 1 - SPKI                        | Select utilisateur (selector)           |
| 1 - SHA-256                     | Select utilisateur (matching)           |
| 8d02536c...                     | Input utilisateur (hash certificat)     |

================================================================================

# STRUCTURE MODAL
1. HEADER - Titre "Ajouter une entrée DNS - TLSA" + badge TLSA (fond OVH bleu)
2. CONTENT
   - Bannière info DANE/TLSA
   - Port + Protocole + Sous-domaine (3 colonnes)
   - TTL
   - Usage du certificat (select)
   - Sélecteur (select)
   - Type de correspondance (select)
   - Données du certificat (hash)
   - Commande de génération
   - Aperçu de l'enregistrement
3. FOOTER - Boutons Annuler / Ajouter l'entrée

# MODAL TYPE
- Type: Formulaire TLSA (DANE)
- Dimensions: 700x740px
- Header: Fond OVH bleu (#000E9C)
- Badge: Vert pour type TLSA (sécurité TLS)

# CHAMPS
| Champ | Type | Obligatoire | Description |
|-------|------|-------------|-------------|
| Port | number | Oui | Port du service (443, 25, 465...) |
| Protocole | select | Oui | tcp ou udp |
| Sous-domaine | text | Non | Hostname du service |
| TTL | number | Non | Durée de cache |
| Usage | select | Oui | 0-3 (voir tableau) |
| Selector | select | Oui | 0-1 (cert ou SPKI) |
| Matching | select | Oui | 0-2 (full, SHA-256, SHA-512) |
| Hash | text | Oui | Hash du certificat |

# USAGE (Certificate Usage)
| Code | Nom | Description |
|------|-----|-------------|
| 0 | PKIX-TA | CA constraint (doit être dans chaîne PKIX) |
| 1 | PKIX-EE | Service certificate (cert final, chaîne PKIX) |
| 2 | DANE-TA | Trust anchor (CA de confiance sans PKIX) |
| 3 | DANE-EE | Domain-issued cert (certificat auto-signé OK) |

# SELECTOR
| Code | Nom | Description |
|------|-----|-------------|
| 0 | Cert | Certificat complet (DER) |
| 1 | SPKI | Subject Public Key Info seulement |

# MATCHING TYPE
| Code | Nom | Longueur hash |
|------|-----|---------------|
| 0 | Full | Données complètes (non hashées) |
| 1 | SHA-256 | 64 caractères hex |
| 2 | SHA-512 | 128 caractères hex |

# COMBINAISON RECOMMANDÉE
Usage=3, Selector=1, Matching=1 (DANE-EE + SPKI + SHA-256)
- Permet certificats auto-signés/Let's Encrypt
- Hash stable même si certificat renouvelé (même clé)
- SHA-256 suffisant et largement supporté

# GÉNÉRATION HASH
```bash
# SPKI SHA-256 (3 1 1)
openssl x509 -in cert.pem -pubkey -noout | \
  openssl pkey -pubin -outform DER | \
  openssl sha256

# Cert complet SHA-256 (3 0 1)
openssl x509 -in cert.pem -outform DER | openssl sha256
```

# PRÉREQUIS
- DNSSEC doit être activé sur le domaine
- Clients doivent supporter DANE (navigateurs limités, serveurs mail OK)

# API ENDPOINTS
POST /domain/zone/{zone}/record - Créer enregistrement TLSA
POST /domain/zone/{zone}/refresh - Rafraîchir zone

# RFC
RFC 6698 - The DNS-Based Authentication of Named Entities (DANE)

================================================================================
