# Cahier des Charges : web-cloud/email - Mailing lists

## 1. RESUME EXECUTIF

### Perimetre
Page de gestion des listes de diffusion.

### Objectif fonctionnel
- Voir les mailing lists
- Creer de nouvelles listes
- Gerer les abonnes
- Configurer la moderation

---

## 2. LAYOUT

### Structure page avec description + bouton + tableau + stats

---

## 3. COMPOSANTS UI

### Description page
| Element | Description |
|---------|-------------|
| Texte | Creez des listes de diffusion pour envoyer des e-mails a plusieurs destinataires. |

### Bouton action
| Element | Description |
|---------|-------------|
| Type | Primary |
| Texte | Creer une mailing list |

### Tableau mailing lists
| Colonne | Description |
|---------|-------------|
| Nom | Nom affichage (bold) |
| Adresse | Email de la liste (lien bleu) |
| Abonnes | Nombre d'abonnes |
| Moderation | Badge Activee/Desactivee |
| Etat | Badge Active/Inactive |
| Actions | Menu ⋮ |

### Etats moderation
| Etat | Badge |
|------|-------|
| Activee | Vert clair |
| Desactivee | Gris clair |

### Etats liste
| Etat | Badge |
|------|-------|
| Active | Vert clair |
| Inactive | Gris clair |

### Menu actions (⋮)
| Option | Description |
|--------|-------------|
| Gerer les abonnes | Manage subscribers |
| Modifier les parametres | Edit settings |
| Voir les moderateurs | View moderators |
| --- | Separateur |
| Supprimer | Destructif (rouge) |

### Info compteur
| Element | Description |
|---------|-------------|
| Texte | X mailing lists sur Y disponibles |

### Cartes stats (3 cartes)
| Stat | Valeur |
|------|--------|
| Total abonnes | 1,258 |
| Listes actives | 2 |
| Avec moderation | 2 |

---

## 4. APIS & DONNEES

### Endpoints
```
GET /email/domain/{domain}/mailingList
POST /email/domain/{domain}/mailingList
DELETE /email/domain/{domain}/mailingList/{name}
PUT /email/domain/{domain}/mailingList/{name}
GET /email/domain/{domain}/mailingList/{name}/subscriber
POST /email/domain/{domain}/mailingList/{name}/subscriber
DELETE /email/domain/{domain}/mailingList/{name}/subscriber/{email}
GET /email/domain/{domain}/mailingList/{name}/moderator
```

### Modele
```typescript
interface MailingList {
  name: string;
  displayName: string;
  email: string;
  subscriberCount: number;
  moderationEnabled: boolean;
  state: 'active' | 'inactive';
}

interface MailingListSubscriber {
  email: string;
  subscribedDate: string;
}

interface MailingListModerator {
  email: string;
}

interface MailingListStats {
  totalSubscribers: number;
  activeLists: number;
  withModeration: number;
}
```

---

## 5. TRADUCTIONS (i18n)

```json
{
  "email_mailing_title": "Mailing lists",
  "email_mailing_desc": "Creez des listes de diffusion pour envoyer des e-mails a plusieurs destinataires.",
  "email_mailing_create": "Creer une mailing list",
  "email_mailing_col_name": "Nom",
  "email_mailing_col_address": "Adresse",
  "email_mailing_col_subscribers": "Abonnes",
  "email_mailing_col_moderation": "Moderation",
  "email_mailing_col_state": "Etat",
  "email_mailing_moderation_on": "Activee",
  "email_mailing_moderation_off": "Desactivee",
  "email_mailing_state_active": "Active",
  "email_mailing_state_inactive": "Inactive",
  "email_mailing_action_subscribers": "Gerer les abonnes",
  "email_mailing_action_settings": "Modifier les parametres",
  "email_mailing_action_moderators": "Voir les moderateurs",
  "email_mailing_action_delete": "Supprimer",
  "email_mailing_count": "{current} mailing lists sur {max} disponibles",
  "email_mailing_stat_total": "Total abonnes",
  "email_mailing_stat_active": "Listes actives",
  "email_mailing_stat_moderated": "Avec moderation"
}
```

---

## 6. REGLES METIER

- Moderation = messages approuves avant diffusion
- Moderateurs = personnes qui approuvent
- Limite de listes selon offre
- Stats agregees affichees en bas
