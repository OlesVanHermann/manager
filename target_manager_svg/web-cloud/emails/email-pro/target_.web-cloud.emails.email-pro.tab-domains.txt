# Cahier des Charges : web-cloud/email-pro - Onglet Domaines

## 1. RESUME EXECUTIF

### Perimetre
Onglet de gestion des domaines associes au service Email Pro.

### Objectif fonctionnel
- Voir les domaines du service
- Verifier la configuration DNS
- Ajouter de nouveaux domaines

---

## 2. LAYOUT

### Structure onglet avec bouton action + tableau + info

---

## 3. COMPOSANTS UI

### Bouton action
| Element | Description |
|---------|-------------|
| Type | Primary |
| Texte | + Ajouter un domaine |

### Tableau domaines
| Colonne | Description |
|---------|-------------|
| Domaine | Nom de domaine + badge Principal |
| Type | Autoritatif / Alias |
| Diagnostic MX | Badge OK / Erreur |
| Diagnostic SPF | Badge OK / A configurer |
| Statut | Badge Valide / En attente |
| Actions | Menu â‹® |

### Badge "Principal"
| Element | Description |
|---------|-------------|
| Couleur | Bleu clair |
| Texte | Principal |
| Position | Apres le nom de domaine |

### Etats diagnostic
| Etat | Couleur |
|------|---------|
| OK | Vert |
| A configurer | Orange |
| Erreur | Rouge |

### Bandeau info
| Element | Description |
|---------|-------------|
| Type | Info (bleu) |
| Texte | Les diagnostics MX et SPF permettent de verifier la bonne configuration de vos enregistrements DNS. |

---

## 4. APIS & DONNEES

### Endpoints
```
GET /email/pro/{service}/domain
POST /email/pro/{service}/domain
DELETE /email/pro/{service}/domain/{domain}
GET /email/pro/{service}/domain/{domain}/diagnostic
```

### Modele
```typescript
interface EmailProDomain {
  name: string;
  type: 'authoritative' | 'alias';
  mxIsValid: boolean;
  spfIsValid: boolean;
  state: 'ok' | 'inCreation' | 'suspended';
  isPrimary: boolean;
}

interface DomainDiagnostic {
  mx: { isValid: boolean; expectedRecords: string[] };
  spf: { isValid: boolean; expectedValue: string };
  dkim: { isValid: boolean };
}
```

---

## 5. TRADUCTIONS (i18n)

```json
{
  "email_pro_domains_title": "Domaines",
  "email_pro_domains_add": "Ajouter un domaine",
  "email_pro_domains_col_domain": "Domaine",
  "email_pro_domains_col_type": "Type",
  "email_pro_domains_col_mx": "Diagnostic MX",
  "email_pro_domains_col_spf": "Diagnostic SPF",
  "email_pro_domains_col_status": "Statut",
  "email_pro_domains_type_auth": "Autoritatif",
  "email_pro_domains_type_alias": "Alias",
  "email_pro_domains_badge_primary": "Principal",
  "email_pro_domains_diag_ok": "OK",
  "email_pro_domains_diag_config": "A configurer",
  "email_pro_domains_status_valid": "Valide",
  "email_pro_domains_info": "Les diagnostics MX et SPF permettent de verifier la bonne configuration de vos enregistrements DNS."
}
```

---

## 6. REGLES METIER

- Un domaine principal obligatoire
- Domaines alias = domaines supplementaires
- MX doit pointer vers Email Pro
- SPF doit inclure OVH
- Diagnostic automatique DNS
