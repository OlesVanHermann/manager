================================================================================
TARGET SVG DOCUMENTATION
================================================================================
Fichier: target_.web-cloud.voip.sms.compose.svg
Route:   /web-cloud/voip/sms/{serviceName}/compose
NAV:     NAV1=Web Cloud | NAV2=VoIP | NAV3=Envoyer SMS
Version: v1 (2025-12-28)
================================================================================

## DESCRIPTION

Interface de composition et d'envoi de SMS. Formulaire complet avec
expéditeur, destinataires, message, aperçu et options d'envoi.

================================================================================

## DONNEES DYNAMIQUES

| Exemple SVG              | Source API                                              |
|--------------------------|---------------------------------------------------------|
| 1,247 SMS                | GET /sms/{serviceName} → creditsLeft                    |
| MonEntreprise            | GET /sms/.../senders → senders[].name                   |
| 97 / 160                 | calculé côté client                                     |
| 1 SMS                    | ceil(length / 160) ou ceil(length / 70) si Unicode     |
| GSM-7                    | détecté côté client selon caractères                   |

================================================================================

## STRUCTURE PAGE

1. LEFT PANEL (280px)
   - Recherche comptes SMS
   - Liste des comptes

2. RIGHT PANEL (1096px)
   - Header: Titre + crédit restant

   - BLOC EXPEDITEUR:
     * Dropdown noms expéditeurs
     * Note caractères max

   - BLOC DESTINATAIRES:
     * Input numéros (tags)
     * Bouton supprimer
     * Compteur destinataires
     * Lien importer CSV

   - BLOC MESSAGE:
     * Textarea message
     * Compteur caractères
     * Nombre de SMS
     * Type encodage
     * Lien modèles

   - BLOC APERCU:
     * Mockup téléphone
     * Bulle SMS
     * Info expéditeur/destinataire

   - BLOC OPTIONS:
     * Toggle envoi immédiat
     * Date picker programmation
     * Toggle accusé réception

   - ACTIONS: Envoyer, Aperçu test, Annuler

================================================================================

## API ENDPOINTS

### Liste expéditeurs
GET /sms/{serviceName}/senders
Response: [{ name, validated }]

### Envoyer SMS
POST /sms/{serviceName}/outgoing
Body: { sender, receivers: [], message, scheduledDate?, deliveryReceipt? }
Response: { jobId, creditsUsed, status }

### Importer destinataires CSV
POST /sms/{serviceName}/receivers/import
Body: FormData avec fichier CSV
Response: { count, errors }

### Liste modèles
GET /sms/{serviceName}/templates
Response: [{ id, name, content }]

================================================================================

## REGLES METIER

- Expéditeur: 11 caractères max, alphanumérique
- SMS GSM-7: 160 caractères (ou 153 si concaténé)
- SMS Unicode: 70 caractères (ou 67 si concaténé)
- Format destinataire: international (+33...)
- Programmation: jusqu'à 30 jours à l'avance
- Accusé de réception: coût additionnel

================================================================================

## COMPOSANTS REACT

- SmsComposeTab (container)
- CreditBadge
- SenderSelector
- RecipientsInput
- PhoneTagInput
- CsvImportButton
- MessageTextarea
- CharacterCounter
- SmsPreviewPhone
- SendOptionsCard
- DateTimePicker
- TemplatesModal

================================================================================
FIN DOCUMENTATION
================================================================================
