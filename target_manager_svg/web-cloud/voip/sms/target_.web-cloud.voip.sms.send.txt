================================================================================
TARGET SVG DOCUMENTATION
================================================================================
Fichier: target_.web-cloud.voip.sms.send.svg
Route:   /web-cloud/voip/sms/{serviceName}/send
NAV:     NAV1=Web Cloud | NAV2=VoIP | NAV3=Envoyer
Version: v1 (2025-12-28)
================================================================================

## DESCRIPTION

Interface d'envoi de SMS unitaire ou multiple. Formulaire complet avec
sélection d'émetteur, destinataires, message et options avancées.

================================================================================

## DONNEES DYNAMIQUES

| Exemple SVG              | Source API                                              |
|--------------------------|---------------------------------------------------------|
| sms-abc123-1             | GET /sms → serviceName                                  |
| 12 450                   | GET /sms/{sn} → creditsLeft                             |
| MonEntreprise            | GET /sms/{sn}/senders → senders[].name                  |
| +33612345678             | Input utilisateur                                       |
| 98 / 160                 | Comptage caractères (frontend)                          |
| 2 crédits                | Calcul: destinataires × SMS                             |
| Délivré/En cours/Échec   | GET /sms/{sn}/outgoing → status                         |

================================================================================

## STRUCTURE PAGE

1. LEFT PANEL (280px)
   - Recherche comptes SMS
   - Liste des comptes avec crédits

2. RIGHT PANEL (1096px)
   - Header: Compte + Description
   - NAV3 tabs: Général | [Envoyer] | Campagnes | Reçus | Modèles

   - INFO BANNER: Crédits + coût estimé

   - FORMULAIRE (700px):
     * Émetteur (dropdown)
     * Destinataires (textarea + import CSV)
     * Message (textarea avec compteur)
     * Options avancées (différé, accusé, classe)
     * Boutons: Envoyer, Aperçu, Annuler

   - PANNEAU LATÉRAL (310px):
     * Historique derniers envois
     * Statut délivrance

================================================================================

## API ENDPOINTS

### Émetteurs disponibles
GET /sms/{serviceName}/senders
Response: [{ name, status, isDefault }]

### Envoyer SMS
POST /sms/{serviceName}/jobs
Body: {
  sender, receivers: [],
  message, charset,
  class, differedPeriod,
  noStopClause, tag
}
Response: { totalCreditsRemoved, ids: [] }

### Historique envois
GET /sms/{serviceName}/outgoing
Query: { dateTime.from, dateTime.to }
Response: [{ id, receiver, message, status, sentAt }]

### Statut SMS
GET /sms/{serviceName}/outgoing/{id}
Response: { deliveryReceipt, ptt, status }

================================================================================

## CLASSES SMS

| Classe | Description                          |
|--------|--------------------------------------|
| 0      | Flash (affiché directement)          |
| 1      | Standard (stocké sur téléphone)      |
| 2      | SIM (stocké sur carte SIM)           |

================================================================================

## REGLES METIER

- 160 caractères max pour 1 SMS (7 bits GSM)
- 70 caractères si Unicode
- Concaténation automatique si plus long
- Max 1000 destinataires par envoi
- Format E.164 obligatoire (+33...)
- Envoi différé max 7 jours
- Classe 1 par défaut

================================================================================

## CARACTÈRES SPÉCIAUX

Ces caractères comptent pour 2:
| ^ { } [ ] ~ \ €

Caractères non GSM → passage en Unicode (70 chars/SMS)

================================================================================

## COMPOSANTS REACT

- SmsSendTab (container)
- SmsSenderSelect
- SmsReceiverInput
- SmsMessageEditor
- SmsCharacterCounter
- SmsCostCalculator
- SmsSendOptions
- SmsRecentHistory
- SmsPreviewModal
- SmsImportCsvModal

================================================================================
FIN DOCUMENTATION
================================================================================
