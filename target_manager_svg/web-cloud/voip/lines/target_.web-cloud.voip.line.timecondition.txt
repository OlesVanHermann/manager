================================================================================
TARGET SVG DOCUMENTATION
================================================================================
Fichier: target_.web-cloud.voip.line.timecondition.svg
Route:   /web-cloud/voip/lines/{serviceName}/timecondition
NAV:     NAV1=Web Cloud | NAV2=VoIP | NAV3=Plages horaires
Version: v1 (2025-12-28)
================================================================================

## DESCRIPTION

Configuration des plages horaires de la ligne. Définition des créneaux
d'ouverture et redirections automatiques hors horaires.

================================================================================

## DONNEES DYNAMIQUES

| Exemple SVG              | Source API                                              |
|--------------------------|---------------------------------------------------------|
| Plage 1 - Heures ouvrées | GET /telephony/{ba}/timeCondition/{sn} → slots[].name   |
| Ligne principale         | slots[].action.target                                   |
| 20 sec                   | slots[].timeout                                         |
| Lundi 08h-12h            | conditions[].weekDay + timeFrom + timeTo                |
| slot1/slot2/slot3        | conditions[].policy                                     |

================================================================================

## STRUCTURE PAGE

1. LEFT PANEL (280px)
   - Recherche lignes
   - Liste des lignes

2. RIGHT PANEL (1096px)
   - Header: Titre
   - NAV3 tabs: Général | Appels | Téléphone | Options | [Plages horaires]

   - TOGGLE ACTIVATION

   - BLOC: Configuration redirections (3 slots)
     * Slot 1 (bleu): Heures ouvrées
     * Slot 2 (jaune): Pause déjeuner
     * Slot 3 (rose): Hors horaires
     * Chaque slot: nom, destination, timeout, bouton éditer

   - BLOC: Planning hebdomadaire
     * Calendrier 7 jours × 24h
     * Blocs colorés par slot
     * Drag & drop pour modifier

   - ACTIONS: Enregistrer, Annuler, Ajouter condition

================================================================================

## API ENDPOINTS

### Configuration time condition
GET /telephony/{billingAccount}/timeCondition/{serviceName}
Response: {
  status, slots: [{
    name, action, timeout, type
  }]
}

### Modifier slot
PUT /telephony/{billingAccount}/timeCondition/{serviceName}/slot/{slotId}
Body: { name, action, timeout }

### Liste conditions
GET /telephony/{billingAccount}/timeCondition/{serviceName}/condition
Response: [{
  id, weekDay, timeFrom, timeTo, policy
}]

### Ajouter condition
POST /telephony/{billingAccount}/timeCondition/{serviceName}/condition
Body: { weekDay, timeFrom, timeTo, policy }

### Modifier condition
PUT /telephony/{billingAccount}/timeCondition/{serviceName}/condition/{id}

### Supprimer condition
DELETE /telephony/{billingAccount}/timeCondition/{serviceName}/condition/{id}

================================================================================

## SLOTS DISPONIBLES

| Slot        | Couleur | Usage par défaut        |
|-------------|---------|-------------------------|
| slot1       | Bleu    | Heures ouvrées          |
| slot2       | Jaune   | Pause / intermédiaire   |
| slot3       | Rose    | Hors horaires           |
| unavailable | Gris    | Non disponible          |

================================================================================

## TIMEOUTS

Valeurs: 5, 10, 15, 20, 30, 45, 60 secondes

================================================================================

## REGLES METIER

- Plages sans chevauchement
- Min 1 slot configuré si activé
- Timeout par défaut: 20 sec
- Actions possibles: ligne, messagerie, numéro externe
- Jours: monday → sunday
- Format heure: HH:MM:SS

================================================================================

## COMPOSANTS REACT

- LineTimeConditionTab (container)
- TimeConditionToggle
- SlotConfigCard
- WeeklyCalendar
- CalendarDayRow
- TimeSlotBlock (draggable)
- EditSlotModal
- AddConditionModal

================================================================================
FIN DOCUMENTATION
================================================================================
