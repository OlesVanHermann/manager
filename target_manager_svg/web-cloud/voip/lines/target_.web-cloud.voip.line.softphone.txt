================================================================================
TARGET SVG DOCUMENTATION
================================================================================
Fichier: target_.web-cloud.voip.line.softphone.svg
Route:   /web-cloud/voip/groups/{billingAccount}/lines/{serviceName}/phone/softphone
NAV:     NAV1=Web Cloud | NAV2=VoIP | NAV3=Lignes | NAV4=Téléphone | NAV5=Softphone
Version: v1 (2025-12-28)
================================================================================

## DESCRIPTION

Configuration et gestion du softphone. Permet d'utiliser la ligne VoIP depuis
une application sur ordinateur, smartphone ou navigateur web.

================================================================================

## DONNEES DYNAMIQUES

| Exemple SVG              | Source API                                              |
|--------------------------|---------------------------------------------------------|
| 0033972123456            | GET /telephony/{ba}/line/{sn} → serviceName             |
| Activé/Désactivé         | GET /telephony/{ba}/line/{sn}/softphone → enabled       |
| 28/12/2024 14:32         | softphone → lastConnection                              |
| sip.ovh.net:5060         | softphone → sipServer                                   |
| MacBook Pro - Chrome     | softphone.devices[].name                                |
| WebRTC/iOS App/Android   | softphone.devices[].type                                |
| 192.168.1.42             | softphone.devices[].ip                                  |
| Actif                    | softphone.devices[].status                              |
| 2                        | count(devices where status=active)                      |

================================================================================

## STRUCTURE PAGE

1. LEFT PANEL (280px)
   - NAV3 tabs: [Lignes] | Numéros | Fax | Abrégés
   - Liste des lignes

2. RIGHT PANEL (1096px)
   - Header: Numéro + Description
   - NAV4 tabs: Général | [Téléphone] | Appels | Transferts | Messagerie | Conso | Options
   - NAV5 sub-tabs: Configuration | Plug & Phone | [Softphone]

   - INFO BANNER: Application Softphone OVH

   - BLOC: Configuration Softphone (1040x150)
     * Statut (activé/désactivé) + dernière connexion
     * Identifiants SIP (login, serveur) + bouton mot de passe
     * QR Code configuration rapide

   - BLOC: Télécharger l'application (1040x160)
     * Ordinateur: Windows / macOS
     * Mobile: iOS / Android
     * Navigateur: WebRTC

   - TABLE: Appareils connectés (1040x180)
     * Colonnes: Appareil | Type | IP | Dernière activité | Statut | Actions
     * Actions: Déconnecter

   - ACTIONS:
     * Régénérer mot de passe
     * Déconnecter tout

================================================================================

## API ENDPOINTS

### Configuration softphone
GET /telephony/{billingAccount}/line/{serviceName}/softphone
Response: {
  enabled, sipServer, sipPort, lastConnection,
  devices: [{ id, name, type, ip, lastActivity, status }]
}

### Régénérer mot de passe SIP
POST /telephony/{billingAccount}/line/{serviceName}/softphone/resetPassword
Response: { password }

### Déconnecter appareil
DELETE /telephony/{billingAccount}/line/{serviceName}/softphone/devices/{id}

### Déconnecter tous
DELETE /telephony/{billingAccount}/line/{serviceName}/softphone/devices

### QR Code configuration
GET /telephony/{billingAccount}/line/{serviceName}/softphone/qrcode
Response: { qrCodeBase64 }

================================================================================

## TYPES D'APPAREILS

| Type     | Description                  |
|----------|------------------------------|
| WebRTC   | Navigateur web               |
| iOS App  | Application iPhone/iPad      |
| Android  | Application Android          |
| Desktop  | Application Windows/macOS    |

================================================================================

## LIENS TÉLÉCHARGEMENT

| Plateforme | URL                                    |
|------------|----------------------------------------|
| Windows    | https://www.ovhtelecom.fr/...          |
| macOS      | https://www.ovhtelecom.fr/...          |
| iOS        | App Store                              |
| Android    | Google Play                            |
| WebRTC     | https://softphone.ovh.net/             |

================================================================================

## REGLES METIER

- Max 5 appareils connectés simultanément
- Déconnexion automatique après 7 jours d'inactivité
- Mot de passe SIP: régénération invalide les connexions
- WebRTC: Chrome, Firefox, Edge supportés
- QR Code: configuration automatique des identifiants

================================================================================

## COMPOSANTS REACT

- LineSoftphoneTab (container)
- SoftphoneStatusCard (statut + identifiants)
- SoftphoneQRCode
- DownloadAppsCard
- ConnectedDevicesTable
- DisconnectDeviceButton
- ResetPasswordModal
- DisconnectAllConfirmModal

================================================================================
FIN DOCUMENTATION
================================================================================
