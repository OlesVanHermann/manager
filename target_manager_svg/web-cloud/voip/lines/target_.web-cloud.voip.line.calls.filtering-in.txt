================================================================================
TARGET SVG DOCUMENTATION
================================================================================
Fichier: target_.web-cloud.voip.line.calls.filtering-in.svg
Route:   /web-cloud/voip/groups/{billingAccount}/lines/{serviceName}/calls/filtering-in
Version: v1 (2025-12-28)
================================================================================

## DESCRIPTION

Gestion des règles de filtrage des appels entrants. Permet de bloquer,
autoriser ou rediriger des appels selon leur origine.

================================================================================

## STRUCTURE PAGE

### NAV4 Tabs
- Général | Téléphone | [Appels] | Transferts | Messagerie | Conso | Options

### NAV5 Sous-tabs
- Historique | [Filtrage entrant] | Filtrage sortant

### Contenu
- Toggle global activation
- Toolbar: Refresh + Ajouter règle
- Table des règles
- Bloc aide
- Bloc types de règles

================================================================================

## DONNÉES DYNAMIQUES

| Élément SVG      | Source API                                    |
|------------------|-----------------------------------------------|
| Statut global    | GET /telephony/{ba}/line/{sn} → filtering     |
| Liste règles     | GET /telephony/{ba}/line/{sn}/calls/filtering |
| Détail règle     | filtering[].{type,criteria,action,schedule}   |

================================================================================

## TOGGLE GLOBAL

- Activé (vert): Filtrage actif, règles appliquées
- Désactivé (gris): Tous les appels passent
- API: PUT /telephony/{ba}/line/{sn} → filtering: true/false

================================================================================

## TABLE RÈGLES

| Colonne   | Description                          |
|-----------|--------------------------------------|
| Statut    | Toggle activé/désactivé par règle    |
| Type      | Liste noire, Liste blanche, Masqué   |
| Critère   | Numéro, préfixe, pattern             |
| Action    | Rejeter, Messagerie, Rediriger       |
| Horaires  | Toujours, Plages horaires            |
| Actions   | ✎ Modifier, ✕ Supprimer              |

================================================================================

## TYPES DE RÈGLES

| Type           | Description                              |
|----------------|------------------------------------------|
| Liste noire    | Bloquer numéros/préfixes spécifiques     |
| Liste blanche  | Autoriser uniquement certains numéros    |
| Numéro masqué  | Gérer appels anonymes                    |
| International  | Filtrer appels internationaux            |
| Numéro spécial | Filtrer numéros surtaxés                 |

================================================================================

## ACTIONS POSSIBLES

| Action     | Badge    | Comportement                    |
|------------|----------|--------------------------------|
| Rejeter    | Rouge    | Tonalité occupé                |
| Messagerie | Jaune    | Rediriger vers messagerie      |
| Rediriger  | Bleu     | Transférer vers autre numéro   |
| Autoriser  | Vert     | Laisser passer (liste blanche) |

================================================================================

## API CRUD RÈGLES

| Action    | Méthode | Endpoint                               |
|-----------|---------|----------------------------------------|
| Lister    | GET     | /telephony/{ba}/line/{sn}/calls/filtering |
| Créer     | POST    | /telephony/{ba}/line/{sn}/calls/filtering |
| Modifier  | PUT     | /telephony/{ba}/line/{sn}/calls/filtering/{id} |
| Supprimer | DELETE  | /telephony/{ba}/line/{sn}/calls/filtering/{id} |
| Toggle    | PUT     | .../filtering/{id} → enabled: bool     |

================================================================================

## MODAL CRÉATION RÈGLE

Champs:
- Type: Select (Liste noire, Liste blanche, Masqué)
- Critère: Input numéro ou pattern (+33*, etc.)
- Action: Select (Rejeter, Messagerie, Rediriger)
- Horaires: Toggle toujours / Sélection plages
- Priorité: Ordre d'évaluation

================================================================================
