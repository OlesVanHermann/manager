================================================================================
TARGET SVG DOCUMENTATION
================================================================================
Fichier: target_.web-cloud.voip.line.click2call.svg
Route:   /web-cloud/voip/groups/{billingAccount}/lines/{serviceName}/calls/click2call
NAV:     NAV1=Web Cloud | NAV2=VoIP | NAV3=Lignes | NAV4=Appels | NAV5=Click-to-Call
Version: v1 (2025-12-28)
================================================================================

## DESCRIPTION

Configuration et utilisation du Click-to-Call. Permet d'initier des appels
depuis une application externe via l'API OVH.

================================================================================

## DONNEES DYNAMIQUES

| Exemple SVG              | Source API                                              |
|--------------------------|---------------------------------------------------------|
| 0033972123456            | GET /telephony/{ba}/line/{sn} → serviceName             |
| Actif/Inactif            | GET /telephony/{ba}/line/{sn}/click2call → status       |
| 28/12/2024 14:32         | click2callHistory[].dateTime                            |
| +33 1 23 45 67 89        | click2callHistory[].calledNumber                        |
| 03:45                    | click2callHistory[].duration                            |
| OK/Échec                 | click2callHistory[].status                              |
| 192.168.1.100            | click2callHistory[].sourceIp                            |

================================================================================

## STRUCTURE PAGE

1. LEFT PANEL (280px)
   - NAV3 tabs: [Lignes] | Numéros | Fax | Abrégés
   - Liste des lignes

2. RIGHT PANEL (1096px)
   - Header: Numéro + Description
   - NAV4 tabs: Général | Téléphone | [Appels] | Transferts | Messagerie | Conso | Options
   - NAV5 sub-tabs: Historique | Filtrage | [Click-to-Call] | Interception

   - INFO BANNER: Explication Click-to-Call

   - BLOC: Configuration Click-to-Call (1040x120)
     * Statut du service (Actif/Inactif)
     * Authentification: Token API
     * Bouton "Générer token"

   - BLOC: Comment utiliser (1040x160)
     * Endpoint API (POST)
     * Paramètres (calledNumber)
     * Exemple code

   - TABLE: Derniers appels Click-to-Call (1040x200)
     * Colonnes: Date | Numéro appelé | Durée | Statut | IP source
     * 3 derniers appels

   - ACTIONS:
     * Tester un appel
     * Documentation API

================================================================================

## API ENDPOINTS

### Initier appel Click-to-Call
POST /telephony/{billingAccount}/line/{serviceName}/click2CallUser
Body: {
  calledNumber: string  // Format international +33...
}
Response: { callId }

### Historique Click-to-Call
GET /telephony/{billingAccount}/line/{serviceName}/click2CallUser
Response: [{
  id, dateTime, calledNumber, duration, status, sourceIp
}]

### Statut service
GET /telephony/{billingAccount}/line/{serviceName}/options
Response: { click2CallEnabled: boolean }

================================================================================

## STATUTS APPEL

| Statut | Badge | Description                    |
|--------|-------|--------------------------------|
| OK     | Vert  | Appel établi avec succès       |
| Échec  | Rouge | Appel non abouti               |

================================================================================

## REGLES METIER

- Authentification API requise (token OVH)
- Le téléphone de la ligne sonne en premier
- Puis l'appel est établi vers le numéro cible
- Numéro cible: format international obligatoire
- Historique conservé 30 jours
- Limité par quotas API

================================================================================

## COMPOSANTS REACT

- LineClick2CallTab (container)
- Click2CallStatusCard (statut service)
- Click2CallApiCard (endpoint + params)
- Click2CallHistoryTable (derniers appels)
- TestCallModal (test appel)
- GenerateTokenModal

================================================================================
FIN DOCUMENTATION
================================================================================
