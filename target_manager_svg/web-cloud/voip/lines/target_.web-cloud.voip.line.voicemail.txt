================================================================================
TARGET SVG DOCUMENTATION
================================================================================
Fichier: target_.web-cloud.voip.line.voicemail.svg
Route:   /web-cloud/voip/groups/{billingAccount}/lines/{serviceName}/voicemail
Version: v1 (2025-12-28)
================================================================================

## DESCRIPTION

Gestion de la messagerie vocale de la ligne VoIP. Liste des messages,
√©coute, t√©l√©chargement et configuration des param√®tres.

================================================================================

## STRUCTURE PAGE

### NAV4 Tabs
- G√©n√©ral | T√©l√©phone | Appels | Transferts | [Messagerie] | Conso | Options

### Contenu
- Banni√®re statut (active, nb messages, espace)
- Table des messages vocaux
- Configuration rapide

================================================================================

## DONN√âES DYNAMIQUES

| √âl√©ment SVG        | Source API                                    |
|--------------------|-----------------------------------------------|
| Statut messagerie  | GET /telephony/{ba}/line/{sn}/options ‚Üí voicemailEnabled |
| Liste messages     | GET /telephony/{ba}/line/{sn}/voicemail       |
| Nb nouveaux        | voicemail[].status == 'new' count             |
| Espace utilis√©     | GET /telephony/{ba}/line/{sn}/voicemail/info  |
| Email notification | options ‚Üí voicemailNotify                     |
| Code PIN           | options ‚Üí voicemailPin                        |

================================================================================

## TABLE MESSAGES

| Colonne   | Source                  | Format           |
|-----------|-------------------------|------------------|
| Checkbox  | S√©lection multiple      | UI               |
| Date      | message.date            | DD/MM/YYYY HH:mm |
| Appelant  | message.caller + lookup | Num√©ro + Nom     |
| Dur√©e     | message.duration        | m:ss             |
| Statut    | message.status          | Badge Nouveau/Lu |
| Actions   | ‚ñ∂ üì• ‚úï                  | Boutons          |

### Statuts messages
| Statut   | Badge     | Description        |
|----------|-----------|-------------------|
| Nouveau  | Bleu      | Non √©cout√©        |
| Lu       | Gris      | D√©j√† √©cout√©       |

### Actions messages
| Ic√¥ne | Action                              |
|-------|-------------------------------------|
| ‚ñ∂     | √âcouter (player int√©gr√©)            |
| üì•    | T√©l√©charger (MP3/WAV)               |
| ‚úï     | Supprimer                           |

================================================================================

## CONFIGURATION RAPIDE

| Param√®tre            | Type   | Description                    |
|----------------------|--------|--------------------------------|
| Notification email   | Toggle | Envoyer message par email      |
| Email destination    | Input  | Adresse email                  |
| Annonce personnalis√©e| Toggle | Utiliser annonce custom        |
| Enregistrer          | Bouton | Enregistrer nouvelle annonce   |
| Code PIN             | Input  | PIN acc√®s distant (4 chiffres) |
| Acc√®s distant        | Text   | Num√©ro pour consultation       |

================================================================================

## API

| Action           | M√©thode | Endpoint                           |
|------------------|---------|-----------------------------------|
| Liste messages   | GET     | /telephony/{ba}/line/{sn}/voicemail |
| √âcouter          | GET     | .../voicemail/{id}/audio           |
| T√©l√©charger      | GET     | .../voicemail/{id}/download        |
| Supprimer        | DELETE  | .../voicemail/{id}                 |
| Marquer lu       | PUT     | .../voicemail/{id} ‚Üí status: read  |
| Config           | PUT     | /telephony/{ba}/line/{sn}/options  |
| Annonce custom   | POST    | .../voicemail/greeting (multipart) |

================================================================================

## ACC√àS DISTANT

Pour consulter la messagerie depuis l'ext√©rieur:
1. Appeler le num√©ro d'acc√®s distant
2. Entrer le num√©ro de ligne
3. Saisir le code PIN
4. Naviguer avec les touches DTMF

================================================================================
