# Cahier des Charges : telecom/telephony - Renvoi d'appel ligne

## 1. RESUME EXECUTIF

### Perimetre
Page de configuration avancee des renvois d'appel d'une ligne.

### Objectif fonctionnel
- Configurer renvoi inconditionnel
- Configurer renvoi sur occupation
- Configurer renvoi sur non-reponse
- Configurer renvoi sur injoignable

---

## 2. LAYOUT

### Structure page avec carte formulaire multi-sections

---

## 3. COMPOSANTS UI

### Header page
| Element | Description |
|---------|-------------|
| Breadcrumb | Telecom / VoIP / ... / Renvoi d'appel |
| Titre | Renvoi d'appel |
| Retour | ← Retour vers la gestion des appels |

### Banniere warning
| Element | Description |
|---------|-------------|
| Fond | Jaune clair |
| Bordure | Orange |
| Icone | ⚠️ |
| Texte | Operateurs filtrent appels rediriges |

### Carte formulaire
| Element | Description |
|---------|-------------|
| Type | Carte blanche |
| Sections | 4 types de renvoi |

### Section Renvoi tous appels
| Element | Description |
|---------|-------------|
| Titre | Renvoi de tous les appels |
| Description | Renvoie sans condition |
| Toggle | Off (gris) |
| Type | Select (Telephone/Repondeur) |
| Numero | Input/Select |

### Section Renvoi occupation
| Element | Description |
|---------|-------------|
| Titre | Renvoi quand ligne occupee |
| Description | Si deja en communication |
| Toggle | On (bleu) |
| Type | Select |
| Numero | Input rempli |

### Section Renvoi non-reponse
| Element | Description |
|---------|-------------|
| Titre | Renvoi sans reponse |
| Description | Apres delai sans reponse |
| Toggle | On (bleu) |
| Type | Select |
| Delai | Input secondes |

### Section Renvoi injoignable
| Element | Description |
|---------|-------------|
| Titre | Renvoi quand injoignable |
| Description | Telephone deconnecte/hors ligne |
| Toggle | Off (gris) |

### Toggle switch
| Etat | Style |
|------|-------|
| Off | Fond gris, cercle gauche |
| On | Fond bleu, cercle droite |

### Bouton sauvegarde
| Element | Description |
|---------|-------------|
| Type | Primary |
| Texte | Enregistrer |

---

## 4. APIS & DONNEES

### Endpoints
```
GET /telephony/{billingAccount}/line/{serviceName}/options
PUT /telephony/{billingAccount}/line/{serviceName}/options
```

### Modele Forward
```typescript
interface LineForwardOptions {
  forwardUnconditional: ForwardConfig;
  forwardBusy: ForwardConfig;
  forwardNoReply: ForwardNoReplyConfig;
  forwardBackup: ForwardConfig;
}

interface ForwardConfig {
  enabled: boolean;
  nature: 'phone' | 'voicemail';
  number?: string;
}

interface ForwardNoReplyConfig extends ForwardConfig {
  delay: number;
}
```

---

## 5. TRADUCTIONS (i18n)

```json
{
  "telephony_forward_title": "Renvoi d'appel",
  "telephony_forward_back": "Retour vers la gestion des appels",
  "telephony_forward_warning": "Certains operateurs filtrent les appels rediriges. La ligne distante peut ne pas recevoir les appels.",
  "telephony_forward_all": "Renvoi de tous les appels",
  "telephony_forward_all_desc": "Renvoie tous les appels sans condition.",
  "telephony_forward_busy": "Renvoi quand la ligne est occupee",
  "telephony_forward_busy_desc": "Renvoie l'appel si la ligne est deja en communication.",
  "telephony_forward_no_reply": "Renvoi quand il n'y a pas de reponse",
  "telephony_forward_no_reply_desc": "Renvoie l'appel apres un certain delai sans reponse.",
  "telephony_forward_backup": "Renvoi quand la ligne est injoignable",
  "telephony_forward_backup_desc": "Renvoie l'appel si le telephone est deconnecte ou hors ligne.",
  "telephony_forward_to": "Renvoyer vers un",
  "telephony_forward_number": "au numero",
  "telephony_forward_after": "apres",
  "telephony_forward_seconds": "seconde(s)",
  "telephony_forward_type_phone": "Telephone",
  "telephony_forward_type_voicemail": "Repondeur",
  "telephony_forward_save": "Enregistrer"
}
```

---

## 6. REGLES METIER

- Renvoi inconditionnel prioritaire sur autres
- Delai non-reponse: 5-60 secondes
- Backup active si telephone hors ligne
- Numero format E.164
