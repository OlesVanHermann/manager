================================================================================
CAHIER DES CHARGES - old_manager.telecom.billingAccount.phonebook
================================================================================
Page : Gestion de l'annuaire telephonique du groupe
NAV1 : telecom
NAV2 : billingAccount
================================================================================

## 1. RESUME EXECUTIF

Gestion complete d'un annuaire telephonique partage au niveau du groupe de
facturation. Creation/modification/suppression annuaire, ajout contacts
manuel ou import CSV, export contacts, gestion groupes.

Utilisateurs cibles : Administrateurs telephonie VoIP

--------------------------------------------------------------------------------
## 2. ARCHITECTURE
--------------------------------------------------------------------------------

Fichiers sources :
- Controller : billingAccount/phonebook/phonebook.controller.js
- Template : billingAccount/phonebook/phonebook.html
- Modals : contact-add/, contact-update/, contact-import/, remove/

Dependances :
- OvhApiTelephony.Phonebook()
- OvhApiTelephony.Phonebook().PhonebookContact()
- tucVoipServiceTask : Polling import

--------------------------------------------------------------------------------
## 3. PAGES & NAVIGATION
--------------------------------------------------------------------------------

Route : telecom.telephony.billingAccount.phonebook
URL : /telecom/telephony/{billingAccount}/phonebook

Breadcrumb : Telecom > Telephonie > [Groupe] > Annuaire

--------------------------------------------------------------------------------
## 4. COMPOSANTS UI
--------------------------------------------------------------------------------

Section Annuaire :
- Formulaire creation si non existant
- Titre editable si existant
- Actions : Renommer, Supprimer

Barre actions contacts :
- Ajouter, Importer CSV, Exporter CSV, Supprimer selection

Tableau contacts (ovh-checkbox-table) :
- Colonnes : Nom, Prenom, Groupe, Tels (domicile/travail, fixe/mobile)
- Selection multiple, tri, pagination

--------------------------------------------------------------------------------
## 5. APIs & DONNEES
--------------------------------------------------------------------------------

GET /telephony/{billingAccount}/phonebook -> [bookKey]
GET /telephony/{billingAccount}/phonebook/{bookKey}
GET /telephony/{billingAccount}/phonebook/{bookKey}/phonebookContact (batch par 50)
GET /telephony/{billingAccount}/phonebook/{bookKey}/export?format=csv

POST /telephony/{billingAccount}/phonebook { name }
PUT /telephony/{billingAccount}/phonebook/{bookKey} { name }
DELETE /telephony/{billingAccount}/phonebook/{bookKey}

POST/PUT/DELETE /telephony/{billingAccount}/phonebook/{bookKey}/phonebookContact/{id}
POST /telephony/{billingAccount}/phonebook/{bookKey}/import { documentId }

--------------------------------------------------------------------------------
## 6. TRADUCTIONS (FR)
--------------------------------------------------------------------------------

telephony_phonebook_create_success : "Annuaire cree avec succes"
telephony_phonebook_contact_remove_success : "Contact supprime avec succes"
telephony_phonebook_contact_action_export_ok : "Export genere avec succes"
telephony_phonebook_contact_action_import_ko : "Erreur lors de l'import"

--------------------------------------------------------------------------------
## 7. REGLES METIER
--------------------------------------------------------------------------------

Champs vides : TUC_TELEPHONY_PHONEBOOK.emptyFields (masques affichage)
Batch loading : Chunks de 50 contacts
Export CSV : Polling status jusqu'a 'done'
Import CSV : Tache asynchrone via tucVoipServiceTask
Tri par defaut : name ASC

================================================================================
FIN DU CAHIER DES CHARGES
================================================================================
