================================================================================
TARGET SVG DOCUMENTATION
================================================================================
Fichier: target_.web-cloud.voip.number.live-calls.svg
Route:   /web-cloud/voip/numbers/{serviceName}/live-calls
NAV:     NAV1=Web Cloud | NAV2=VoIP | NAV3=Appels en cours
Version: v1 (2025-12-28)
================================================================================

## DESCRIPTION

Supervision en temps réel des appels actifs sur un numéro. Vue live avec
statistiques, liste des appels et actions de supervision.

================================================================================

## DONNEES DYNAMIQUES

| Exemple SVG              | Source API                                              |
|--------------------------|---------------------------------------------------------|
| 5 appels actifs          | GET /telephony/.../liveCalls → activeCount              |
| 2 en attente             | liveCalls.waitingCount                                  |
| 4:32                     | liveCalls.averageDuration                               |
| 127 total                | liveCalls.todayTotal                                    |
| +33 6 12 34 56 78        | calls[].caller                                          |
| 05:23                    | calls[].duration                                        |
| Jean D.                  | calls[].agent                                           |

================================================================================

## STRUCTURE PAGE

1. LEFT PANEL (280px)
   - Recherche numéros
   - Liste des numéros

2. RIGHT PANEL (1096px)
   - Header: Titre + indicateur LIVE

   - BLOC STATS (4 cards):
     * Appels actifs
     * En attente
     * Durée moyenne
     * Total aujourd'hui

   - TABLE APPELS EN COURS:
     * Appelant
     * Destination
     * Durée (live)
     * Statut (badge)
     * Agent assigné
     * Actions: Écouter, Raccrocher

   - BANNIERE INFO AUTO-REFRESH

================================================================================

## API ENDPOINTS

### Stats temps réel
GET /telephony/{billingAccount}/number/{serviceName}/liveCalls/stats
Response: {
  activeCount, waitingCount, averageDuration, todayTotal
}

### Liste appels en cours
GET /telephony/{billingAccount}/number/{serviceName}/liveCalls
Response: [{
  callId, caller, destination, duration, status, agent, startTime
}]

### Écouter appel (superviseur)
POST /telephony/{billingAccount}/number/{serviceName}/liveCalls/{callId}/listen
Body: { supervisorLine }

### Raccrocher appel
DELETE /telephony/{billingAccount}/number/{serviceName}/liveCalls/{callId}

================================================================================

## STATUTS APPEL

| Statut    | Couleur | Description          |
|-----------|---------|----------------------|
| active    | Vert    | En communication     |
| waiting   | Jaune   | En file d'attente    |
| ringing   | Bleu    | Sonnerie             |
| held      | Orange  | En attente musicale  |

================================================================================

## REGLES METIER

- Refresh auto: 5 secondes
- Écoute: superviseurs uniquement
- Raccrocher: confirmation requise
- Historique: voir onglet CDR

================================================================================

## COMPOSANTS REACT

- NumberLiveCallsTab (container)
- LiveIndicator
- LiveStatsCards
- LiveCallsTable
- CallDurationTimer
- CallStatusBadge
- ListenCallButton
- HangupCallButton
- AutoRefreshBanner

================================================================================
FIN DOCUMENTATION
================================================================================
