================================================================================
TARGET SVG DOCUMENTATION
================================================================================
Fichier: target_.web-cloud.voip.number.dialplan.svg
Route:   /web-cloud/voip/numbers/{serviceName}/dialplan
NAV:     NAV1=Web Cloud | NAV2=VoIP | NAV3=Plan de numérotation
Version: v1 (2025-12-28)
================================================================================

## DESCRIPTION

Configuration du plan de numérotation (dialplan) pour le routage des appels.
Définition des règles conditionnelles et des actions de routage.

================================================================================

## DONNEES DYNAMIQUES

| Exemple SVG              | Source API                                              |
|--------------------------|---------------------------------------------------------|
| Lun-Ven 9h-18h           | GET /telephony/.../dialplan → rules[].condition         |
| Menu SVI                 | rules[].action                                          |
| menu_principal           | rules[].destination                                     |

================================================================================

## STRUCTURE PAGE

1. LEFT PANEL (280px)
   - Recherche numéros
   - Liste des numéros

2. RIGHT PANEL (1096px)
   - Header: Titre + description

   - TOOLBAR:
     * Refresh
     * + Ajouter règle

   - BLOC FLOWCHART:
     * Représentation visuelle du flux
     * Conditions (losanges jaunes)
     * Actions (rectangles verts)
     * Destinations (rectangles gris)

   - TABLE REGLES:
     * Priorité
     * Condition
     * Action
     * Destination
     * Actions: Éditer, Supprimer

   - ACTIONS: Enregistrer, Annuler

================================================================================

## API ENDPOINTS

### Liste règles dialplan
GET /telephony/{billingAccount}/number/{serviceName}/dialplan
Response: [{
  id, priority, condition, action, destination
}]

### Ajouter règle
POST /telephony/{billingAccount}/number/{serviceName}/dialplan
Body: { condition, action, destination }

### Modifier règle
PUT /telephony/{billingAccount}/number/{serviceName}/dialplan/{id}
Body: { condition, action, destination }

### Supprimer règle
DELETE /telephony/{billingAccount}/number/{serviceName}/dialplan/{id}

### Réordonner règles
PUT /telephony/{billingAccount}/number/{serviceName}/dialplan/reorder
Body: { orderedIds: [] }

================================================================================

## TYPES CONDITIONS

| Type          | Description                        |
|---------------|------------------------------------|
| timeCondition | Plages horaires                    |
| callerNumber  | Numéro appelant                    |
| calledNumber  | Numéro appelé                      |
| dtmf          | Touche appuyée                     |
| default       | Par défaut (catch-all)             |

================================================================================

## TYPES ACTIONS

| Action        | Description                        |
|---------------|------------------------------------|
| ivr           | Menu SVI                           |
| voicemail     | Messagerie vocale                  |
| hangup        | Raccrocher                         |
| redirect      | Redirection                        |
| queue         | File d'attente                     |
| playback      | Lecture audio                      |

================================================================================

## REGLES METIER

- Évaluation par priorité (1 = première)
- Règle default obligatoire
- Max 50 règles par dialplan
- Test possible avant activation

================================================================================

## COMPOSANTS REACT

- NumberDialplanTab (container)
- DialplanFlowchart
- FlowchartNode
- FlowchartConnector
- RulesTable
- AddRuleModal
- EditRuleModal
- ConditionBuilder
- ActionSelector

================================================================================
FIN DOCUMENTATION
================================================================================
