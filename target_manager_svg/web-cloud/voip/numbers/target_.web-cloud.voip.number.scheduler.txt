================================================================================
TARGET SVG DOCUMENTATION
================================================================================
Fichier: target_.web-cloud.voip.number.scheduler.svg
Route:   /web-cloud/voip/groups/{billingAccount}/numbers/{serviceName}/scheduler
NAV:     NAV1=Web Cloud | NAV2=VoIP | NAV3=Numéros | NAV4=Planification
Version: v1 (2025-12-28)
================================================================================

## DESCRIPTION

Planification horaire du numéro. Définit les horaires d'ouverture et le
comportement des appels selon les créneaux (ouvert/fermé).

================================================================================

## DONNEES DYNAMIQUES

| Exemple SVG              | Source API                                              |
|--------------------------|---------------------------------------------------------|
| 0033972100000            | GET /telephony/{ba}/number/{sn} → serviceName           |
| Planning hebdomadaire    | GET /telephony/{ba}/number/{sn}/scheduler → slots       |
| 08:00-12:00, 14:00-18:00 | slots[].timeStart, slots[].timeEnd                      |
| Lun-Ven                  | slots[].days[]                                          |
| Messagerie vocale        | scheduler.closedAction                                  |
| fermeture.mp3            | scheduler.closedAnnouncement                            |
| 01/01/2025               | scheduler.holidays[].date                               |
| Jour de l'An             | scheduler.holidays[].label                              |
| 3                        | count(holidays)                                         |

================================================================================

## STRUCTURE PAGE

1. LEFT PANEL (280px)
   - NAV3 tabs: Lignes | [Numéros] | Fax | Abrégés
   - Liste des numéros

2. RIGHT PANEL (1096px)
   - Header: Numéro + Description
   - NAV4 tabs: Général | Redirection | File d'attente | SVI | [Planification] | Conférence

   - INFO BANNER: Explication planification

   - TOOLBAR:
     * + Ajouter créneau
     * Importer modèle

   - GRILLE: Planning hebdomadaire (1040x260)
     * En-tête: LUN MAR MER JEU VEN SAM DIM
     * Lignes horaires: 08h, 09h, 12h, 14h, 18h
     * Slots colorés: vert (ouvert) / gris (fermé)
     * Légende

   - BLOC: Comportement hors horaires (1040x100)
     * Action (redirection messagerie, autre numéro...)
     * Annonce personnalisée

   - TABLE: Jours fériés et exceptions (1040x120)
     * Colonnes: Date | Libellé | Action | Actions
     * Actions: Modifier, Supprimer

================================================================================

## API ENDPOINTS

### Configuration planification
GET /telephony/{billingAccount}/number/{serviceName}/scheduler
Response: {
  enabled: boolean,
  timezone: string,
  slots: [{
    id, days: [], timeStart, timeEnd, action, destination
  }],
  closedAction: string,
  closedAnnouncement: string,
  holidays: [{ id, date, label, action }]
}

### Ajouter créneau
POST /telephony/{billingAccount}/number/{serviceName}/scheduler/slots
Body: { days, timeStart, timeEnd, action, destination }

### Modifier créneau
PUT /telephony/{billingAccount}/number/{serviceName}/scheduler/slots/{id}

### Supprimer créneau
DELETE /telephony/{billingAccount}/number/{serviceName}/scheduler/slots/{id}

### Ajouter jour férié
POST /telephony/{billingAccount}/number/{serviceName}/scheduler/holidays
Body: { date, label, action }

### Supprimer jour férié
DELETE /telephony/{billingAccount}/number/{serviceName}/scheduler/holidays/{id}

### Importer modèle
POST /telephony/{billingAccount}/number/{serviceName}/scheduler/import
Body: { templateId }

================================================================================

## ACTIONS POSSIBLES

| Action              | Description                           |
|---------------------|---------------------------------------|
| queue               | Rediriger vers file d'attente         |
| voicemail           | Rediriger vers messagerie             |
| redirect            | Rediriger vers autre numéro           |
| ivr                 | Rediriger vers SVI                    |
| hangup              | Raccrocher (annonce puis fin)         |

================================================================================

## MODELES PREDÉFINIS

| Modèle           | Description                           |
|------------------|---------------------------------------|
| bureau_standard  | Lun-Ven 9h-12h 14h-18h               |
| commerce         | Lun-Sam 9h-19h                        |
| 24_7             | Ouvert 24h/24 7j/7                    |
| jours_feries_fr  | Jours fériés français                 |

================================================================================

## REGLES METIER

- Fuseau horaire configurable
- Créneaux ne peuvent pas se chevaucher
- Jours fériés prioritaires sur planning standard
- Annonce obligatoire si action = hangup
- Import modèle écrase configuration existante

================================================================================

## COMPOSANTS REACT

- NumberSchedulerTab (container)
- WeeklyScheduleGrid (grille horaire)
- TimeSlotCard (créneau horaire)
- AddSlotModal
- ClosedBehaviorCard
- HolidaysTable
- AddHolidayModal
- ImportTemplateModal

================================================================================
FIN DOCUMENTATION
================================================================================
