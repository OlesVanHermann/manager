================================================================================
TARGET SVG DOCUMENTATION
================================================================================
Fichier: target_.web-cloud.voip.fax.filtering.svg
Route:   /web-cloud/voip/groups/{billingAccount}/fax/{serviceName}/filtering
NAV:     NAV1=Web Cloud | NAV2=VoIP | NAV3=Fax | NAV4=Filtrage
Version: v1 (2025-12-28)
================================================================================

## DESCRIPTION

Configuration du filtrage des fax entrants. Gestion des listes blanches
et noires par numero, TSI ou email.

================================================================================

## DONNEES DYNAMIQUES

| Exemple SVG              | Source API                                              |
|--------------------------|---------------------------------------------------------|
| 0033972101234            | GET /telephony/{ba}/fax/{sn} → serviceName              |
| Liste blanche            | GET /telephony/{ba}/fax/{sn}/screening → type           |
| Rejeter anonymes         | screening → rejectAnonymous                             |
| 0033612345678            | GET /telephony/{ba}/fax/{sn}/screening/list → number    |
| Numeros/TSI/Email        | list[].filterType                                       |
| Liste blanche/noire      | list[].listType                                         |

================================================================================

## STRUCTURE PAGE

1. LEFT PANEL (280px)
   - Barre recherche
   - Liste des fax avec statut

2. RIGHT PANEL (1096px)
   - Header: Numero + Description
   - NAV4 tabs: General | Envoi | Campagnes | Recus | Envoyes | Consommation | Messagerie | [Filtrage]

   - BLOC: Liste de filtrage (460x180)
     * Type de filtrage (dropdown: whitelist/blacklist/none)
     * Checkbox rejeter anonymes
     * Lien "Appliquer a plusieurs services"

   - BLOC: Ajouter un filtre (565x180)
     * Liste (dropdown: blanche/noire)
     * Type (dropdown: Numeros/TSI/Email)
     * Valeur (input)
     * Bouton Ajouter

   - BLOC: Configuration des filtres (1056x400)
     * Toolbar: Supprimer | Exporter | Filtre type
     * Table: Checkbox | Numero/Valeur | Type | Liste | Actions
     * Pagination

================================================================================

## API ENDPOINTS

### Configuration filtrage
GET /telephony/{billingAccount}/fax/{serviceName}/screening
Response: {
  type (whitelist|blacklist|none),
  rejectAnonymous: boolean
}

PUT /telephony/{billingAccount}/fax/{serviceName}/screening
Body: { type, rejectAnonymous }

### Liste des filtres
GET /telephony/{billingAccount}/fax/{serviceName}/screening/list
Response: [{
  id, value, filterType (number|tsi|email), listType (white|black)
}]

### Ajouter filtre
POST /telephony/{billingAccount}/fax/{serviceName}/screening/list
Body: { value, filterType, listType }

### Supprimer filtre
DELETE /telephony/{billingAccount}/fax/{serviceName}/screening/list/{id}

### Supprimer selection
DELETE /telephony/{billingAccount}/fax/{serviceName}/screening/list
Body: { ids: [] }

================================================================================

## TYPES DE FILTRAGE

| Type        | Description                                    |
|-------------|------------------------------------------------|
| Whitelist   | Seuls les numeros listes peuvent envoyer       |
| Blacklist   | Les numeros listes sont bloques                |
| None        | Aucun filtrage actif                           |

================================================================================

## TYPES DE FILTRE

| Type    | Format              | Description                     |
|---------|---------------------|---------------------------------|
| Numeros | 0033XXXXXXXXX       | Numero appelant (CLI)           |
| TSI     | +33123456789        | Transmitting Subscriber ID      |
| Email   | *@domain.com        | Email source (fax-to-email)     |

================================================================================

## ACTIONS

| Bouton            | API                                              |
|-------------------|--------------------------------------------------|
| Ajouter           | POST .../screening/list                          |
| Supprimer         | DELETE .../screening/list/{id}                   |
| Supprimer select. | DELETE .../screening/list + body ids             |
| Exporter          | GET .../screening/list?format=csv                |
| Appliquer multi   | PUT /telephony/{ba}/fax/screening/batch          |

================================================================================

## REGLES METIER

- Format numero: international (+33...) ou national (0033...)
- TSI: identifiant transmis par le fax emetteur
- Email: supporte wildcards (*@domain.com)
- Filtrage anonyme: rejette fax sans CLI
- Limite: 500 entrees par liste

================================================================================

## COMPOSANTS REACT

- FaxFilteringTab (container)
- FilteringConfigCard (type + anonymes)
- AddFilterForm (formulaire ajout)
- FilteringTable (liste filtres)
- BulkActionsToolbar
- FilterTypeFilter (dropdown)

================================================================================
FIN DOCUMENTATION
================================================================================
