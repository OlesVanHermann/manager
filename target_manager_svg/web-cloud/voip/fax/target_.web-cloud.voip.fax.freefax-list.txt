# old_manager.web-cloud.freefax.list.txt
# Cahier des charges - Liste des Fax
# Généré depuis : old_manager_web-cloud_telecom_fax.tar

---

## 1. RÉSUMÉ EXÉCUTIF

### Périmètre
Page de liste des services FreeFax avec datagrid paginé.

### Objectif fonctionnel
Afficher tous les fax de l'utilisateur avec accès au détail de chaque service.

### Utilisateurs cibles
Clients OVHcloud disposant d'un ou plusieurs services FreeFax.

---

## 2. ARCHITECTURE

### Fichiers sources
```
packages/manager/modules/freefax/src/
├── freefaxes.html            # Template liste
├── freefaxes.controller.js   # Controller datagrid
└── translations/
    └── Messages_fr_FR.json
```

### Dépendances
- @ovh-ux/manager-ng-layout-helpers : ListLayoutHelper
- tuc-telephony-procedure : Bannière procédures télécom

---

## 3. PAGES & NAVIGATION

### Route
| Propriété | Valeur |
|-----------|--------|
| State | freefaxes |
| URL | /freefax |
| Component | Datagrid liste |

---

## 4. COMPOSANTS UI

### Header
```html
<oui-header data-heading="{{ 'freefaxes_title' | translate }}"></oui-header>
```

### Bannière procédures
```html
<tuc-telephony-procedure class="w-100"></tuc-telephony-procedure>
```

### Datagrid
| ID | dg-freefaxes |
|-----------|---------|
| Filtre par défaut | number |

### Colonnes

| Colonne | Propriété | Label FR | Sortable | Filterable | Searchable |
|---------|-----------|----------|----------|------------|------------|
| Numéro | number | "Numéro" | ✅ | ✅ | ✅ |
| Expéditeur | fromName | "Expéditeur" | ✅ | ✅ | ❌ |
| Email | fromEmail | "Mail de l'expéditeur" | ✅ | ✅ | ❌ |

### Template colonne Numéro
```html
<a data-ng-href="{{ $ctrl.getFreefaxLink($row) }}"
   data-ng-bind="$value"></a>
```

### Topbar
```html
<oui-datagrid-topbar>
    <oui-button variant="secondary" data-on-click="$ctrl.gotoOrder()">
        <span data-translate="freefaxes_order"></span>
    </oui-button>
</oui-datagrid-topbar>
```

### Menu actions
```html
<oui-action-menu data-compact data-placement="left-start">
    <oui-action-menu-item data-on-click="$ctrl.viewFreefax($row)">
        <span data-translate="freefaxes_view_freefax_label"></span>
    </oui-action-menu-item>
</oui-action-menu>
```

---

## 5. APIs & DONNÉES

### Endpoint
| Méthode | Endpoint | Description |
|---------|----------|-------------|
| GET | /freefax | Liste des fax (Iceberg) |

### Modèle de données
```typescript
interface Freefax {
  number: string;     // Numéro de fax (ex: "0033972...")
  fromName: string;   // Nom expéditeur
  fromEmail: string;  // Email expéditeur
}
```

---

## 6. TRADUCTIONS

### Clés i18n
| Clé | FR |
|-----|-----|
| freefaxes_title | "Fax" |
| freefaxes_order | "Commander" |
| freefaxes_number_label | "Numéro" |
| freefaxes_from_name_label | "Expéditeur" |
| freefaxes_from_email_label | "Mail de l'expéditeur" |
| freefaxes_view_freefax_label | "Détail du fax" |

---

## 7. RÈGLES MÉTIER

### Controller
```javascript
class FreefaxesCtrl extends ListLayoutHelper.ListLayoutCtrl {
  $onInit() {
    this.datagridId = 'dg-freefaxes';
    this.defaultFilterColumn = 'number';
    super.$onInit();
    this.columnsConfig = [
      { name: 'number', sortable: this.getSorting('number') },
      { name: 'fromName', sortable: this.getSorting('fromName') },
      { name: 'fromEmail', sortable: this.getSorting('fromEmail') },
    ];
  }
}
```

### Actions
| Action | Description |
|--------|-------------|
| gotoOrder() | Navigation vers commande |
| viewFreefax($row) | Navigation vers détail fax |
| getFreefaxLink($row) | Génération URL détail |
