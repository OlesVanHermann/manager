# old_manager.web-cloud.freefax.modal-reset-password.txt
# Cahier des charges - Modal Reset Password FreeFax
# Généré depuis : old_manager_web-cloud_telecom_fax.tar

---

## 1. RÉSUMÉ EXÉCUTIF

### Périmètre
Modal de génération d'un nouveau mot de passe pour le service FreeFax.

### Objectif fonctionnel
Permettre à l'utilisateur de générer un nouveau mot de passe d'accès au service.

---

## 2. ARCHITECTURE

### Fichier source
Fonctionnalité présente dans freefax-faxConfiguration.controller.js

### Code source
```javascript
this.generatePassword = function generatePassword() {
  this.generatingPassword = true;
  OvhApiFreeFax.v6()
    .resetPassword({ serviceName: $stateParams.serviceName }, null)
    .$promise.then(
      (password) => { self.generatedPassword = password.value; },
      (err) => new TucToastError(err),
    )
    .finally(() => { self.generatingPassword = false; });
};

this.togglePassword = function togglePassword() {
  this.showPassword = !this.showPassword;
  this.passwordDisplay = this.showPassword ? this.generatedPassword : '*****';
};
```

---

## 3. PAGES & NAVIGATION

### Type
Modal de confirmation ou section dans la configuration fax.

---

## 4. COMPOSANTS UI

### Message de confirmation
"Êtes-vous sûr de vouloir générer un nouveau mot de passe ?" (freefax_reset_password_confirm)

### Bouton déclencheur
"Obtenir un nouveau mot de passe" (freefax_reset_password)

### Bouton génération
"Générer" (freefax_reset_password_btn)

### Affichage du mot de passe généré
| État | Affichage |
|------|-----------|
| Masqué | ***** |
| Visible | Mot de passe en clair |

---

## 5. APIs & DONNÉES

### Endpoint
| Méthode | Endpoint | Description |
|---------|----------|-------------|
| POST | /freefax/{serviceName}/resetPassword | Génération nouveau mot de passe |

### Réponse
```typescript
interface ResetPasswordResponse {
  value: string;  // Nouveau mot de passe généré
}
```

---

## 6. TRADUCTIONS

### Clés i18n
| Clé | FR |
|-----|-----|
| freefax_reset_password | "Obtenir un nouveau mot de passe" |
| freefax_reset_password_btn | "Générer" |
| freefax_reset_password_confirm | "Êtes-vous sûr de vouloir générer un nouveau mot de passe ?" |
| freefax_change_password | "Changer le mot de passe" |

---

## 7. RÈGLES MÉTIER

### Variables controller
```javascript
this.generatingPassword = false;  // État loading
this.generatedPassword = null;    // Mot de passe généré
this.showPassword = false;        // Visibilité
this.passwordDisplay = '*****';   // Affichage (masqué par défaut)
```

### Flux
1. Clic sur "Obtenir un nouveau mot de passe"
2. Confirmation demandée
3. Appel API resetPassword
4. Affichage du nouveau mot de passe (masqué par défaut)
5. Possibilité de toggle la visibilité

### Gestion erreur
Erreur API → TucToastError(err)
