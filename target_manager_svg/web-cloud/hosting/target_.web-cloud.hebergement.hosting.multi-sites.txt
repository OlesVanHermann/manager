# DOCUMENTATION DESIGN SYSTEM - OVH MANAGER
## Tab: Web Cloud > Hébergement > Multisite
### Fichier SVG: target_.web-cloud.hebergement.hosting.tab-multisite.svg

---

# 1. DIMENSIONS GÉNÉRALES

| Propriété | Valeur |
|-----------|--------|
| Viewport | 1440 × 900 px |
| Format | SVG (Scalable Vector Graphics) |
| Font principale | 'Source Sans Pro', sans-serif |

---

# 2. PALETTE DE COULEURS

## 2.1 Couleurs primaires

| Nom | Hex | Usage |
|-----|-----|-------|
| Bleu OVH Header | `#000E9C` | NAV1 background |
| Bleu Primary | `#0050D7` | Boutons, liens, toggles ON, accents |
| Blanc | `#FFFFFF` | Backgrounds, textes sur fond sombre |

## 2.2 Couleurs neutres

| Nom | Hex | Usage |
|-----|-----|-------|
| Fond page | `#F6F6F9` | Background général |
| Fond header table | `#F9FAFB` | Header tableau, champs recherche |
| Bordures | `#E5E7EB` | Séparateurs, contours panels |
| Bordures colonnes | `#D1D5DB` | Séparateurs colonnes tableau |
| Texte muted | `#6B7280` | Textes secondaires, labels |
| Texte dark | `#1F2937` | Textes principaux |

## 2.3 Couleurs états

| État | Background | Texte |
|------|------------|-------|
| Badge OK/Actif | `#DEF7EC` | `#03543F` |
| Badge KO/Erreur | `#FEE2E2` | `#991B1B` |
| Toggle ON | `#0050D7` | - |
| Toggle OFF | `#D1D5DB` | - |
| Toggle Knob | `#FFFFFF` | - |
| Info Box bg | `#EFF6FF` | - |
| Info Box border | `#BFDBFE` | - |
| Row sélectionnée | `#E8F0FE` | - |

---

# 3. STRUCTURE VERTICALE

```
┌─────────────────────────────────────────────────────────────────┐
│ NAV1 - Header principal OVH                      H: 50px       │
│ Y: 0 → 50                                                       │
├─────────────────────────────────────────────────────────────────┤
│ NAV2 - Sous-navigation Web Cloud                 H: 40px       │
│ Y: 50 → 90                                                      │
├─────────────────────────────────────────────────────────────────┤
│ MAIN CONTENT                                     H: 810px      │
│ Y: 90 → 900                                                     │
│                                                                 │
│   ┌─────────┬─────────────────────────────────────────────┐    │
│   │ LEFT    │ RIGHT PANEL                                 │    │
│   │ PANEL   │                                             │    │
│   │ W:280px │ W: 1096px                                   │    │
│   │         │                                             │    │
│   └─────────┴─────────────────────────────────────────────┘    │
└─────────────────────────────────────────────────────────────────┘
```

### Espacements

| Zone | Valeur |
|------|--------|
| Marge extérieure MAIN | 24px horizontal, 15px vertical |
| Gap entre LEFT et RIGHT panel | 16px |
| Padding interne panels | 12-20px |

---

# 4. NAV1 - HEADER PRINCIPAL OVH

## 4.1 Dimensions

| Propriété | Valeur |
|-----------|--------|
| Position | x=0, y=0 |
| Largeur | 1440px |
| Hauteur | 50px |
| Background | `#000E9C` |

## 4.2 Menu items

| Item | Position X | État |
|------|------------|------|
| Accueil | 40 | Inactif |
| Public Cloud | 110 | Inactif |
| Hosted Private Cloud | 210 | Inactif |
| Bare Metal Cloud | 370 | Inactif |
| **Web Cloud** | 510 | **Actif** |
| Network | 620 | Inactif |
| IAM / Securite | 700 | Inactif |
| Licences | 810 | Inactif |

### Style menu items

| Propriété | Inactif | Actif |
|-----------|---------|-------|
| Font-size | 14px | 14px |
| Couleur | `#FFFFFF` opacity 0.7 | `#FFFFFF` opacity 1.0 |
| Font-weight | normal | 600 |

### Indicateur actif

| Propriété | Valeur |
|-----------|--------|
| Position | x=505, y=46 |
| Dimensions | 75 × 3 px |
| Couleur | `#FFFFFF` |

## 4.3 Compte utilisateur

| Élément | Propriété | Valeur |
|---------|-----------|--------|
| Container | Position | x=1280, y=12 |
| Container | Dimensions | 140 × 26 px |
| Container | Border-radius | 13px |
| Container | Background | `rgba(255,255,255,0.2)` |
| Badge OK | Dimensions | 26 × 20 px |
| Badge OK | Background | `#DEF7EC` |
| Nom compte | Texte | "ko51027-ovh" |

---

# 5. NAV2 - SOUS-NAVIGATION WEB CLOUD

## 5.1 Dimensions

| Propriété | Valeur |
|-----------|--------|
| Position | x=0, y=50 |
| Largeur | 1440px |
| Hauteur | 40px |
| Background | `#FFFFFF` |
| Bordure bottom | 1px solid `#E5E7EB` |

## 5.2 Menu items

| Item | Position X | État |
|------|------------|------|
| Accueil | 40 | Inactif |
| Domaines et DNS | 110 | Inactif |
| **Hebergement** | 240 | **Actif** |
| Emails et Collab | 360 | Inactif |
| VoIP | 480 | Inactif |
| Acces | 530 | Inactif |

### Indicateur actif

| Propriété | Valeur |
|-----------|--------|
| Position | x=235, y=85 |
| Dimensions | 95 × 3 px |
| Couleur | `#0050D7` |

---

# 6. LEFT PANEL - LISTE DES SERVICES

## 6.1 Dimensions

| Propriété | Valeur |
|-----------|--------|
| Position | x=24, y=105 |
| Largeur | 280px |
| Hauteur | 780px |
| Background | `#FFFFFF` |
| Border | 1px solid `#E5E7EB` |
| Border-radius | 8px |

## 6.2 Champ recherche

| Propriété | Valeur |
|-----------|--------|
| Position | x=12, y=12 |
| Dimensions | 256 × 34 px |
| Border-radius | 4px |
| Background | `#F9FAFB` |
| Border | 1px solid `#E5E7EB` |
| Placeholder | "Rechercher..." |

## 6.3 Service item

### Service sélectionné

| Élément | Propriété | Valeur |
|---------|-----------|--------|
| Container | Dimensions | 268 × 56 px |
| Container | Background | `#E8F0FE` |
| Container | Border-radius | 6px |
| Avatar | Cercle | r=14px |
| Avatar | Background | `#0050D7` |
| Nom | Font-size | 13px |
| Nom | Font-weight | 500 |
| Offre | Font-size | 11px |
| Badge | Dimensions | 46 × 18 px |

## 6.4 Pagination

| Élément | Propriété | Valeur |
|---------|-----------|--------|
| Bouton | Dimensions | 26 × 26 px |
| Bouton | Border-radius | 4px |
| Bouton actif | Background | `#0050D7` |
| Bouton inactif | Border | 1px solid `#E5E7EB` |

---

# 7. RIGHT PANEL - CONTENU PRINCIPAL

## 7.1 Dimensions

| Propriété | Valeur |
|-----------|--------|
| Position | x=320, y=105 |
| Largeur | 1096px |
| Hauteur | 780px |
| Background | `#FFFFFF` |
| Border | 1px solid `#E5E7EB` |
| Border-radius | 8px |

## 7.2 Header avec titre

| Élément | Propriété | Valeur |
|---------|-----------|--------|
| Titre | Font-size | 18px |
| Titre | Font-weight | 600 |
| Titre | Couleur | `#1F2937` |

## 7.3 NAV3 - Onglets

### Dimensions boutons

| Propriété | Valeur |
|-----------|--------|
| Largeur | 68px (uniforme) |
| Hauteur | 30px |
| Border-radius | 4px |
| Gap | 2px |
| Font-size | 10px |

### Liste des onglets

| # | Nom | État |
|---|-----|------|
| 1 | Home | Inactif |
| 2 | **Multisite** | **Actif** |
| 3 | FTP-SSH | Inactif |
| 4 | Modules | Inactif |
| 5 | Taches | Inactif |
| 6 | Emails | Inactif |
| 7 | Variables | Inactif |
| 8 | Runtimes | Inactif |
| 9 | SSL | Inactif |
| 10 | CDN | Inactif |
| 11 | Boost | Inactif |
| 12 | Logs | Inactif |
| 13 | Plus | Inactif |

### Styles

| État | Background | Border | Texte |
|------|------------|--------|-------|
| Inactif | `#FFFFFF` | 1px solid `#0050D7` | `#0050D7` |
| Actif | `#0050D7` | - | `#FFFFFF` |

---

# 8. BARRE D'ACTIONS

## 8.1 Position

Y = 55px (relatif au panel)

## 8.2 Éléments

| Élément | Position X | Dimensions | Description |
|---------|------------|------------|-------------|
| Bouton Actualiser | 0 | 32 × 32 px | Icône ↻ |
| Champ Recherche | 42 | 220 × 32 px | Placeholder: "Rechercher un domaine..." |
| Bouton Ajouter | 272 | 120 × 32 px | Texte: "+ Ajouter" |
| Compteur | 1040 | - | Texte: "4 domaine(s)" |

---

# 9. TABLEAU MULTISITE

## 9.1 Dimensions

| Propriété | Valeur |
|-----------|--------|
| Position | x=0, y=105 (relatif à zone contenu) |
| Largeur | 1053px |
| Hauteur | 340px |
| Border-radius | 6px |
| Border | 1px solid `#E5E7EB` |

## 9.2 Structure des colonnes

| Col | Nom | Largeur | Position X |
|-----|-----|---------|------------|
| 0 | DOMAINE | 117px | 0-117 |
| 1 | DOSSIER | 117px | 117-234 |
| 2 | STATUT | 117px | 234-351 |
| 3 | SSL | 117px | 351-468 |
| 4 | CDN | 117px | 468-585 |
| 5 | FIREWALL | 117px | 585-702 |
| 6 | LOGS | 117px | 702-819 |
| 7 | GIT | 117px | 819-936 |
| 8 | IPV6 | 117px | 936-1053 |

**Total: 9 colonnes × 117px = 1053px**

## 9.3 Header tableau

| Propriété | Valeur |
|-----------|--------|
| Hauteur | 40px |
| Background | `#F9FAFB` |
| Font-size labels | 9px (8px pour FIREWALL) |
| Couleur labels | `#6B7280` |
| Font-weight | 600 pour SSL, CDN, FIREWALL, LOGS, GIT, IPV6 |

## 9.4 Lignes (Rows)

| Propriété | Valeur |
|-----------|--------|
| Hauteur | 70px |
| Background | `#FFFFFF` |
| Bordure bottom | 1px solid `#E5E7EB` |

---

# 10. CONTENU DES COLONNES

## 10.1 DOMAINE

| Élément | Propriété | Valeur |
|---------|-----------|--------|
| Nom domaine | Font-size | 10px (9px si long) |
| Nom domaine | Font-weight | 500 |
| Nom domaine | Couleur | `#0050D7` |
| Icône × | Font-size | 19px |
| Icône × | Action | Supprimer le domaine |

## 10.2 DOSSIER

| Élément | Propriété | Valeur |
|---------|-----------|--------|
| Chemin | Font-size | 9px |
| Chemin | Font-family | monospace |
| Chemin | Couleur | `#1F2937` |
| Icône ✎ | Font-size | 19px |
| Icône ✎ | Action | Modifier le dossier |

## 10.3 STATUT

Toggle ON/OFF (voir section 11)

**RÈGLE IMPORTANTE:** Si STATUT = OFF, les colonnes SSL, CDN, FIREWALL, LOGS, GIT, IPV6 sont **VIDES**

## 10.4 SSL

| Élément | Propriété | Valeur |
|---------|-----------|--------|
| Type certificat | Font-size | 9px |
| Type certificat | Valeurs | "Let's Encrypt", "Sectigo", "—" |
| Icône ↺ | Font-size | 19px |
| Icône ↺ | Action | Régénérer certificat |
| Icône ⇄ | Font-size | 19px |
| Icône ⇄ | Action | Changer type certificat |

## 10.5 CDN, FIREWALL, LOGS, GIT, IPV6

Toggle ON/OFF uniquement (voir section 11)

---

# 11. TOGGLES (SLIDERS ON/OFF)

## 11.1 Dimensions

| Propriété | Valeur |
|-----------|--------|
| Largeur | 30px |
| Hauteur | 15px |
| Border-radius | 7.5px (pill shape) |

## 11.2 États

| État | Background | Cercle cx | Cercle r |
|------|------------|-----------|----------|
| ON | `#0050D7` | 22 | 5.5px |
| OFF | `#D1D5DB` | 8 | 5.5px |

Le cercle (knob) est toujours `#FFFFFF`

---

# 12. ICÔNES

| Icône | Unicode | Action | Font-size | Couleur |
|-------|---------|--------|-----------|---------|
| ↻ | U+21BB | Actualiser la liste | 16px | `#0050D7` |
| × | U+00D7 | Supprimer le domaine | 19px | `#0050D7` |
| ✎ | U+270E | Modifier le dossier | 19px | `#0050D7` |
| ↺ | U+21BA | Régénérer certificat SSL | 19px | `#0050D7` |
| ⇄ | U+21C4 | Changer type certificat | 19px | `#0050D7` |
| ‹ | U+2039 | Page précédente | 11px | `#6B7280` |
| › | U+203A | Page suivante | 11px | `#6B7280` |

---

# 13. DONNÉES D'EXEMPLE

## Row 1 - mon-site.fr (STATUT ON)

| Colonne | Valeur |
|---------|--------|
| DOMAINE | mon-site.fr + × |
| DOSSIER | ./www + ✎ |
| STATUT | ON |
| SSL | Let's Encrypt + ↺ + ⇄ |
| CDN | ON |
| FIREWALL | ON |
| LOGS | OFF |
| GIT | OFF |
| IPV6 | ON |

## Row 2 - www.mon-site.fr (STATUT ON)

| Colonne | Valeur |
|---------|--------|
| DOMAINE | www.mon-site.fr + × |
| DOSSIER | ./www + ✎ |
| STATUT | ON |
| SSL | Let's Encrypt + ↺ + ⇄ |
| CDN | ON |
| FIREWALL | OFF |
| LOGS | OFF |
| GIT | OFF |
| IPV6 | ON |

## Row 3 - blog.mon-site.fr (STATUT OFF)

| Colonne | Valeur |
|---------|--------|
| DOMAINE | blog.mon-site.fr + × |
| DOSSIER | ./blog + ✎ |
| STATUT | OFF |
| SSL | *(vide)* |
| CDN | *(vide)* |
| FIREWALL | *(vide)* |
| LOGS | *(vide)* |
| GIT | *(vide)* |
| IPV6 | *(vide)* |

## Row 4 - api.mon-site.fr (STATUT ON)

| Colonne | Valeur |
|---------|--------|
| DOMAINE | api.mon-site.fr + × |
| DOSSIER | ./api + ✎ |
| STATUT | ON |
| SSL | Sectigo + ↺ + ⇄ |
| CDN | OFF |
| FIREWALL | ON |
| LOGS | OFF |
| GIT | ON |
| IPV6 | OFF |

---

# 14. INFO BOX

| Propriété | Valeur |
|-----------|--------|
| Position | y=455 (relatif à zone contenu) |
| Dimensions | 1053 × 70 px |
| Border-radius | 6px |
| Background | `#EFF6FF` |
| Border | 1px solid `#BFDBFE` |
| Titre | "Multisite" - 12px, 600, `#1F2937` |
| Description | 11px, `#6B7280` |

---

# 15. API CALLS & SÉQUENCES

## 15.1 Endpoints utilisés par l'onglet Multisite

### APIs v6 (principales)

| Méthode | Endpoint | Description |
|---------|----------|-------------|
| GET | `/hosting/web` | Liste des hébergements |
| GET | `/hosting/web/{serviceName}` | Détails hébergement |
| GET | `/hosting/web/{svc}/attachedDomain` | Liste domaines multisite |
| GET | `/hosting/web/{svc}/attachedDomain/{domain}` | Détails domaine |
| POST | `/hosting/web/{svc}/attachedDomain` | Ajouter domaine |
| PUT | `/hosting/web/{svc}/attachedDomain/{domain}` | Modifier domaine |
| DELETE | `/hosting/web/{svc}/attachedDomain/{domain}` | Supprimer domaine |
| GET | `/hosting/web/{svc}/ssl` | Info SSL globale |
| POST | `/hosting/web/{svc}/ssl` | Import certificat custom |
| POST | `/hosting/web/{svc}/ssl/regenerate` | Régénérer SSL |
| DELETE | `/hosting/web/{svc}/ssl` | Supprimer SSL |
| POST | `/hosting/web/{svc}/attachedDomain/{domain}/ssl` | Activer SSL domaine |
| DELETE | `/hosting/web/{svc}/attachedDomain/{domain}/ssl` | Désactiver SSL domaine |
| GET | `/hosting/web/{svc}/tasks` | Liste tâches en cours |
| GET | `/hosting/web/{svc}/website` | Liste Git deployments |
| POST | `/hosting/web/{svc}/website` | Créer Git deployment |

### APIs v2 Iceberg (pagination)

| Méthode | Endpoint | Description |
|---------|----------|-------------|
| GET | `/webhosting/resource/{svc}/attachedDomain` | Liste paginée domaines |
| GET | `/webhosting/resource/{svc}/certificate` | Certificats SSL |

### APIs 2API (SWS)

| Méthode | Endpoint | Description |
|---------|----------|-------------|
| GET | `/sws/hosting/web/{svc}` | Dashboard agrégé |
| GET | `/sws/hosting/web/{svc}/add-domain-existing` | Domaines OVH existants |

---

## 15.2 Séquences d'appels par action

### A) Chargement initial de la page

```
1. GET /hosting/web
   → Liste hébergements (LEFT PANEL)

2. GET /hosting/web/{serviceName}
   → Détails service sélectionné

3. GET /hosting/web/{svc}/attachedDomain
   → Liste multisite (tableau)
   Headers Iceberg optionnels:
     X-Pagination-Mode: CachedObjectList-Pages
     X-Pagination-Size: 25
     X-Pagination-Number: 1

4. GET /hosting/web/{svc}/ssl
   → Info certificat SSL global

5. GET /hosting/web/{svc}/tasks
   → Tâches en cours (pour badges/polling)
```

### B) Ajouter un domaine (bouton + Ajouter)

```
1. GET /domain/zone
   → Zones DNS disponibles

2. GET /sws/hosting/web/{svc}/add-domain-existing?tokenNeeded=false
   → Domaines existants OVH

3. POST /hosting/web/{svc}/attachedDomain
   Body: {
     "domain": "nouveau.example.com",
     "path": "./nouveau",
     "cdn": "none",
     "ssl": true,
     "firewall": "none",
     "ownLog": null,
     "runtimeId": null
   }

4. [Si www requis]
   POST /hosting/web/{svc}/attachedDomain
   Body: { "domain": "www.nouveau.example.com", ... }

5. Poll: GET /hosting/web/{svc}/tasks?function=attachedDomain/create
   → Jusqu'à state=done
```

### C) Supprimer un domaine (icône ×)

```
1. DELETE /hosting/web/{svc}/attachedDomain/{domain}

2. Poll: GET /hosting/web/{svc}/tasks
   → Jusqu'à completion
```

### D) Modifier dossier (icône ✎)

```
1. PUT /hosting/web/{svc}/attachedDomain/{domain}
   Body: {
     "path": "./nouveau-dossier"
   }
```

### E) Toggle STATUT ON/OFF

```
Option 1 - Restart vhost:
  POST /hosting/web/{svc}/attachedDomain/{domain}/restart

Option 2 - Modifier état:
  PUT /hosting/web/{svc}/attachedDomain/{domain}
  Body: { ... } // selon l'implémentation backend
```

### F) Toggle SSL (Let's Encrypt)

```
Activer:
  POST /hosting/web/{svc}/attachedDomain/{domain}/ssl

Désactiver:
  DELETE /hosting/web/{svc}/attachedDomain/{domain}/ssl

Poll après chaque action:
  GET /hosting/web/{svc}/ssl
  → Jusqu'à status=created ou status=none
```

### G) SSL Régénérer (icône ↺)

```
1. POST /hosting/web/{svc}/ssl/regenerate

2. Poll: GET /hosting/web/{svc}/ssl
   → Jusqu'à status=created
```

### H) SSL Changer type (icône ⇄)

```
Let's Encrypt → Sectigo:
  1. DELETE /hosting/web/{svc}/ssl
  2. Redirection vers page commande Sectigo
     GET /order/upgrade/webHosting/{svc}/ssl

Sectigo → Let's Encrypt:
  1. DELETE /hosting/web/{svc}/ssl
  2. POST /hosting/web/{svc}/attachedDomain/{domain}/ssl

Import certificat custom:
  POST /hosting/web/{svc}/ssl
  Body: {
    "certificate": "-----BEGIN CERTIFICATE-----...",
    "key": "-----BEGIN PRIVATE KEY-----...",
    "chain": "-----BEGIN CERTIFICATE-----..."
  }
```

### I) Toggle CDN

```
PUT /hosting/web/{svc}/attachedDomain/{domain}
Body: {
  "cdn": "active"  // ou "none"
}
```

### J) Toggle FIREWALL

```
PUT /hosting/web/{svc}/attachedDomain/{domain}
Body: {
  "firewall": "active"  // ou "none"
}
```

### K) Toggle LOGS

```
PUT /hosting/web/{svc}/attachedDomain/{domain}
Body: {
  "ownLog": "domain.com"  // ou null pour désactiver
}
```

### L) Toggle GIT

```
Activer:
  POST /hosting/web/{svc}/website
  Body: {
    "domain": "example.com",
    "branch": "main",
    "repository": "https://github.com/user/repo.git"
  }

Désactiver:
  DELETE /hosting/web/{svc}/website/{websiteId}
```

### M) Toggle IPV6

```
PUT /hosting/web/{svc}/attachedDomain/{domain}
Body: {
  "ipv6": true  // ou false
}
```

### N) Actualiser (bouton ↻)

```
1. GET /hosting/web/{svc}/attachedDomain
   → Re-fetch liste complète

2. GET /hosting/web/{svc}/tasks
   → Refresh tâches en cours
```

---

## 15.3 Payloads de requête

### POST /hosting/web/{svc}/attachedDomain

```json
{
  "domain": "string",
  "path": "string",
  "cdn": "active | none",
  "ssl": true,
  "firewall": "active | none",
  "ownLog": "string | null",
  "runtimeId": "number | null",
  "ipLocation": "string | null",
  "bypassDNSConfiguration": false
}
```

### PUT /hosting/web/{svc}/attachedDomain/{domain}

```json
{
  "path": "string",
  "cdn": "active | none",
  "firewall": "active | none",
  "ownLog": "string | null",
  "runtimeId": "number | null",
  "ssl": true
}
```

### POST /hosting/web/{svc}/ssl (import)

```json
{
  "certificate": "string (PEM)",
  "key": "string (PEM, non chiffré)",
  "chain": "string (PEM, optionnel)"
}
```

---

## 15.4 Réponses attendues

### GET /hosting/web/{svc}/attachedDomain/{domain}

```json
{
  "domain": "example.com",
  "path": "./www",
  "cdn": "active",
  "firewall": "none",
  "ownLog": null,
  "ssl": true,
  "runtimeId": 12345,
  "status": "created",
  "ipLocation": null
}
```

### GET /hosting/web/{svc}/ssl

```json
{
  "status": "created | creating | regenerating | deleting",
  "provider": "LETSENCRYPT | SECTIGO | CUSTOM",
  "type": "DV | OV | EV",
  "isReportable": true,
  "regenerable": true,
  "domains": ["example.com", "www.example.com"]
}
```

### GET /hosting/web/{svc}/tasks

```json
[
  {
    "id": 123456,
    "function": "attachedDomain/create",
    "status": "done | doing | todo | error",
    "startDate": "2024-01-15T10:30:00Z",
    "doneDate": "2024-01-15T10:31:00Z",
    "lastUpdate": "2024-01-15T10:31:00Z"
  }
]
```

---

## 15.5 Gestion des erreurs

| Code HTTP | Action |
|-----------|--------|
| 401 | Redirection vers page login |
| 403 | Affichage message permission refusée |
| 404 | Ressource non trouvée |
| 409 | Conflit (domaine déjà attaché, opération en cours) |
| 429 | Rate limit - réessayer plus tard |
| 500 | Erreur serveur |

### Messages i18n

```json
{
  "hosting_multisite_add_success": "Le domaine {{domain}} a été ajouté avec succès.",
  "hosting_multisite_add_error": "Erreur lors de l'ajout du domaine: {{error}}",
  "hosting_multisite_delete_success": "Le domaine {{domain}} a été supprimé.",
  "hosting_multisite_delete_error": "Erreur lors de la suppression: {{error}}",
  "hosting_multisite_ssl_activate_success": "SSL activé pour {{domain}}.",
  "hosting_multisite_ssl_deactivate_success": "SSL désactivé pour {{domain}}.",
  "hosting_multisite_update_success": "Configuration mise à jour.",
  "hosting_multisite_update_error": "Erreur lors de la mise à jour: {{error}}"
}
```

---

## 15.6 Polling des tâches asynchrones

### Configuration polling

```typescript
const POLLING_CONFIG = {
  interval: 5000,        // 5 secondes
  maxAttempts: 60,       // 5 minutes max
  successStates: ['done'],
  errorStates: ['error', 'cancelled']
};
```

### Tâches à poller

| Action | function filter |
|--------|-----------------|
| Ajout domaine | `attachedDomain/create` |
| Suppression domaine | `attachedDomain/delete` |
| Activation SSL | `ssl/create` |
| Régénération SSL | `ssl/regenerate` |
| Modification domaine | `attachedDomain/update` |

---

## 15.7 Hooks React Query recommandés

### useAttachedDomains

```typescript
import { useQuery } from '@tanstack/react-query';
import { v6 } from '@ovh-ux/manager-core-api';

export const useAttachedDomains = (serviceName: string) => {
  return useQuery({
    queryKey: ['hosting', serviceName, 'attachedDomain'],
    queryFn: async () => {
      const { data } = await v6.get(
        `/hosting/web/${serviceName}/attachedDomain`
      );
      // Fetch détails pour chaque domaine
      const details = await Promise.all(
        data.map((domain: string) =>
          v6.get(`/hosting/web/${serviceName}/attachedDomain/${domain}`)
        )
      );
      return details.map(d => d.data);
    },
    staleTime: 30000,
  });
};
```

### useAddDomain

```typescript
import { useMutation, useQueryClient } from '@tanstack/react-query';
import { v6 } from '@ovh-ux/manager-core-api';

export const useAddDomain = (serviceName: string) => {
  const queryClient = useQueryClient();

  return useMutation({
    mutationFn: async (payload: AddDomainPayload) => {
      const { data } = await v6.post(
        `/hosting/web/${serviceName}/attachedDomain`,
        payload
      );
      return data;
    },
    onSuccess: () => {
      queryClient.invalidateQueries({
        queryKey: ['hosting', serviceName, 'attachedDomain']
      });
    },
  });
};
```

### useUpdateDomain

```typescript
export const useUpdateDomain = (serviceName: string, domain: string) => {
  const queryClient = useQueryClient();

  return useMutation({
    mutationFn: async (payload: UpdateDomainPayload) => {
      const { data } = await v6.put(
        `/hosting/web/${serviceName}/attachedDomain/${domain}`,
        payload
      );
      return data;
    },
    onSuccess: () => {
      queryClient.invalidateQueries({
        queryKey: ['hosting', serviceName, 'attachedDomain']
      });
    },
  });
};
```

### useDeleteDomain

```typescript
export const useDeleteDomain = (serviceName: string) => {
  const queryClient = useQueryClient();

  return useMutation({
    mutationFn: async (domain: string) => {
      await v6.delete(
        `/hosting/web/${serviceName}/attachedDomain/${domain}`
      );
    },
    onSuccess: () => {
      queryClient.invalidateQueries({
        queryKey: ['hosting', serviceName, 'attachedDomain']
      });
    },
  });
};
```

### useToggleSSL

```typescript
export const useToggleSSL = (serviceName: string, domain: string) => {
  const queryClient = useQueryClient();

  return useMutation({
    mutationFn: async (enable: boolean) => {
      if (enable) {
        await v6.post(
          `/hosting/web/${serviceName}/attachedDomain/${domain}/ssl`
        );
      } else {
        await v6.delete(
          `/hosting/web/${serviceName}/attachedDomain/${domain}/ssl`
        );
      }
    },
    onSuccess: () => {
      queryClient.invalidateQueries({
        queryKey: ['hosting', serviceName, 'attachedDomain']
      });
      queryClient.invalidateQueries({
        queryKey: ['hosting', serviceName, 'ssl']
      });
    },
  });
};
```

### useTasks (polling)

```typescript
export const useTasks = (serviceName: string, options?: { 
  refetchInterval?: number 
}) => {
  return useQuery({
    queryKey: ['hosting', serviceName, 'tasks'],
    queryFn: async () => {
      const { data } = await v6.get(
        `/hosting/web/${serviceName}/tasks`
      );
      return data;
    },
    refetchInterval: options?.refetchInterval ?? 5000,
  });
};
```

---

## 15.8 Types TypeScript

```typescript
// Types principaux

interface AttachedDomain {
  domain: string;
  path: string;
  cdn: 'active' | 'none';
  firewall: 'active' | 'none';
  ownLog: string | null;
  ssl: boolean;
  runtimeId: number | null;
  status: 'created' | 'creating' | 'deleting' | 'updating';
  ipLocation: string | null;
}

interface AddDomainPayload {
  domain: string;
  path: string;
  cdn?: 'active' | 'none';
  ssl?: boolean;
  firewall?: 'active' | 'none';
  ownLog?: string | null;
  runtimeId?: number | null;
  bypassDNSConfiguration?: boolean;
}

interface UpdateDomainPayload {
  path?: string;
  cdn?: 'active' | 'none';
  firewall?: 'active' | 'none';
  ownLog?: string | null;
  ssl?: boolean;
  runtimeId?: number | null;
}

interface SSLInfo {
  status: 'created' | 'creating' | 'regenerating' | 'deleting' | 'none';
  provider: 'LETSENCRYPT' | 'SECTIGO' | 'CUSTOM' | 'COMODO';
  type?: 'DV' | 'OV' | 'EV';
  isReportable: boolean;
  regenerable: boolean;
  domains: string[];
}

interface Task {
  id: number;
  function: string;
  status: 'done' | 'doing' | 'todo' | 'error' | 'cancelled';
  startDate: string;
  doneDate?: string;
  lastUpdate: string;
}

interface HostingInfo {
  serviceName: string;
  displayName: string;
  offer: string;
  state: 'active' | 'suspended' | 'deleting';
  cluster: string;
  primaryLogin: string;
  quotaSize: { value: number; unit: string };
  quotaUsed: { value: number; unit: string };
}
```

---

# 16. ÉTATS ET COMPORTEMENTS

## 16.1 Hover (non représenté en SVG statique)

| Élément | Effet |
|---------|-------|
| Boutons | opacity 0.8 ou background plus foncé |
| Liens | text-decoration underline |
| Toggles | cursor pointer |
| Icônes actions | scale 1.1 |

## 16.2 Focus

| Propriété | Valeur |
|-----------|--------|
| Outline | 2px solid `#0050D7` |
| Outline-offset | 2px |

## 16.3 Disabled

| Propriété | Valeur |
|-----------|--------|
| Opacity | 0.5 |
| Cursor | not-allowed |

## 16.4 Règles métier

- Si STATUT = OFF → colonnes SSL à IPV6 vides
- Toggle ON = service activé
- Toggle OFF = service désactivé
- SSL "—" = pas de certificat configuré
- Tâche en cours → afficher spinner + désactiver actions

---

# 17. PROMPTS / PLACEHOLDERS

| Zone | Texte |
|------|-------|
| LEFT PANEL - Recherche | "Rechercher..." |
| BARRE D'ACTIONS - Recherche | "Rechercher un domaine..." |
| INFO BOX | "Gerez les domaines attaches a votre hebergement. Chaque domaine peut avoir son propre dossier racine, certificat SSL et configuration CDN." |

---

# 18. RESPONSIVE (non implémenté)

Ce mockup est conçu pour desktop (1440px).

| Breakpoint | Adaptation |
|------------|------------|
| < 1200px | NAV3 en dropdown/hamburger |
| < 992px | LEFT PANEL en drawer |
| < 768px | Tableau en cards |

---

# FIN DE DOCUMENTATION
