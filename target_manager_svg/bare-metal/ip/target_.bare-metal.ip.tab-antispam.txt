# Cahier des Charges : bare-metal/ip - Antispam

## 1. VUE D'ENSEMBLE
- **Page** : Antispam - Bloc IP
- **Type** : Page détail onglet
- **Objectif** : Gérer les blocages antispam sur les IPs

## 2. STRUCTURE PAGE
- Header OVHcloud + sidebar
- Breadcrumb (IP › Bloc › Antispam)
- Titre
- Encart alerte (si IPs bloquées)
- Tableau des IPs avec statut spam
- Section info

## 3. COMPOSANTS UI
- **OdsBreadcrumb** : IP › 192.168.1.0/24 › Antispam
- **OdsMessage** : Warning alerte spam (jaune)
- **OdsDatagrid** : Tableau des IPs
- **OdsBadge** : Bloquée (rouge), Débloquée (vert)
- **OdsLink** : Voir détails
- **OdsActionMenu** : Menu actions par ligne
- **OdsCard** : Info antispam

## 4. ALERTE SPAM
| Propriété | Valeur |
|-----------|--------|
| Type | Warning (jaune) |
| Icône | ⚠️ |
| Titre | Alerte Antispam |
| Texte 1 | Une activité de spam a été détectée sur certaines de vos IP. |
| Texte 2 | Le port 25 (SMTP) est bloqué sur les IP concernées. |

## 5. COLONNES TABLEAU
| Colonne | Type | Description |
|---------|------|-------------|
| Adresse IP | Link | Adresse IP concernée |
| État | Badge | Bloquée (rouge), Débloquée (vert) |
| Date de détection | DateTime | Format JJ/MM/AAAA HH:MM |
| Date de déblocage | DateTime | Date estimée ou effective |
| Détails | Link | Voir détails |
| Actions | ActionMenu | Menu ⋮ |

## 6. ACTION MENU
| Option | Style |
|--------|-------|
| Voir les statistiques | Normal |
| Demander le déblocage | Normal |

## 7. INFO ANTISPAM
| Propriété | Valeur |
|-----------|--------|
| Titre | À propos de l'antispam |
| Texte 1 | Lorsqu'une activité de spam est détectée, le port 25 (SMTP) est automatiquement bloqué. |
| Texte 2 | Le déblocage automatique intervient après 48 heures si aucune nouvelle activité n'est détectée. |

## 8. APIS & ENDPOINTS
- GET /ip/{ip}/spam
  - Liste des IPs avec statut spam
- GET /ip/{ip}/spam/{ipSpamming}
  - Détails d'une IP en spam
- POST /ip/{ip}/spam/{ipSpamming}/unblock
  - Demander déblocage
