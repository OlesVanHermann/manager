# Cahier des Charges : bare-metal/cdn - Onglet Règles de cache

## 1. VUE D'ENSEMBLE
- **Page** : Règles de cache du CDN
- **Type** : Onglet tableau
- **Objectif** : Configurer le comportement du cache

## 2. STRUCTURE PAGE
- Breadcrumb avec retour
- Titre "Règles de cache"
- Onglets navigation
- Toolbar actions
- Tableau règles (drag & drop)
- Bandeau info ordre

## 3. COMPOSANTS UI
- **OdsTabs** : Navigation
- **OdsButton** : Ajouter, Activer toutes, Purger
- **OdsDatagrid** : Tableau règles (sortable)
- **OdsBadge** : État (Actif, Inactif)
- **OdsActionMenu** : Menu par ligne
- **OdsMessage** : Info ordre des règles

## 4. TOOLBAR
| Bouton | Style | Action |
|--------|-------|--------|
| Ajouter une règle | Primary | Ouvre modal création |
| Activer toutes les règles | Outline | Active toutes |
| Purger cache | Outline | Vide le cache global |

## 5. COLONNES DATAGRID
| Colonne | Type | Description |
|---------|------|-------------|
| Priorité | Number | Ordre d'application |
| Type | Text | Extension, URI, Header |
| Motif (Pattern) | Monospace | Pattern de matching |
| TTL | Text | Durée de cache |
| Domaine | Link | Domaine concerné ou "Tous" |
| État | Badge | Actif (vert), Inactif (orange) |
| Actions | ActionMenu | Menu ⋮ |

## 6. TYPES DE RÈGLES
| Type | Exemple | Description |
|------|---------|-------------|
| Extension | .jpg, .png, .css | Match sur extension fichier |
| URI | /api/*, /static/* | Match sur chemin URL |
| Header | Cache-Control: private | Match sur header HTTP |

## 7. VALEURS TTL
| Valeur | Description |
|--------|-------------|
| Pas de cache | Bypass du cache |
| 1 heure | 3600 secondes |
| 1 jour | 86400 secondes |
| 7 jours | 1 semaine |
| 30 jours | 1 mois |
| 1 an | 365 jours |

## 8. ACTIONMENU (⋮)
| Action | Style | Description |
|--------|-------|-------------|
| Modifier | Normal | Édite la règle |
| Activer/Désactiver | Normal | Toggle état |
| Purger cette règle | Normal | Vide cache de cette règle |
| Supprimer | Danger | Supprime la règle |

## 9. BANDEAU INFO
| Propriété | Valeur |
|-----------|--------|
| Type | Info (bleu) |
| Titre | Ordre des règles |
| Texte 1 | Les règles sont appliquées par ordre de priorité. La première règle correspondante est utilisée. |
| Texte 2 | Glissez-déposez les lignes pour modifier l'ordre de priorité. |

## 10. APIS & ENDPOINTS
- GET /cdn/dedicated/{serviceName}/domains/{domain}/rules
  - Liste des règles
- POST /cdn/dedicated/{serviceName}/domains/{domain}/rules
  - Créer règle
- PUT /cdn/dedicated/{serviceName}/domains/{domain}/rules/{id}
  - Modifier règle
- DELETE /cdn/dedicated/{serviceName}/domains/{domain}/rules/{id}
  - Supprimer règle

