# Cahier des Charges : public-cloud/kubernetes - Modal Configurer OIDC

## 1. VUE D'ENSEMBLE
- **Modal** : Configurer le fournisseur OIDC
- **Type** : Modal formulaire avec accordéon
- **Objectif** : Ajouter l'authentification OIDC au cluster

## 2. STRUCTURE MODAL
- Overlay sombre
- Conteneur blanc 800x780px
- Titre + bouton fermer
- Description explicative
- Champs obligatoires (Provider URL, Client ID)
- Accordéon "Configuration optionnelle"
- Footer avec boutons

## 3. COMPOSANTS UI
- **OdsModal** : Conteneur large
- **OdsText** : Description, labels, helper text
- **OdsInput** : Champs de saisie
- **OdsSelect** : signingAlgorithms
- **OdsAccordion** : Configuration optionnelle
- **OdsButton** : Annuler, Ajouter

## 4. TITRE
"Configurer le fournisseur OIDC"

## 5. DESCRIPTION
"Vous pouvez utiliser la plupart des fournisseurs OIDC comme Dex, Keycloak ou un fournisseur SaaS, à la condition qu'ils exposent la fonctionnalité "OpenID Connect discovery". Le fournisseur OIDC doit être accessible depuis une URL en HTTPS."

## 6. CHAMPS OBLIGATOIRES

| Champ | Type | Exemple | Helper |
|-------|------|---------|--------|
| Provider URL | Input (required) | https://auth.example.com | Saisissez ici l'URL de discovery de votre fournisseur, sans path. L'URL doit pointer vers le niveau précédent .well-known/openid-configuration. |
| Client ID | Input (required) | cluster-kubernetes-production | Saisissez ici l'identifiant du cluster Kubernetes auprès de votre fournisseur OIDC. |

## 7. ACCORDÉON CONFIGURATION OPTIONNELLE
- Fond gris (#F3F4F6)
- Icône ▼ pour expand/collapse
- Label : "Configuration optionnelle"

## 8. CHAMPS OPTIONNELS (expanded)

| Champ | Type | Placeholder | Position |
|-------|------|-------------|----------|
| usernameClaim | Input | sub | Gauche |
| usernamePrefix | Input | oidc: | Droite |
| groupsClaim | Input (full width) | groups | Helper: "Ajoutez plusieurs valeurs en les séparant par des virgules" |
| signingAlgorithms | Select | RS256 | Gauche |

## 9. BOUTONS
| Bouton | Style | Position | Action |
|--------|-------|----------|--------|
| Annuler | Outline gris | Gauche | Fermer modal |
| Ajouter | Primary bleu | Droite | POST OIDC config |

## 10. APIS & ENDPOINTS
- POST /cloud/project/{projectId}/kube/{kubeId}/openIdConnect
  - Body: { issuerUrl, clientId, usernameClaim?, usernamePrefix?, groupsClaim?, signingAlgorithms? }
  - Configurer OIDC
