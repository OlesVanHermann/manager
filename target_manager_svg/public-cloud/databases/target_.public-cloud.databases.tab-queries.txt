# Cahier des Charges : public-cloud/databases - Onglet Requêtes (PostgreSQL)

## 1. VUE D'ENSEMBLE
- **Page** : Databases - Onglet Requêtes
- **Type** : Page onglet monitoring
- **Objectif** : Surveiller les requêtes en cours et les statistiques

## 2. STRUCTURE PAGE
- Header OVH
- Sidebar avec service PostgreSQL actif
- Breadcrumb avec "Requêtes"
- Onglets (Requêtes actif)
- Titre "Requêtes"
- Section "Requêtes en cours"
- Toggles (connexions actives, rafraîchir)
- Tableau requêtes en cours
- Section "Statistiques de requêtes"
- Tableau statistiques
- ActionMenu ouvert

## 3. COMPOSANTS UI
- **OdsBreadcrumb** : Navigation
- **OdsTabs** : Onglets avec Requêtes actif
- **OdsToggle** : Afficher connexions actives
- **OdsToggle** : Rafraîchir automatiquement
- **OdsTable** : 2 tableaux
- **OdsActionMenu** : Actions

## 4. SECTIONS

### Section "Requêtes en cours"
- Sous-titre: "Requêtes en cours"
- Description: "Liste des requêtes en cours d'exécution"
- Toggles:
  - "Afficher les connexions actives" (on)
  - "Rafraîchir automatiquement" (on)

### Tableau Requêtes en cours
| Colonne | Type | Description |
|---------|------|-------------|
| Requête | Monospace | Requête SQL tronquée |
| PID | Nombre | Process ID |
| Durée | Texte | Temps d'exécution |
| Base de données | Texte | Nom de la base |
| Adresse client | IP | Adresse IP client |
| Actions | Menu ⋮ | ActionMenu |

### Section "Statistiques de requêtes"
- Sous-titre: "Statistiques de requêtes"

### Tableau Statistiques
| Colonne | Type | Description |
|---------|------|-------------|
| Requête | Monospace | Requête SQL |
| Nb lignes | Nombre | Rows affected |
| Nb appels | Nombre | Call count |
| Min (ms) | Nombre | Temps minimum |
| Max (ms) | Nombre | Temps maximum |
| Moyenne | Nombre | Temps moyen |
| Total (ms) | Nombre | Temps total |

## 5. ACTION MENU (ouvert)
| Action | Type |
|--------|------|
| Terminer la requête | Danger (rouge) |

## 6. APIS & ENDPOINTS
- GET /cloud/project/{projectId}/database/postgresql/{serviceId}/query/current
  - Requêtes en cours
- GET /cloud/project/{projectId}/database/postgresql/{serviceId}/query/statistics
  - Statistiques des requêtes
- POST /cloud/project/{projectId}/database/postgresql/{serviceId}/query/{pid}/cancel
  - Annuler une requête
