# PROMPT SPLIT v3 - Architecture Modulaire React/TypeScript (Isolation Stricte)

Version: v3.0 (2026-01-01)
Remplace: prompt_split.txt (v2)

Changelog v2â†’v3:
- Terminologie officielle NAV1-NAV4 avec positions fixes
- NAV3 = Groupement (LEFT PANEL, au-dessus de recherche)
- NAV4 = Fonction (RIGHT PANEL, tabs principaux)

Changelog v1â†’v2:
- Structure GROUPES (remplace tabs/ plat)
- NAV4 (sous-tabs) documentÃ©
- Fichiers additionnels (helpers, icons, modals, sections)
- Specs CSS layout intÃ©grÃ©es
- Patterns de traductions multiples
- API multi-providers documentÃ©
- Warnings/Ã©tats d'erreur documentÃ©s
- ISOLATION STRICTE MAINTENUE (pas de service/hooks partagÃ©s NAV2)

================================================================================
## A) CONTEXTE
================================================================================

Tu es un expert en refactoring React/TypeScript pour le projet New Manager OVHcloud.

### Terminologie officielle

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Niveau  â”‚ Nom          â”‚ Position     â”‚ Description                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ NAV1    â”‚ Univers      â”‚ Header       â”‚ Header OVH (Web Cloud, Public Cloud...) â”‚
â”‚ NAV2    â”‚ Produit      â”‚ Sous-header  â”‚ Section (Domaines, HÃ©bergement...)      â”‚
â”‚ NAV3    â”‚ Groupement   â”‚ LEFT PANEL   â”‚ Toggle TOUJOURS en sidebar,             â”‚
â”‚         â”‚              â”‚ (au-dessus   â”‚ AU-DESSUS de [Rechercher]               â”‚
â”‚         â”‚              â”‚ de search)   â”‚ ([GÃ©nÃ©ral][Sites][Expert]...)           â”‚
â”‚ NAV4    â”‚ Fonction     â”‚ RIGHT PANEL  â”‚ Onglets TOUJOURS dans le panel          â”‚
â”‚         â”‚              â”‚ (tabs)       â”‚ principal (FTP, SSL, BDD...)            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

### RÃ¨gles de position

  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ NAV1 - Univers (Header bleu OVH)                                            â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚ NAV2 - Produit (Sous-header blanc)                                          â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚ LEFT PANEL (280px)    â”‚ RIGHT PANEL (flex: 1)                               â”‚
  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
  â”‚ â”‚ NAV3 - Groupement â”‚ â”‚ â”‚ Titre service                                   â”‚ â”‚
  â”‚ â”‚ [GÃ©nÃ©ral][Sites]  â”‚ â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
  â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ â”‚ NAV4 - Fonction                                 â”‚ â”‚
  â”‚ â”‚ ğŸ” Rechercher...  â”‚ â”‚ â”‚ [FTP] [SSL] [BDD] [CDN] [Cron]                  â”‚ â”‚
  â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
  â”‚ â”‚ Liste services    â”‚ â”‚ â”‚ Contenu de l'onglet sÃ©lectionnÃ©                 â”‚ â”‚
  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

IMPORTANT :
- NAV3 (Groupement) est TOUJOURS dans le LEFT PANEL, AU-DESSUS de la recherche
- NAV4 (Fonction) est TOUJOURS dans le RIGHT PANEL (tabs principaux)

### Architecture de navigation (correspondance fichiers)

| Niveau | Nom | Position | Exemple hosting | Dossier |
|--------|-----|----------|-----------------|---------|
| **NAV1** | Univers | Header | `web-cloud` | `src/pages/web-cloud/` |
| **NAV2** | Produit | Sous-header | `hosting` | `src/pages/web-cloud/hosting/` |
| **NAV3** | Groupement | LEFT PANEL | `general`, `sites`, `expert` | `hosting/general/`, `hosting/sites/` |
| **NAV4** | Fonction | RIGHT PANEL | `ftp`, `ssl`, `database` | `hosting/expert/ftp/` |

### Conventions

- Le 1er Ã©lÃ©ment de NAV1 s'appelle `general`
- Le 1er NAV3 (Groupement) s'appelle `general`
- Le 1er NAV4 d'un groupement s'appelle souvent `general` (mais pas obligatoire)
- NAV4 = unitÃ© de dÃ©factorisation (1 fonction = 1 Ã®le isolÃ©e)

### Objectif

DÃ‰FACTORISER un module monolithique en modules ISOLÃ‰S par NAV4 (Fonction), organisÃ©s en NAV3 (Groupement).

> **"Chaque fonction (NAV4) est une Ã®le. Chaque groupement (NAV3) est un archipel. Aucun pont entre les Ã®les. Ni en JS, ni en CSS."**

================================================================================
## B) ARBORESCENCE CIBLE
================================================================================

### B.1) Structure avec NAV3 Groupement / NAV4 Fonction (standard)

```
src/pages/{NAV1 Univers}/{NAV2 Produit}/
â”‚
â”œâ”€â”€ {nav2}.types.ts              # Types partagÃ©s (SEUL partage JS autorisÃ©)
â”œâ”€â”€ index.tsx                    # Layout + routing NAV3/NAV4
â”œâ”€â”€ styles.css                   # CSS layout uniquement (sidebar, split, tabs)
â”‚
â”œâ”€â”€ {Nav2}Sidebar.tsx            # Composant sidebar avec NAV3 (optionnel)
â”œâ”€â”€ {Nav2}Layout.tsx             # Composant layout (optionnel)
â”œâ”€â”€ LeftPanel.tsx                # Alternative Ã  Sidebar (optionnel)
â”œâ”€â”€ RightPanelHeader.tsx         # Header contextuel (optionnel)
â”œâ”€â”€ Onboarding.tsx               # Ã‰tat vide / accueil (optionnel)
â”œâ”€â”€ tabs.ts                      # Barrel exports tabs (optionnel)
â”‚
â”œâ”€â”€ {nav3 groupement}/           # â•â•â•â•â•â• NAV3 GROUPEMENT (LEFT PANEL) â•â•â•â•â•â•
â”‚   â”‚
â”‚   â”œâ”€â”€ index.ts                 # Barrel exports (modales du groupement)
â”‚   â”‚
â”‚   â”œâ”€â”€ {Modal}Modal.tsx         # Modales partagÃ©es DU GROUPEMENT (pas NAV2)
â”‚   â”œâ”€â”€ {Modal}Modal.css         # CSS modales du groupement (optionnel)
â”‚   â”‚
â”‚   â””â”€â”€ {nav4 fonction}/         # â•â•â•â•â•â• NAV4 FONCTION (RIGHT PANEL, ISOLÃ‰) â•â•â•â•â•â•
â”‚       â”‚
â”‚       â”œâ”€â”€ index.ts             # Barrel export (export default)
â”‚       â”œâ”€â”€ {Nav4}Tab.tsx        # Composant principal
â”‚       â”œâ”€â”€ {Nav4}Tab.service.ts # Service API isolÃ©
â”‚       â”œâ”€â”€ {Nav4}Tab.css        # Styles isolÃ©s (prÃ©fixe .{nav4}-*)
â”‚       â”‚
â”‚       â”œâ”€â”€ {Nav4}Tab.helpers.ts # Fonctions utilitaires (optionnel)
â”‚       â”œâ”€â”€ {Nav4}Tab.icons.tsx  # IcÃ´nes/assets (optionnel)
â”‚       â”œâ”€â”€ {Nav4}Tab.hooks.ts   # Hooks locaux (optionnel)
â”‚       â”‚
â”‚       â”œâ”€â”€ modals.ts            # Index des modales locales (optionnel)
â”‚       â”œâ”€â”€ modals.css           # CSS modales locales (optionnel)
â”‚       â”œâ”€â”€ modals.service.ts    # Service modales (optionnel)
â”‚       â”œâ”€â”€ {Action}Modal.tsx    # Modales locales Ã  la fonction
â”‚       â”‚
â”‚       â””â”€â”€ {subcomponent}.tsx   # Sous-composants de la fonction (optionnel)
â”‚
â””â”€â”€ api/                         # APIs multi-providers (optionnel)
    â”œâ”€â”€ index.ts                 # Factory/Router
    â”œâ”€â”€ {provider1}/
    â”‚   â”œâ”€â”€ index.ts
    â”‚   â”œâ”€â”€ {entity}.api.ts
    â”‚   â””â”€â”€ ...
    â””â”€â”€ {provider2}/
        â””â”€â”€ ...
```

### B.2) Exemple concret : web-cloud/hosting

```
src/pages/web-cloud/hosting/           # NAV1: web-cloud / NAV2: hosting
â”‚
â”œâ”€â”€ hosting.types.ts             # Types partagÃ©s
â”œâ”€â”€ index.tsx                    # Layout + routing NAV3/NAV4
â”œâ”€â”€ styles.css                   # CSS layout (sidebar avec NAV3, split, tabs NAV4)
â”œâ”€â”€ HostingSidebar.tsx           # Sidebar avec NAV3 Groupement
â”œâ”€â”€ HostingLayout.tsx
â”œâ”€â”€ TabLoader.tsx
â”œâ”€â”€ Onboarding.tsx
â”‚
â”œâ”€â”€ general/                     # NAV3 GROUPEMENT: [GÃ©nÃ©ral] (dans LEFT PANEL)
â”‚   â”‚
â”‚   â”œâ”€â”€ general/                 # NAV4 FONCTION: Home (dans RIGHT PANEL)
â”‚   â”‚   â”œâ”€â”€ index.ts
â”‚   â”‚   â”œâ”€â”€ GeneralTab.tsx
â”‚   â”‚   â”œâ”€â”€ GeneralTab.service.ts
â”‚   â”‚   â”œâ”€â”€ GeneralTab.css
â”‚   â”‚   â”œâ”€â”€ EditDisplayNameModal.tsx
â”‚   â”‚   â”œâ”€â”€ ConfigureSshModal.tsx
â”‚   â”‚   â”œâ”€â”€ MigrationModal.tsx
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚
â”‚   â”œâ”€â”€ offer/                   # NAV4 FONCTION: Offre
â”‚   â”‚   â”œâ”€â”€ index.ts
â”‚   â”‚   â”œâ”€â”€ OfferTab.tsx
â”‚   â”‚   â””â”€â”€ OfferTab.css
â”‚   â”‚
â”‚   â”œâ”€â”€ modules/                 # NAV4 FONCTION: Modules
â”‚   â”‚   â”œâ”€â”€ index.ts
â”‚   â”‚   â”œâ”€â”€ ModulesTab.tsx
â”‚   â”‚   â”œâ”€â”€ ModulesTab.service.ts
â”‚   â”‚   â”œâ”€â”€ ModulesTab.css
â”‚   â”‚   â”œâ”€â”€ modals.ts
â”‚   â”‚   â”œâ”€â”€ InstallModuleModal.tsx
â”‚   â”‚   â”œâ”€â”€ DeleteModuleModal.tsx
â”‚   â”‚   â””â”€â”€ ChangePasswordModal.tsx
â”‚   â”‚
â”‚   â”œâ”€â”€ logs/                    # NAV4 FONCTION: Logs (avec sous-tabs)
â”‚   â”‚   â”œâ”€â”€ index.ts
â”‚   â”‚   â”œâ”€â”€ LogsTab.tsx          # Vue principale
â”‚   â”‚   â”œâ”€â”€ LogsTab.service.ts
â”‚   â”‚   â”œâ”€â”€ LogsTab.css
â”‚   â”‚   â”œâ”€â”€ UserLogsTab.tsx      # Sous-tab
â”‚   â”‚   â”œâ”€â”€ UserLogsTab.css
â”‚   â”‚   â”œâ”€â”€ modals.ts
â”‚   â”‚   â”œâ”€â”€ UserLogsModal.tsx
â”‚   â”‚   â””â”€â”€ DownloadLogsModal.tsx
â”‚   â”‚
â”‚   â”œâ”€â”€ statistics/              # NAV4 FONCTION: Statistics
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚
â”‚   â”œâ”€â”€ seo/                     # NAV4 FONCTION: SEO
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚
â”‚   â””â”€â”€ indy/                    # NAV4 FONCTION: Indy
â”‚       â””â”€â”€ ...
â”‚
â”œâ”€â”€ sites/                       # NAV3 GROUPEMENT: [Sites] (dans LEFT PANEL)
â”‚   â”‚
â”‚   â”œâ”€â”€ multisite/               # NAV4 FONCTION: Multisite
â”‚   â”‚   â”œâ”€â”€ index.ts
â”‚   â”‚   â”œâ”€â”€ MultisiteTab.tsx
â”‚   â”‚   â”œâ”€â”€ MultisiteTab.service.ts
â”‚   â”‚   â”œâ”€â”€ MultisiteTab.css
â”‚   â”‚   â”œâ”€â”€ modals.ts
â”‚   â”‚   â”œâ”€â”€ AddDomainModal.tsx
â”‚   â”‚   â”œâ”€â”€ EditDomainModal.tsx
â”‚   â”‚   â”œâ”€â”€ EditDomainWizard.tsx
â”‚   â”‚   â”œâ”€â”€ DeleteDomainModal.tsx
â”‚   â”‚   â”œâ”€â”€ DeleteDomainWizard.tsx
â”‚   â”‚   â”œâ”€â”€ FlushCdnWizard.tsx
â”‚   â”‚   â””â”€â”€ DiagnosticModal.tsx
â”‚   â”‚
â”‚   â””â”€â”€ ssl/                     # NAV4 FONCTION: SSL
â”‚       â”œâ”€â”€ index.ts
â”‚       â”œâ”€â”€ SslTab.tsx
â”‚       â”œâ”€â”€ SslTab.service.ts
â”‚       â”œâ”€â”€ SslTab.css
â”‚       â”œâ”€â”€ modals.ts
â”‚       â”œâ”€â”€ OrderSslModal.tsx
â”‚       â”œâ”€â”€ OrderSslWizard.tsx
â”‚       â”œâ”€â”€ ImportSslModal.tsx
â”‚       â”œâ”€â”€ RegenerateSslModal.tsx
â”‚       â””â”€â”€ DeleteSslModal.tsx
â”‚
â””â”€â”€ expert/                      # NAV3 GROUPEMENT: [Expert] (dans LEFT PANEL)
    â”‚
    â”œâ”€â”€ ftp/                     # NAV4 FONCTION: FTP
    â”‚   â”œâ”€â”€ index.ts
    â”‚   â”œâ”€â”€ FtpTab.tsx
    â”‚   â”œâ”€â”€ FtpTab.service.ts
    â”‚   â”œâ”€â”€ FtpTab.css
    â”‚   â”œâ”€â”€ modals.ts
    â”‚   â”œâ”€â”€ CreateFtpUserModal.tsx
    â”‚   â”œâ”€â”€ EditFtpUserModal.tsx
    â”‚   â”œâ”€â”€ DeleteFtpUserModal.tsx
    â”‚   â””â”€â”€ ChangePasswordModal.tsx
    â”‚
    â”œâ”€â”€ database/                # NAV4 FONCTION: BDD (avec sous-tabs)
    â”‚   â”œâ”€â”€ index.ts
    â”‚   â”œâ”€â”€ DatabaseTab.tsx
    â”‚   â”œâ”€â”€ DatabaseTab.service.ts
    â”‚   â”œâ”€â”€ DatabaseTab.css
    â”‚   â”œâ”€â”€ DatabaseStatisticsTab.tsx   # Sous-tab
    â”‚   â”œâ”€â”€ DatabaseDumpsTab.tsx        # Sous-tab
    â”‚   â”œâ”€â”€ DatabaseDumpsTab.css
    â”‚   â”œâ”€â”€ modals.ts
    â”‚   â”œâ”€â”€ CreateDatabaseModal.tsx
    â”‚   â”œâ”€â”€ EditDatabaseModal.tsx
    â”‚   â”œâ”€â”€ DeleteDatabaseModal.tsx
    â”‚   â”œâ”€â”€ ChangePasswordModal.tsx
    â”‚   â”œâ”€â”€ DumpDatabaseModal.tsx
    â”‚   â”œâ”€â”€ RestoreDatabaseModal.tsx
    â”‚   â”œâ”€â”€ CopyDatabaseModal.tsx
    â”‚   â””â”€â”€ ImportSqlModal.tsx
    â”‚
    â”œâ”€â”€ cdn/                     # NAV4 FONCTION: CDN (avec sous-tabs)
    â”‚   â”œâ”€â”€ index.ts
    â”‚   â”œâ”€â”€ CdnTab.tsx
    â”‚   â”œâ”€â”€ CdnTab.service.ts
    â”‚   â”œâ”€â”€ CdnTab.css
    â”‚   â”œâ”€â”€ CdnSettingsTab.tsx          # Sous-tab
    â”‚   â”œâ”€â”€ CdnSettingsTab.css
    â”‚   â”œâ”€â”€ ActivateCdnModal.tsx
    â”‚   â”œâ”€â”€ DeactivateCdnModal.tsx
    â”‚   â””â”€â”€ FlushCdnModal.tsx
    â”‚
    â”œâ”€â”€ boost/                   # NAV4 FONCTION: Boost
    â”œâ”€â”€ cron/                    # NAV4 FONCTION: Cron
    â”œâ”€â”€ envvars/                 # NAV4 FONCTION: Variables
    â”œâ”€â”€ runtimes/                # NAV4 FONCTION: Runtimes
    â”œâ”€â”€ emails/                  # NAV4 FONCTION: Emails
    â”œâ”€â”€ clouddb/                 # NAV4 FONCTION: CloudDB
    â””â”€â”€ tasks/                   # NAV4 FONCTION: TÃ¢ches
```

### B.3) Exemple : web-cloud/domains (modales partagÃ©es au NAV3 Groupement)

```
src/pages/web-cloud/domains/           # NAV1: web-cloud / NAV2: domains
â”‚
â”œâ”€â”€ domains.types.ts
â”œâ”€â”€ domains.css
â”œâ”€â”€ index.tsx
â”‚
â”œâ”€â”€ general/                     # NAV3 GROUPEMENT: [GÃ©nÃ©ral] (dans LEFT PANEL)
â”‚   â”‚
â”‚   â”œâ”€â”€ index.ts                 # Export: LockModal, RenewModal, etc.
â”‚   â”‚
â”‚   â”œâ”€â”€ LockModal.tsx            # Modales PARTAGÃ‰ES du groupement general
â”‚   â”œâ”€â”€ RenewModal.tsx
â”‚   â”œâ”€â”€ AuthInfoModal.tsx
â”‚   â”œâ”€â”€ TransferModal.tsx
â”‚   â”œâ”€â”€ ContactChangeModal.tsx
â”‚   â”œâ”€â”€ ContactEditModal.tsx
â”‚   â”œâ”€â”€ OwoModal.tsx
â”‚   â”œâ”€â”€ ExportCsvModal.tsx
â”‚   â”œâ”€â”€ BatchRenewModal.tsx
â”‚   â”œâ”€â”€ BatchLockModal.tsx
â”‚   â”œâ”€â”€ BatchDnsModal.tsx
â”‚   â”œâ”€â”€ BatchDnssecModal.tsx
â”‚   â”‚
â”‚   â”œâ”€â”€ GeneralTab.tsx           # NAV4 FONCTION: principal
â”‚   â”œâ”€â”€ GeneralTab.service.ts
â”‚   â”œâ”€â”€ GeneralTab.css
â”‚   â”‚
â”‚   â”œâ”€â”€ contacts/                # NAV4 FONCTION: Contacts
â”‚   â”‚   â”œâ”€â”€ ContactsTab.tsx
â”‚   â”‚   â”œâ”€â”€ ContactsTab.service.ts
â”‚   â”‚   â””â”€â”€ ContactsTab.css
â”‚   â”‚
â”‚   â””â”€â”€ alldom/                  # NAV4 FONCTION: Alldom
â”‚       â”œâ”€â”€ AlldomTab.tsx
â”‚       â”œâ”€â”€ AlldomTab.service.ts
â”‚       â””â”€â”€ AlldomTab.css
â”‚
â”œâ”€â”€ dns/                         # NAV3 GROUPEMENT: [DNS] (dans LEFT PANEL)
â”‚   â”‚
â”‚   â”œâ”€â”€ index.ts                 # Export modales partagÃ©es DNS
â”‚   â”‚
â”‚   â”œâ”€â”€ AddRecordModal.tsx       # Modales PARTAGÃ‰ES du groupement dns
â”‚   â”œâ”€â”€ EditRecordModal.tsx
â”‚   â”œâ”€â”€ DeleteRecordModal.tsx
â”‚   â”œâ”€â”€ TtlModal.tsx
â”‚   â”œâ”€â”€ ResetZoneModal.tsx
â”‚   â”œâ”€â”€ ImportZoneModal.tsx
â”‚   â”œâ”€â”€ ExportZoneModal.tsx
â”‚   â”œâ”€â”€ DnsChangeModal.tsx
â”‚   â”œâ”€â”€ AnycastModal.tsx
â”‚   â”œâ”€â”€ AnycastTerminateModal.tsx
â”‚   â”œâ”€â”€ DnssecEnableModal.tsx
â”‚   â”œâ”€â”€ DnssecDisableModal.tsx
â”‚   â”œâ”€â”€ AddDsRecordModal.tsx
â”‚   â”œâ”€â”€ DynHostAddModal.tsx
â”‚   â”œâ”€â”€ DynHostEditModal.tsx
â”‚   â”œâ”€â”€ DynHostDeleteModal.tsx
â”‚   â”œâ”€â”€ DynHostLoginAddModal.tsx
â”‚   â”œâ”€â”€ DynHostLoginEditModal.tsx
â”‚   â”œâ”€â”€ DynHostLoginDeleteModal.tsx
â”‚   â”‚
â”‚   â”œâ”€â”€ zone/                    # NAV4 FONCTION: Zone
â”‚   â”‚   â”œâ”€â”€ ZoneTab.tsx
â”‚   â”‚   â”œâ”€â”€ ZoneTab.service.ts
â”‚   â”‚   â””â”€â”€ ZoneTab.css
â”‚   â”‚
â”‚   â”œâ”€â”€ dnssec/                  # NAV4 FONCTION: DNSSEC
â”‚   â”œâ”€â”€ dnsservers/              # NAV4 FONCTION: DNS Servers
â”‚   â”œâ”€â”€ dynhost/                 # NAV4 FONCTION: DynHost
â”‚   â”œâ”€â”€ dns-info/                # NAV4 FONCTION: DNS Info
â”‚   â”œâ”€â”€ spf/                     # NAV4 FONCTION: SPF
â”‚   â”œâ”€â”€ dkim/                    # NAV4 FONCTION: DKIM
â”‚   â”œâ”€â”€ dmarc/                   # NAV4 FONCTION: DMARC
â”‚   â”œâ”€â”€ arc/                     # NAV4 FONCTION: ARC
â”‚   â”œâ”€â”€ caa/                     # NAV4 FONCTION: CAA
â”‚   â””â”€â”€ bimi/                    # NAV4 FONCTION: BIMI
â”‚
â””â”€â”€ expert/                      # NAV3 GROUPEMENT: [Expert] (dans LEFT PANEL)
    â”‚
    â”œâ”€â”€ index.ts
    â”‚
    â”œâ”€â”€ GlueAddModal.tsx         # Modales partagÃ©es du groupement expert
    â”œâ”€â”€ GlueEditModal.tsx
    â”œâ”€â”€ GlueDeleteModal.tsx
    â”‚
    â”œâ”€â”€ glue/                    # NAV4 FONCTION: Glue
    â”‚   â”œâ”€â”€ GlueTab.tsx
    â”‚   â”œâ”€â”€ GlueTab.service.ts
    â”‚   â””â”€â”€ GlueTab.css
    â”‚
    â””â”€â”€ tasks/                   # NAV4 FONCTION: Tasks
        â”œâ”€â”€ TasksTab.tsx
        â”œâ”€â”€ TasksTab.service.ts
        â””â”€â”€ TasksTab.css
```

### B.4) Exemple : web-cloud/emails (API multi-providers)

```
src/pages/web-cloud/emails/            # NAV1: web-cloud / NAV2: emails
â”‚
â”œâ”€â”€ types.ts                     # Types partagÃ©s
â”œâ”€â”€ styles.css                   # CSS layout
â”œâ”€â”€ index.tsx
â”‚
â”œâ”€â”€ LeftPanel.tsx                # Sidebar avec NAV3 Groupement
â”œâ”€â”€ LeftPanel.css
â”œâ”€â”€ RightPanelHeader.tsx
â”œâ”€â”€ DomainView.tsx               # Vue domaine dans LeftPanel
â”œâ”€â”€ LicenseView.tsx              # Vue licence dans LeftPanel
â”œâ”€â”€ OfferBadge.tsx               # Badge offre (prÃ©sentation pure)
â”œâ”€â”€ Onboarding.tsx
â”œâ”€â”€ Onboarding.css
â”‚
â”œâ”€â”€ modals.css                   # CSS modales partagÃ©es NAV2
â”œâ”€â”€ CreateAccountModal.tsx       # Modales partagÃ©es NAV2
â”œâ”€â”€ EditAccountModal.tsx
â”œâ”€â”€ DeleteAccountModal.tsx
â”œâ”€â”€ ChangePasswordModal.tsx
â”œâ”€â”€ AddAliasModal.tsx
â”œâ”€â”€ CreateRedirectionModal.tsx
â”œâ”€â”€ CreateResponderModal.tsx
â”œâ”€â”€ CreateListModal.tsx
â”œâ”€â”€ AddListMemberModal.tsx
â”œâ”€â”€ CreateContactModal.tsx
â”œâ”€â”€ CreateResourceModal.tsx
â”œâ”€â”€ OrderPackModal.tsx
â”œâ”€â”€ DeleteModal.tsx
â”œâ”€â”€ ConfigureDmarcModal.tsx
â”‚
â”œâ”€â”€ api/                         # APIs par provider
â”‚   â”œâ”€â”€ index.ts                 # Factory: getApi(provider)
â”‚   â”œâ”€â”€ mxplan/
â”‚   â”‚   â”œâ”€â”€ index.ts
â”‚   â”‚   â”œâ”€â”€ accounts.api.ts
â”‚   â”‚   â”œâ”€â”€ redirections.api.ts
â”‚   â”‚   â”œâ”€â”€ lists.api.ts
â”‚   â”‚   â””â”€â”€ tasks.api.ts
â”‚   â”œâ”€â”€ exchange/
â”‚   â”‚   â”œâ”€â”€ index.ts
â”‚   â”‚   â”œâ”€â”€ accounts.api.ts
â”‚   â”‚   â”œâ”€â”€ redirections.api.ts
â”‚   â”‚   â”œâ”€â”€ groups.api.ts
â”‚   â”‚   â”œâ”€â”€ resources.api.ts
â”‚   â”‚   â”œâ”€â”€ devices.api.ts
â”‚   â”‚   â”œâ”€â”€ audit.api.ts
â”‚   â”‚   â””â”€â”€ tasks.api.ts
â”‚   â”œâ”€â”€ emailpro/
â”‚   â”‚   â”œâ”€â”€ index.ts
â”‚   â”‚   â”œâ”€â”€ accounts.api.ts
â”‚   â”‚   â”œâ”€â”€ redirections.api.ts
â”‚   â”‚   â””â”€â”€ tasks.api.ts
â”‚   â””â”€â”€ zimbra/
â”‚       â”œâ”€â”€ index.ts
â”‚       â”œâ”€â”€ accounts.api.ts
â”‚       â”œâ”€â”€ redirections.api.ts
â”‚       â”œâ”€â”€ aliases.api.ts
â”‚       â””â”€â”€ tasks.api.ts
â”‚
â”œâ”€â”€ general/                     # NAV3 GROUPEMENT: [General] (dans LEFT PANEL)
â”‚   â”‚
â”‚   â”œâ”€â”€ index.ts
â”‚   â”œâ”€â”€ general.css              # CSS partagÃ© du groupement (layout)
â”‚   â”‚
â”‚   â”œâ”€â”€ AccountsTab.tsx          # NAV4 FONCTION: Accounts
â”‚   â”œâ”€â”€ RedirectionsTab.tsx      # NAV4 FONCTION: Redirections
â”‚   â”œâ”€â”€ RespondersTab.tsx        # NAV4 FONCTION: Responders
â”‚   â”œâ”€â”€ ListsTab.tsx             # NAV4 FONCTION: Lists
â”‚   â”œâ”€â”€ TasksTab.tsx             # NAV4 FONCTION: Tasks
â”‚   â”‚
â”‚   â”œâ”€â”€ security/                # NAV4 FONCTION: Security (avec sous-tabs)
â”‚   â”‚   â”œâ”€â”€ index.ts
â”‚   â”‚   â”œâ”€â”€ SecurityTab.tsx      # Container sous-tabs
â”‚   â”‚   â”œâ”€â”€ DnsConfigTab.tsx     # Sous-tab
â”‚   â”‚   â”œâ”€â”€ AntispamTab.tsx      # Sous-tab
â”‚   â”‚   â””â”€â”€ SignatureTab.tsx     # Sous-tab
â”‚   â”‚
â”‚   â””â”€â”€ advanced/                # NAV4 FONCTION: Advanced (avec sous-tabs)
â”‚       â”œâ”€â”€ index.ts
â”‚       â”œâ”€â”€ AdvancedTab.tsx      # Container sous-tabs
â”‚       â”œâ”€â”€ ResourcesTab.tsx     # Sous-tab
â”‚       â”œâ”€â”€ ContactsTab.tsx      # Sous-tab
â”‚       â”œâ”€â”€ AuditTab.tsx         # Sous-tab
â”‚       â””â”€â”€ DevicesTab.tsx       # Sous-tab
â”‚
â””â”€â”€ packs/                       # NAV3 GROUPEMENT: [Packs] (dans LEFT PANEL)
    â”‚
    â”œâ”€â”€ index.ts
    â”‚
    â”œâ”€â”€ PacksTab.tsx             # NAV4 FONCTION: Packs (index)
    â”œâ”€â”€ AlacarteTab.tsx          # NAV4 FONCTION: A la carte
    â”œâ”€â”€ HistoryTab.tsx           # NAV4 FONCTION: History
    â””â”€â”€ LicensesTab.tsx          # NAV4 FONCTION: Licenses
```

### B.5) Traductions

```
public/locales/{lang}/{NAV1 Univers}/{NAV2 Produit}/
â”‚
â”œâ”€â”€ index.json                   # ClÃ©s communes NAV2
â”œâ”€â”€ modals.json                  # ClÃ©s modales partagÃ©es (optionnel)
â”‚
â”œâ”€â”€ {nav4}.json                  # Par fonction NAV4 (dans RIGHT PANEL)
â”‚   Exemples:
â”‚   â”œâ”€â”€ general.json
â”‚   â”œâ”€â”€ ftp.json
â”‚   â”œâ”€â”€ ssl.json
â”‚   â””â”€â”€ database.json
â”‚
â””â”€â”€ {nav4}/                      # Si sous-tabs existent (optionnel)
    â””â”€â”€ {subtab}.json
```

**Patterns acceptÃ©s :**

| # | Pattern | Exemple |
|---|---------|---------|
| 1 | `index.json` | Fichier unique monolithique |
| 2 | `{nav4}.json` | Un fichier par NAV4 Fonction |
| 3 | `{nav1}.{nav2}.{nav4}.json` | PrÃ©fixÃ© complet |
| 4 | `{nav4}/{subtab}.json` | Structure profonde |

================================================================================
## C) PRINCIPE DE DÃ‰FACTORISATION (STRICT)
================================================================================

### DÃ©finition

**DÃ‰FACTORISATION** = L'inverse de la factorisation/mutualisation.
Au lieu de partager le code commun, on le **DUPLIQUE VOLONTAIREMENT** pour garantir l'**INDÃ‰PENDANCE TOTALE**.

### Pourquoi dÃ©factoriser ?

| Factorisation (AVANT)                | DÃ©factorisation (APRÃˆS)              |
|--------------------------------------|--------------------------------------|
| 1 service partagÃ© = 1 point de casse | N services isolÃ©s = 0 rÃ©gression     |
| 1 CSS partagÃ© = styles qui cassent   | N CSS isolÃ©s = styles indÃ©pendants   |
| Modifier FTP casse SSL               | Modifier FTP n'impacte QUE FTP       |
| Couplage fort entre fonctions        | Couplage ZÃ‰RO entre fonctions        |
| "DRY" mal appliquÃ©                   | "WET" assumÃ© (Write Everything Twice)|
| Refacto globale risquÃ©e              | Refacto locale safe                  |

### RÃ¨gle d'or

```
SI deux fonctions (NAV4) ont besoin de la mÃªme fonction/style/helper :
   â†’ DUPLIQUER le code dans CHAQUE NAV4
   â†’ NE JAMAIS crÃ©er un fichier partagÃ© entre NAV4
```

================================================================================
## D) INTERDITS ABSOLUS - JAVASCRIPT/TYPESCRIPT âŒ
================================================================================

### âŒ INTERDIT JS-1 : Import croisÃ© entre FONCTIONS (NAV4)

```typescript
// âŒ INTERDIT - FtpTab.tsx ne doit JAMAIS faire :
import { sslService } from "../../sites/ssl/SslTab.service";
import { quelqueChose } from "../general/GeneralTab";
import { formatDomain } from "../../sites/multisite/MultisiteTab";
```

### âŒ INTERDIT JS-2 : Import croisÃ© entre GROUPEMENTS (NAV3)

```typescript
// âŒ INTERDIT - Une fonction du groupement expert/ ne doit JAMAIS importer de general/
import { generalService } from "../../general/general/GeneralTab.service";
import { ModulesTab } from "../../general/modules/ModulesTab";
```

### âŒ INTERDIT JS-3 : Service MÃ‰TIER partagÃ© au niveau NAV2 Produit

```typescript
// âŒ INTERDIT - Plus JAMAIS de service mÃ©tier partagÃ©
import { hostingService } from "../hosting.service";
import { domainsService } from "../domains.service";

// âŒ INTERDIT - Hooks partagÃ©s NAV2
import { useHostingData } from "../useHostingData";
import { useEmailAccounts } from "../useEmailAccounts";
```

### âŒ INTERDIT JS-4 : Service global dans /services/ (sauf API)

```typescript
// âŒ INTERDIT - Service mÃ©tier global
import { hostingService } from "@/services/web-cloud.hosting";
import { domainsService } from "@/services/web-cloud.domains";

// âœ… AUTORISÃ‰ - API globale uniquement
import { ovhGet, ovhPost, ovhPut, ovhDelete } from "@/services/api";
```

### âŒ INTERDIT JS-5 : Helper/utils partagÃ© au niveau NAV2 Produit

```typescript
// âŒ INTERDIT - Pas de fichier utils/helpers commun entre fonctions
import { formatDate } from "../../hosting.utils";
import { validateDomain } from "../../hosting.helpers";
```

### âŒ INTERDIT JS-6 : Composant partagÃ© interne entre fonctions (NAV4)

```typescript
// âŒ INTERDIT - Pas de composants mutualisÃ©s entre fonctions
import { HostingCard } from "../../components/HostingCard";
import { DomainSelector } from "../../shared/DomainSelector";
```

### âŒ INTERDIT JS-7 : Context/Provider partagÃ© entre fonctions (NAV4)

```typescript
// âŒ INTERDIT - Pas de context commun entre fonctions
import { useHostingContext } from "../../HostingContext";
import { HostingProvider } from "../../HostingProvider";
```

### âŒ INTERDIT JS-8 : Barrel NAV2 qui rÃ©-exporte les fonctions (NAV4)

```typescript
// âŒ INTERDIT - hosting/index.ts NE DOIT PAS faire :
export * from "./expert/ftp/FtpTab";
export * from "./sites/ssl/SslTab";
export { FtpTab, SslTab, DatabaseTab };
```

================================================================================
## E) INTERDITS ABSOLUS - CSS/STYLES âŒ
================================================================================

### âŒ INTERDIT CSS-1 : Import CSS d'une autre FONCTION (NAV4)

```typescript
// âŒ INTERDIT - FtpTab ne doit JAMAIS importer le CSS d'une autre fonction
import "../../sites/ssl/SslTab.css";
import "../database/DatabaseTab.css";
```

### âŒ INTERDIT CSS-2 : Import CSS d'un autre GROUPEMENT (NAV3)

```typescript
// âŒ INTERDIT - Fonction expert/ ne doit JAMAIS importer CSS de general/
import "../../general/general/GeneralTab.css";
```

### âŒ INTERDIT CSS-3 : Classes CSS gÃ©nÃ©riques sans prÃ©fixe

```css
/* âŒ INTERDIT - Pas de classes gÃ©nÃ©riques sans prÃ©fixe fonction */
.modal-overlay { }
.card { }
.table { }
.button-primary { }
.status-badge { }
```

### âŒ INTERDIT CSS-4 : PrÃ©fixe wh- (legacy)

```css
/* âŒ INTERDIT - PrÃ©fixe legacy Ã  bannir */
.wh-hosting-card { }
.wh-ftp-user { }
```

### âŒ INTERDIT CSS-5 : Variables CSS locales partagÃ©es

```css
/* âŒ INTERDIT - Pas de variables CSS communes entre fonctions */
/* hosting-variables.css */
:root {
  --hosting-primary: #0050d7;
  --hosting-spacing: 16px;
}
```

================================================================================
## F) AUTORISÃ‰S âœ…
================================================================================

### âœ… AUTORISÃ‰ 1 : Types partagÃ©s au niveau NAV2

```typescript
// âœ… AUTORISÃ‰ - SEUL fichier JS partagÃ© entre les tabs
// hosting/hosting.types.ts
export interface HostingInfo {
  serviceName: string;
  offer: string;
  state: "active" | "suspended";
}

export interface FtpUser {
  login: string;
  home: string;
  state: "enabled" | "disabled";
}

export interface SslCertificate {
  provider: string;
  status: string;
  expirationDate: string;
}
```

### âœ… AUTORISÃ‰ 2 : CSS Layout au niveau NAV2

```css
/* âœ… AUTORISÃ‰ - hosting/styles.css */
/* UNIQUEMENT layout : sidebar, split, header, tabs navigation */

.hosting-layout {
  display: flex;
  min-height: 100vh;
}

.hosting-sidebar {
  width: 280px;
  flex-shrink: 0;
}

.hosting-content {
  flex: 1;
  padding: 15px 24px 24px 24px;
}

.hosting-tabs-nav {
  display: flex;
  gap: 16px;
  border-bottom: 1px solid var(--ods-color-grey-200);
}
```

### âœ… AUTORISÃ‰ 3 : Composants Layout au niveau NAV2

```typescript
// âœ… AUTORISÃ‰ - Composants de structure PURS (pas de logique mÃ©tier)
import { HostingLayout } from "./HostingLayout";
import { HostingSidebar } from "./HostingSidebar";
import { LeftPanel } from "./LeftPanel";
import { RightPanelHeader } from "./RightPanelHeader";
import { Onboarding } from "./Onboarding";
import { TabLoader } from "./TabLoader";
```

**Condition :** Ces composants sont du LAYOUT UNIQUEMENT, pas de logique mÃ©tier.

### âœ… AUTORISÃ‰ 4 : Composants de prÃ©sentation PURS au niveau NAV2

```typescript
// âœ… AUTORISÃ‰ - Petits composants sans logique mÃ©tier
import { OfferBadge } from "./OfferBadge";       // Badge Exchange/Pro/Zimbra
import { StatusBadge } from "./StatusBadge";     // Badge active/inactive
```

**Condition :** Uniquement de l'affichage, AUCUNE logique mÃ©tier.

### âœ… AUTORISÃ‰ 5 : Barrel exports tabs (tabs.ts)

```typescript
// âœ… AUTORISÃ‰ - wordpress/tabs.ts
// Export centralisÃ© pour index.tsx
export { GeneralTab } from "./GeneralTab";
export { DomainsTab } from "./domains/DomainsTab";
export { PerformanceTab } from "./performance/PerformanceTab";
export { BackupsTab } from "./backups/BackupsTab";
export { TasksTab } from "./tasks/TasksTab";
```

### âœ… AUTORISÃ‰ 6 : Modales partagÃ©es au niveau GROUPEMENT (NAV3)

```typescript
// âœ… AUTORISÃ‰ - Modales partagÃ©es entre fonctions DU MÃŠME GROUPEMENT
// domains/dns/AddRecordModal.tsx - utilisable par zone/, dnssec/, etc.

// Import depuis une fonction du mÃªme groupement :
import { AddRecordModal } from "../AddRecordModal";
```

**Condition :** Partage UNIQUEMENT au sein du mÃªme groupement (NAV3), pas entre groupements.

### âœ… AUTORISÃ‰ 7 : API multi-providers

```typescript
// âœ… AUTORISÃ‰ - APIs sÃ©parÃ©es par provider
// emails/api/index.ts
import * as mxplan from "./mxplan";
import * as exchange from "./exchange";
import * as emailpro from "./emailpro";
import * as zimbra from "./zimbra";

export type EmailProvider = "mxplan" | "exchange" | "emailpro" | "zimbra";
const providers = { mxplan, exchange, emailpro, zimbra };
export const getApi = (provider: EmailProvider) => providers[provider];
```

### âœ… AUTORISÃ‰ 8 : Duplication JS ASSUMÃ‰E entre fonctions (NAV4)

```typescript
// âœ… AUTORISÃ‰ - Si FTP et SSL ont besoin de formatDate(), CHAQUE fonction a SA copie

// expert/ftp/FtpTab.service.ts
const formatDate = (d: string) => new Date(d).toLocaleDateString("fr-FR");

// sites/ssl/SslTab.service.ts
const formatDate = (d: string) => new Date(d).toLocaleDateString("fr-FR");
```

### âœ… AUTORISÃ‰ 9 : Duplication CSS ASSUMÃ‰E entre fonctions (NAV4)

```css
/* âœ… AUTORISÃ‰ - Si FTP et SSL ont besoin du mÃªme style, CHAQUE fonction a SA copie */

/* expert/ftp/FtpTab.css */
.ftp-status-badge {
  padding: 4px 8px;
  border-radius: 4px;
  font-size: 12px;
}

/* sites/ssl/SslTab.css */
.ssl-status-badge {
  padding: 4px 8px;
  border-radius: 4px;
  font-size: 12px;
}
```

### âœ… AUTORISÃ‰ 10 : Helpers locaux Ã  la fonction (NAV4)

```typescript
// âœ… AUTORISÃ‰ - expert/ftp/FtpTab.helpers.ts
export const formatQuota = (bytes: number) => `${(bytes / 1024 / 1024).toFixed(2)} MB`;
export const formatDate = (d: string) => new Date(d).toLocaleDateString("fr-FR");
export const validateLogin = (login: string) => /^[a-z0-9_-]+$/.test(login);
```

### âœ… AUTORISÃ‰ 11 : Icons locaux Ã  la fonction (NAV4)

```typescript
// âœ… AUTORISÃ‰ - expert/ftp/FtpTab.icons.tsx
export const FtpIcon = () => <svg>...</svg>;
export const UploadIcon = () => <svg>...</svg>;
export const FolderIcon = () => <svg>...</svg>;
```

### âœ… AUTORISÃ‰ 12 : Hooks locaux Ã  la fonction (NAV4)

```typescript
// âœ… AUTORISÃ‰ - expert/ftp/FtpTab.hooks.ts
export const useFtpUsers = (serviceName: string) => {
  const [users, setUsers] = useState<FtpUser[]>([]);
  const [loading, setLoading] = useState(true);
  // ...
  return { users, loading, refetch };
};
```

### âœ… AUTORISÃ‰ 13 : Globals application

```typescript
// âœ… AUTORISÃ‰ - Imports globaux application
import { ovhGet, ovhPost, ovhPut, ovhDelete } from "@/services/api";
import { Button, Modal, Table, Alert } from "@/components/ui";
import { useApi, useToast, useTranslation } from "@/hooks";

// Variables CSS ODS
.ftp-card {
  background: var(--ods-color-grey-50);
  border-radius: var(--ods-radius-lg);
  padding: var(--ods-spacing-md);
}
```

### âœ… AUTORISÃ‰ 14 : Warnings/Ã©tats d'erreur dans dossier dÃ©diÃ©

```
// âœ… AUTORISÃ‰ - overthebox/warnings/
overthebox/
â”œâ”€â”€ warnings/
â”‚   â”œâ”€â”€ index.ts
â”‚   â”œâ”€â”€ Warnings.css
â”‚   â”œâ”€â”€ WarningDeviceLink.tsx
â”‚   â”œâ”€â”€ WarningNoPayment.tsx
â”‚   â”œâ”€â”€ WarningNoSubscription.tsx
â”‚   â”œâ”€â”€ WarningNotActivated.tsx
â”‚   â””â”€â”€ WarningNotFound.tsx
```

================================================================================
## G) SPECS CSS LAYOUT
================================================================================

### G.1) Valeurs de rÃ©fÃ©rence

| PropriÃ©tÃ© | Valeur | Usage |
|-----------|--------|-------|
| **Sidebar width** | `280px` | LeftPanel / Sidebar |
| **Content padding** | `15px 24px 24px 24px` | RightPanel / Content |
| **Gap split** | `16px` | Entre sidebar et content |
| **Tab gap** | `16px` | Entre onglets navigation |
| **Border radius** | `var(--ods-radius-lg)` | Cards, modales |
| **Spacing** | `var(--ods-spacing-*)` | Padding, margins |

### G.2) Structure layout type

```css
/* styles.css - Layout NAV2 */

.{nav2}-layout {
  display: flex;
  min-height: 100vh;
  gap: 16px;
}

.{nav2}-sidebar {
  width: 280px;
  flex-shrink: 0;
  background: var(--ods-color-grey-50);
  border-right: 1px solid var(--ods-color-grey-200);
}

.{nav2}-content {
  flex: 1;
  padding: 15px 24px 24px 24px;
  overflow-y: auto;
}

.{nav2}-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 24px;
}

.{nav2}-tabs-nav {
  display: flex;
  gap: 16px;
  border-bottom: 1px solid var(--ods-color-grey-200);
  margin-bottom: 24px;
}
```

### G.3) Classes CSS par niveau

| Niveau | PrÃ©fixe | Exemples |
|--------|---------|----------|
| **NAV2 layout** | `.{nav2}-` | `.hosting-layout`, `.hosting-sidebar` |
| **NAV3 Groupement** | `.{nav3}-` | `.expert-section`, `.dns-panel` |
| **NAV4 Fonction** | `.{nav4}-` | `.ftp-table`, `.ssl-card`, `.database-form` |
| **Sous-tab** | `.{nav4}-{subtab}-` | `.database-statistics-chart`, `.database-dumps-list` |
| **Modal** | `.{nav4}-modal-` | `.ftp-modal-form`, `.ssl-modal-content` |
| **Warning** | `.warning-{state}` | `.warning-device-link` |

================================================================================
## H) INDÃ‰PENDANCE ENTRE NIVEAUX
================================================================================

### Matrice de partage

| Relation | IndÃ©pendance | Partage autorisÃ© |
|----------|--------------|------------------|
| **NAV1 â†” NAV1** (Univers) | TOTALE | Globaux uniquement |
| **NAV2 â†” NAV2** (Produit) | TOTALE | Globaux uniquement |
| **NAV3 â†” NAV3** (Groupement) | TOTALE | `{nav2}.types.ts` uniquement |
| **NAV4 â†” NAV4** (Fonction) | TOTALE | Types NAV2 + Modales NAV3 Groupement |

### SchÃ©ma d'isolation

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              GLOBAUX APP                                    â”‚
â”‚  /services/api.ts â”‚ /components/ui/ â”‚ /hooks/ â”‚ CSS ODS (var(--ods-*))     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         NAV2 PRODUIT (hosting)                              â”‚
â”‚  hosting.types.ts â”‚ styles.css â”‚ Layout â”‚ Sidebar (NAV3) â”‚ Onboarding      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â–¼                           â–¼                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ NAV3 GROUPEMENT     â”‚   â”‚ NAV3 GROUPEMENT     â”‚   â”‚ NAV3 GROUPEMENT     â”‚
â”‚   general/          â”‚   â”‚   sites/            â”‚   â”‚   expert/           â”‚
â”‚   (LEFT PANEL)      â”‚   â”‚   (LEFT PANEL)      â”‚   â”‚   (LEFT PANEL)      â”‚
â”‚   index.ts          â”‚   â”‚   index.ts          â”‚   â”‚   index.ts          â”‚
â”‚   *Modal.tsx        â”‚   â”‚   *Modal.tsx        â”‚   â”‚   *Modal.tsx        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                           â”‚                           â”‚
    â”Œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”               â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”               â”Œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”
    â–¼     â–¼     â–¼               â–¼           â–¼               â–¼     â–¼     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”
â”‚NAV4   â”‚NAV4   â”‚NAV4   â”‚ â”‚   NAV4    â”‚   NAV4    â”‚ â”‚ NAV4  â”‚ NAV4  â”‚ NAV4  â”‚
â”‚generalâ”‚modulesâ”‚logs   â”‚ â”‚ multisite â”‚    ssl    â”‚ â”‚  ftp  â”‚  cdn  â”‚  db   â”‚
â”‚(RIGHT â”‚(RIGHT â”‚(RIGHT â”‚ â”‚  (RIGHT   â”‚  (RIGHT   â”‚ â”‚(RIGHT â”‚(RIGHT â”‚(RIGHT â”‚
â”‚PANEL) â”‚PANEL) â”‚PANEL) â”‚ â”‚  PANEL)   â”‚  PANEL)   â”‚ â”‚PANEL) â”‚PANEL) â”‚PANEL) â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¤ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”œâ”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚.tsx   â”‚.tsx   â”‚.tsx   â”‚ â”‚   .tsx    â”‚   .tsx    â”‚ â”‚ .tsx  â”‚ .tsx  â”‚ .tsx  â”‚
â”‚.svc.tsâ”‚.svc.tsâ”‚.svc.tsâ”‚ â”‚  .svc.ts  â”‚  .svc.ts  â”‚ â”‚.svc.tsâ”‚.svc.tsâ”‚.svc.tsâ”‚
â”‚.css   â”‚.css   â”‚.css   â”‚ â”‚   .css    â”‚   .css    â”‚ â”‚ .css  â”‚ .css  â”‚ .css  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”˜
    â–²           â–²               â–²           â–²               â–²       â–²
    â”‚           â”‚               â”‚           â”‚               â”‚       â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”˜
                              AUCUN PONT
                   (sauf types NAV2 + modales NAV3 Groupement)
```

================================================================================
## I) CONVENTIONS DE NOMMAGE
================================================================================

### I.1) Fichiers

| Ã‰lÃ©ment | Convention | Exemple |
|---------|------------|---------|
| **Types NAV2 Produit** | `{nav2}.types.ts` | `hosting.types.ts` |
| **CSS NAV2** | `styles.css` ou `{nav2}.css` | `styles.css` |
| **Layout** | `{Nav2}Layout.tsx` | `HostingLayout.tsx` |
| **Sidebar (avec NAV3)** | `{Nav2}Sidebar.tsx` ou `LeftPanel.tsx` | `HostingSidebar.tsx` |
| **Composant NAV4 Fonction** | `{Nav4}Tab.tsx` | `FtpTab.tsx` |
| **Service NAV4** | `{Nav4}Tab.service.ts` | `FtpTab.service.ts` |
| **CSS NAV4** | `{Nav4}Tab.css` | `FtpTab.css` |
| **Helpers NAV4** | `{Nav4}Tab.helpers.ts` | `FtpTab.helpers.ts` |
| **Icons NAV4** | `{Nav4}Tab.icons.tsx` | `FtpTab.icons.tsx` |
| **Hooks NAV4** | `{Nav4}Tab.hooks.ts` | `FtpTab.hooks.ts` |
| **Sous-tab** | `{Nav4}{Subtab}Tab.tsx` | `DatabaseStatisticsTab.tsx` |
| **Modale** | `{Action}{Entity}Modal.tsx` | `CreateFtpUserModal.tsx` |
| **Warning** | `Warning{State}.tsx` | `WarningDeviceLink.tsx` |
| **API provider** | `{entity}.api.ts` | `accounts.api.ts` |
| **Traduction** | `{nav4}.json` | `ftp.json` |

### I.2) Services

| Type | Nommage | Exemple |
|------|---------|---------|
| **Service fonction (NAV4)** | `{nav4}Service` | `ftpService` |
| **API provider** | `{provider}Api` | `mxplanApi` |

### I.3) Imports depuis un tab (expert/ftp/)

```typescript
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// IMPORTS AUTORISÃ‰S depuis expert/ftp/FtpTab.tsx
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

// âœ… API globale
import { ovhGet, ovhPost, ovhPut, ovhDelete } from "@/services/api";

// âœ… Types NAV2 (seul partage JS)
import type { HostingInfo, FtpUser } from "../../hosting.types";

// âœ… Composants UI globaux
import { Button, Modal, Table, Alert, Spinner } from "@/components/ui";

// âœ… Hooks globaux
import { useApi, useToast } from "@/hooks";
import { useTranslation } from "react-i18next";

// âœ… Service local
import { ftpService } from "./FtpTab.service";

// âœ… Helpers locaux
import { formatQuota, validateLogin } from "./FtpTab.helpers";

// âœ… CSS local
import "./FtpTab.css";

// âœ… Modales locales
import { CreateFtpUserModal, EditFtpUserModal, DeleteFtpUserModal } from "./modals";

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// IMPORTS INTERDITS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

// âŒ Service/hooks partagÃ© NAV2
import { hostingService } from "../../hosting.service";
import { useHostingData } from "../../useHostingData";

// âŒ Import croisÃ© entre tabs
import { sslService } from "../../sites/ssl/SslTab.service";

// âŒ Import croisÃ© entre groupes
import { generalService } from "../../general/general/GeneralTab.service";
```

================================================================================
## J) WORKFLOW DE DÃ‰FACTORISATION
================================================================================

### PHASE 1 : ANALYSE

```bash
# 1. Identifier la structure actuelle
find src/pages/{nav1}/{nav2} -type f \( -name "*.tsx" -o -name "*.ts" -o -name "*.css" \) | sort

# 2. Lister les services partagÃ©s NAV2 (Ã€ SUPPRIMER)
ls -la src/pages/{nav1}/{nav2}/*.service.ts
ls -la src/pages/{nav1}/{nav2}/use*.ts

# 3. Lister les imports croisÃ©s entre tabs
grep -rn "from.*\.\.\/.*Tab" src/pages/{nav1}/{nav2}/

# 4. Lister les imports de services partagÃ©s
grep -rn "from.*\.\.\/.*\.service\|from.*\.\.\/use" src/pages/{nav1}/{nav2}/

# 5. Lister les CSS croisÃ©s
grep -rn "import.*\.\.\/.*\.css" src/pages/{nav1}/{nav2}/
```

### PHASE 2 : CRÃ‰ATION STRUCTURE

```bash
# CrÃ©er les groupements (NAV3)
mkdir -p src/pages/{nav1}/{nav2}/{general,dns,expert}

# CrÃ©er les fonctions (NAV4)
mkdir -p src/pages/{nav1}/{nav2}/general/{general,modules,logs}
mkdir -p src/pages/{nav1}/{nav2}/expert/{ftp,database,cdn}
```

### PHASE 2b : RÃˆGLES DE MIGRATION (structures existantes)

**âš ï¸ IMPORTANT : Ces rÃ¨gles s'appliquent lors de la migration de code existant**

#### RÃ¨gle M1 : Service API directement dans le rÃ©pertoire NAV4

```
âŒ INTERDIT - Pas de sous-dossier services/
AB/ftp/services/ftp.service.ts

âœ… CORRECT - Service directement dans le rÃ©pertoire NAV4
AB/ftp/FtpTab.service.ts
```

#### RÃ¨gle M2 : Modales Ã  plat (pas de sous-dossier Modals/)

```
âŒ INTERDIT - Pas de sous-dossier Modals/
AB/ftp/Modals/CreateModal.tsx
AB/ftp/Modals/EditModal.tsx
AB/ftp/Modals/DeleteModal.tsx

âœ… CORRECT - Modales Ã  plat dans le rÃ©pertoire NAV4
AB/ftp/CreateFtpUserModal.tsx
AB/ftp/EditFtpUserModal.tsx
AB/ftp/DeleteFtpUserModal.tsx
AB/ftp/modals.ts                   â† barrel export (optionnel)
```

**Migration :**
```bash
# DÃ©placer les modales vers le rÃ©pertoire parent
mv AB/ftp/Modals/*.tsx AB/ftp/
rmdir AB/ftp/Modals

# Renommer si nÃ©cessaire (prÃ©fixe entitÃ©)
mv AB/ftp/CreateModal.tsx AB/ftp/CreateFtpUserModal.tsx
```

#### RÃ¨gle M3 : Pas de sous-dossier tabs/ - dÃ©placer Ã  la racine

```
âŒ INTERDIT - Structure tabs/ imbriquÃ©e
AB/tabs/ftp/FtpTab.tsx
AB/tabs/ssl/SslTab.tsx

âœ… CORRECT - Fonctions directement dans le groupement
AB/ftp/FtpTab.tsx
AB/ssl/SslTab.tsx
```

**Migration :**
```bash
# 1. DÃ©placer les dossiers
mv AB/tabs/ftp AB/ftp
mv AB/tabs/ssl AB/ssl
rmdir AB/tabs

# 2. RÃ©Ã©crire TOUS les imports
# Avant: from "../tabs/ftp/FtpTab"
# AprÃ¨s: from "../ftp/FtpTab"

# Script de migration des imports
find src/pages/{nav1}/{nav2} -name "*.tsx" -o -name "*.ts" | xargs sed -i 's|/tabs/|/|g'
```

#### RÃ©sumÃ© des rÃ¨gles de migration

| Structure INTERDITE | Structure CORRECTE | Action |
|---------------------|-------------------|--------|
| `AB/XY/services/*.ts` | `AB/XY/{Nav4}Tab.service.ts` | Renommer + dÃ©placer |
| `AB/XY/Modals/*.tsx` | `AB/XY/*Modal.tsx` | DÃ©placer + supprimer dossier |
| `AB/tabs/XY/*` | `AB/XY/*` | DÃ©placer + rÃ©Ã©crire imports |
| `AB/components/*.tsx` | `AB/XY/*.tsx` (local) | Dupliquer dans chaque NAV4 |

### PHASE 3 : CRÃ‰ATION FICHIERS PAR FONCTION (NAV4)

Pour chaque fonction (NAV4), crÃ©er :
1. `index.ts` - Barrel export
2. `{Nav4}Tab.tsx` - Composant
3. `{Nav4}Tab.service.ts` - Service isolÃ©
4. `{Nav4}Tab.css` - Styles isolÃ©s
5. `{Nav4}Tab.helpers.ts` - Helpers (optionnel)
6. `modals.ts` + `*Modal.tsx` - Modales (optionnel)

### PHASE 4 : VÃ‰RIFICATION ISOLATION

```bash
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# TESTS D'ISOLATION JS (DOIVENT RETOURNER 0 RÃ‰SULTAT)
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

NAV1="web-cloud"
NAV2="hosting"

echo "=== Test JS-1: imports croisÃ©s entre tabs ==="
grep -rn "from.*\.\.\/.*Tab\." src/pages/${NAV1}/${NAV2}/ | grep -v "from \"./"

echo "=== Test JS-2: imports croisÃ©s entre groupes ==="
grep -rn "from.*\.\.\/\.\.\/general\|from.*\.\.\/\.\.\/sites\|from.*\.\.\/\.\.\/expert" src/pages/${NAV1}/${NAV2}/*/

echo "=== Test JS-3: service partagÃ© NAV2 ==="
grep -rn "from.*\.\.\/.*\.service\|from.*\.\.\/use" src/pages/${NAV1}/${NAV2}/*/ | grep -v "from \"./"

echo "=== Test JS-4: ancien service global ==="
grep -rn "from.*services/${NAV1}\.${NAV2}" src/pages/${NAV1}/${NAV2}/

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# TESTS D'ISOLATION CSS (DOIVENT RETOURNER 0 RÃ‰SULTAT)
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

echo "=== Test CSS-1: import CSS croisÃ© entre tabs ==="
grep -rn "import.*\.\.\/.*\.css" src/pages/${NAV1}/${NAV2}/*/ | grep -v "from \"./"

echo "=== Test CSS-2: classes sans prÃ©fixe ==="
grep -rn 'className="modal-\|className="btn-\|className="card-' src/pages/${NAV1}/${NAV2}/

echo "=== Test CSS-3: prÃ©fixe wh- interdit ==="
grep -rn 'className="wh-' src/pages/${NAV1}/${NAV2}/

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# TESTS LAYOUT
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

echo "=== Test Layout: padding split ==="
grep -n "padding.*15px.*24px.*24px.*24px\|padding: 15px 24px" src/pages/${NAV1}/${NAV2}/styles.css

echo "=== Test Layout: sidebar width ==="
grep -n "width.*280px" src/pages/${NAV1}/${NAV2}/styles.css

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# BUILD
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

cd /home/ubuntu/aiapp/frontend && npm run build:dev
```

### PHASE 5 : NETTOYAGE

```bash
# Backup puis suppression des fichiers partagÃ©s INTERDITS
mv --backup=numbered src/pages/{nav1}/{nav2}/{nav2}.service.ts /home/ubuntu/action-target/tmp/
mv --backup=numbered src/pages/{nav1}/{nav2}/use*.ts /home/ubuntu/action-target/tmp/

# VÃ©rifier build
npm run build:dev
```

================================================================================
## K) CHECKLIST FINALE
================================================================================

### Structure NAV2

- [ ] `{nav2}.types.ts` crÃ©Ã© avec TOUS les types
- [ ] `styles.css` crÃ©Ã© (layout uniquement)
- [ ] `index.tsx` crÃ©Ã© (routing)
- [ ] Layout/Sidebar/Onboarding crÃ©Ã©s (optionnel)
- [ ] Groupes crÃ©Ã©s (`general/`, `sites/`, `expert/`, etc.)
- [ ] **PAS de `{nav2}.service.ts`** (interdit)
- [ ] **PAS de `use*.ts` partagÃ©s** (interdit)

### Par GROUPE

- [ ] `index.ts` crÃ©Ã© (exports modales)
- [ ] Modales partagÃ©es du groupe Ã  la racine
- [ ] Tabs crÃ©Ã©s dans leurs dossiers

### Par FONCTION (NAV4) - Tabs dans le RIGHT PANEL

- [ ] `index.ts` crÃ©Ã© (barrel export)
- [ ] `{Nav4}Tab.tsx` crÃ©Ã©
- [ ] `{Nav4}Tab.service.ts` crÃ©Ã© (service ISOLÃ‰)
- [ ] `{Nav4}Tab.css` crÃ©Ã© (styles prÃ©fixÃ©s `.{nav4}-*`)
- [ ] Helpers dupliquÃ©s (pas de partage)
- [ ] Modales locales Ã  la fonction

### Traductions

- [ ] `public/locales/fr/{nav1}/{nav2}/{nav4}.json` crÃ©Ã©
- [ ] `public/locales/en/{nav1}/{nav2}/{nav4}.json` crÃ©Ã©

### Validation JS

- [ ] Test imports croisÃ©s tabs â†’ 0 rÃ©sultat
- [ ] Test imports croisÃ©s groupes â†’ 0 rÃ©sultat
- [ ] Test service partagÃ© NAV2 â†’ 0 rÃ©sultat
- [ ] Test service global â†’ 0 rÃ©sultat

### Validation CSS

- [ ] Test CSS croisÃ© â†’ 0 rÃ©sultat
- [ ] Test classes sans prÃ©fixe â†’ 0 rÃ©sultat
- [ ] Test prÃ©fixe wh- â†’ 0 rÃ©sultat

### Validation Layout

- [ ] padding content: 15px 24px 24px 24px
- [ ] gap split: 16px
- [ ] sidebar width: 280px

### Finalisation

- [ ] Build rÃ©ussi (`npm run build:dev`)
- [ ] Services partagÃ©s NAV2 supprimÃ©s
- [ ] Hooks partagÃ©s NAV2 supprimÃ©s
- [ ] Test fonctionnel

================================================================================
## L) COMMANDES UTILES
================================================================================

```bash
# Lister structure d'un NAV2
find src/pages/{nav1}/{nav2} -type f \( -name "*.tsx" -o -name "*.ts" -o -name "*.css" \) | sort

# Compter fichiers par groupe
find src/pages/{nav1}/{nav2} -maxdepth 2 -type d -exec sh -c 'echo -n "{}: "; find "{}" -maxdepth 1 -type f | wc -l' \;

# Lister les services (pour identifier les partagÃ©s Ã  supprimer)
find src/pages/{nav1}/{nav2} -name "*.service.ts" | sort

# Lister les hooks (pour identifier les partagÃ©s Ã  supprimer)
find src/pages/{nav1}/{nav2} -name "use*.ts" | sort

# VÃ©rifier imports croisÃ©s
grep -r "from.*tabs/" src/pages/{nav1}/{nav2}/ | grep -v 'from "./'

# VÃ©rifier CSS croisÃ©s
grep -r "import.*\.\..*\.css" src/pages/{nav1}/{nav2}/

# Lister classes CSS utilisÃ©es
grep -roh 'className="[^"]*"' src/pages/{nav1}/{nav2}/ | sort | uniq -c | sort -rn

# Lister traductions
find public/locales -path "*{nav2}*" -name "*.json" | sort
```

================================================================================
## M) RÃ‰CAPITULATIF DES RÃˆGLES
================================================================================

### HiÃ©rarchie des partages

```
âœ… AUTORISÃ‰:
â”œâ”€â”€ /services/api.ts              â† Globaux app
â”œâ”€â”€ /components/ui/               â† Design system
â”œâ”€â”€ /hooks/                       â† Hooks gÃ©nÃ©riques app
â”œâ”€â”€ var(--ods-*)                  â† Variables CSS ODS
â”‚
â”œâ”€â”€ {nav2}.types.ts               â† Types NAV2 (SEUL partage JS)
â”œâ”€â”€ styles.css                    â† Layout NAV2
â”œâ”€â”€ Layout/Sidebar/Onboarding.tsx â† Composants layout NAV2
â”œâ”€â”€ tabs.ts                       â† Barrel exports
â”‚
â”œâ”€â”€ {nav3 groupement}/index.ts    â† Exports groupement (LEFT PANEL)
â”œâ”€â”€ {nav3 groupement}/*Modal.tsx  â† Modales partagÃ©es GROUPEMENT
â”‚
â”œâ”€â”€ {nav4 fonction}/index.ts      â† Export fonction (RIGHT PANEL)
â”œâ”€â”€ {nav4 fonction}/{Nav4}Tab.tsx â† Composant isolÃ©
â”œâ”€â”€ {nav4 fonction}/{Nav4}Tab.service.ts  â† Service isolÃ©
â”œâ”€â”€ {nav4 fonction}/{Nav4}Tab.css â† CSS isolÃ©
â”œâ”€â”€ {nav4 fonction}/{Nav4}Tab.helpers.ts  â† Helpers isolÃ©s
â””â”€â”€ {nav4 fonction}/*Modal.tsx    â† Modales locales

âŒ INTERDIT:
â”œâ”€â”€ {nav2}.service.ts             â† Service partagÃ© NAV2
â”œâ”€â”€ {nav2}/use*.ts                â† Hooks partagÃ©s NAV2
â”œâ”€â”€ Import tab A â†’ tab B
â”œâ”€â”€ Import groupe A â†’ groupe B
â”œâ”€â”€ Service global /services/{nav1}.{nav2}.ts
â”œâ”€â”€ CSS croisÃ© entre tabs
â””â”€â”€ Classes CSS sans prÃ©fixe
```

### Mantra

> **DÃ‰FACTORISATION = DUPLICATION VOLONTAIRE (JS + CSS)**
>
> Si tu hÃ©sites entre "factoriser pour Ã©viter la duplication" et "dupliquer pour garantir l'isolation" :
>
> **â†’ TOUJOURS CHOISIR L'ISOLATION**
>
> Le coÃ»t de la duplication (quelques lignes JS/CSS en plus) est INFINIMENT plus faible
> que le coÃ»t du couplage (rÃ©gressions en cascade, styles qui cassent, tests impossibles).
>
> **"Chaque fonction (NAV4) est une Ã®le. Chaque groupement (NAV3) est un archipel.**
> **Aucun pont entre les Ã®les. Ni en JS, ni en CSS."**

================================================================================
FIN PROMPT SPLIT v3
================================================================================
